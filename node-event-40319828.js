System.register(["./index-68ccac70.js"],(function(t){"use strict";var e,n,i,r,o,s,u,a,c,h,l,p,d,f,_,v,m,g,y,E,C,b,A,N,O;return{setters:[function(t){e=t.bG,n=t.bH,i=t.bR,r=t.bx,o=t.d,s=t.cn,u=t.l,a=t.i,c=t.e,h=t.bA,l=t.ci,p=t.aG,d=t.aJ,f=t.aE,_=t.bE,v=t.b$,m=t.bD,g=t.ck,y=t.as,E=t.bg,C=t.bF,b=t.g,A=t.bV,N=t.bT,O=t.c0}],execute:function(){t({_:H,a:U,b:M,c:P,d:x,e:R,g:F,i:et,j:w,l:K,m:S,q:rt,r:it,s:T,t:ot});var I=/(\.[^\.\/\?\\]*)(\?.*)?$/,D=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,k=/[^\.\/]+\/\.\.\//;function w(){for(var t="",e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];t=(t+(""===t?"":"/")+s).replace(/(\/|\\\\)$/,"")}return t}function R(t){var e=I.exec(t);return e?e[1]:""}function S(t){if(t){var e=t.lastIndexOf(".");if(-1!==e)return t.substring(0,e)}return t}function M(t,e){var n=t.indexOf("?");n>0&&(t=t.substring(0,n));var i=/(\/|\\)([^\/\\]+)$/g.exec(t.replace(/(\/|\\)$/,""));if(!i)return t;var r=i[2];return e&&t.substring(t.length-e.length).toLowerCase()===e.toLowerCase()?r.substring(0,r.length-e.length):r}function x(t){var e=D.exec(t);return e?e[2]:""}function P(t,e){e=e||"";var n=t.indexOf("?"),i="";return n>0&&(i=t.substring(n),t=t.substring(0,n)),(n=t.lastIndexOf("."))<0?t+e+i:t.substring(0,n)+e+i}function U(t,e,n){if(0===e.indexOf("."))return P(t,e);var i=t.indexOf("?"),r="",o=n?R(t):"";return i>0&&(r=t.substring(i),t=t.substring(0,i)),i=(i=t.lastIndexOf("/"))<=0?0:i+1,t.substring(0,i)+e+o+r}function H(t){var e=t=String(t);do{e=t,t=t.replace(k,"")}while(e.length!==t.length);return t}function T(t){return t.replace(/[\/\\]$/,"")}function F(){return e.os===n.WINDOWS?"\\":"/"}t("p",Object.freeze({__proto__:null,join:w,extname:R,mainFileName:S,basename:M,dirname:x,changeExtname:P,changeBasename:U,_normalize:H,stripSep:T,getSeperator:F}));var L=t("h",function(){function t(t){this._map=null,this._count=0,t?(this._map=t,this._count=Object.keys(t).length):(this._map=i(!0),this._count=0)}var e=t.prototype;return e.add=function(t,e){return t in this._map||this._count++,this._map[t]=e},e.get=function(t){return this._map[t]},e.has=function(t){return t in this._map},e.remove=function(t){var e=this._map[t];return t in this._map&&(delete this._map[t],this._count--),e},e.clear=function(){0!==this._count&&(this._map=i(!0),this._count=0)},e.forEach=function(t){for(var e in this._map)t(this._map[e],e)},e.find=function(t){for(var e in this._map)if(t(this._map[e],e))return this._map[e];return null},e.destroy=function(){this._map=null},r(t,[{key:"map",get:function(){return this._map}},{key:"count",get:function(){return this._count}}]),t}()),G=t("P",function(){function t(e,n){this.id=t._pipelineId++,this.name="",this.pipes=[],this.name=e;for(var i=0,r=n.length;i<r;i++)this.pipes.push(n[i])}var e=t.prototype;return e.insert=function(t,e){return e>this.pipes.length?(o(4921),this):(this.pipes.splice(e,0,t),this)},e.append=function(t){return this.pipes.push(t),this},e.remove=function(t){return this.pipes.splice(t,1),this},e.sync=function(t){var e=this.pipes;if(0===e.length)return null;t.isFinished=!1;for(var n=0,i=e.length;n<i;){var r=(0,e[n])(t);if(r)return t.isFinished=!0,r;++n!==i&&(t.input=t.output,t.output=null)}return t.isFinished=!0,t.output},e.async=function(t){0!==this.pipes.length&&(t.isFinished=!1,this._flow(0,t))},e._flow=function(t,e){var n=this;(0,this.pipes[t])(e,(function(i){i?(e.isFinished=!0,e.dispatch("complete",i)):++t<n.pipes.length?(e.input=e.output,e.output=null,n._flow(t,e)):(e.isFinished=!0,e.dispatch("complete",i,e.output))}))},t}());G._pipelineId=0,function(){function t(t){if(this._weakMap={},void 0===window.WeakRef)throw new Error("this platform does not support WeakRef!");if(t)for(var e in t)this._weakMap[e]=new WeakRef(t[e])}var e=t.prototype;e.add=function(t,e){return this._weakMap[t]=new WeakRef(e),e},e.has=function(t){return t in this._weakMap&&!!this._weakMap[t].deref()},e.get=function(t){return this._weakMap[t]&&this._weakMap[t].deref()},e.remove=function(t){var e=this._weakMap[t];return delete this._weakMap[t],e&&e.deref()},e.clear=function(){this._weakMap=i(!0)},e.forEach=function(t){for(var e in this._weakMap){var n=this.get(e);n&&t(n,e)}},e.find=function(t){for(var e in this._weakMap){var n=this.get(e);if(n&&t(n,e))return this._weakMap[e].deref()}return null},e.destroy=function(){this._weakMap={}},r(t,[{key:"count",get:function(){return Object.values(this._weakMap).filter((function(t){return t.deref()})).length}}])}(),t("f",new L),t("o",new L),t("n",new L);var j,B,V=t("k",new L),W=(t("w",new G("normal load",[])),t("v",new G("fetch",[])),t("x",new G("transform url",[])));t("F",null),t("z",new Map),t("R",j),function(t){t.UUID="uuid",t.PATH="path",t.DIR="dir",t.URL="url",t.SCENE="scene"}(j||t("R",j={})),t("y",{default:{priority:0},preload:{maxConcurrency:6,maxRequestsPerFrame:2,priority:-1},scene:{maxConcurrency:20,maxRequestsPerFrame:20,priority:1},bundle:{maxConcurrency:20,maxRequestsPerFrame:20,priority:2},remote:{maxRetryCount:4}}),t("B",B),function(t){t.INTERNAL="internal",t.RESOURCES="resources",t.MAIN="main",t.START_SCENE="start-scene"}(B||t("B",B={}));var z=t("u",function(){function t(e){this.id=t._taskId++,this.onComplete=null,this.onProgress=null,this.onError=null,this.source=null,this.output=null,this.input=null,this.progress=null,this.options=null,this.isFinished=!0,this.set(e)}t.create=function(e){var n;return 0!==t._deadPool.length?(n=t._deadPool.pop()).set(e):n=new t(e),n};var e=t.prototype;return e.set=function(t){void 0===t&&(t=Object.create(null)),this.onComplete=t.onComplete||null,this.onProgress=t.onProgress||null,this.onError=t.onError||null,this.source=this.input=t.input,this.output=null,this.progress=t.progress,this.options=t.options||Object.create(null)},e.dispatch=function(t,e,n,i,r){switch(t){case"complete":this.onComplete&&this.onComplete(e,n);break;case"progress":this.onProgress&&this.onProgress(e,n,i,r);break;case"error":this.onError&&this.onError(e,n,i,r);break;default:var o="on"+t[0].toUpperCase()+t.substr(1);"function"==typeof this[o]&&this[o](e,n,i,r)}},e.recycle=function(){t._deadPool.length!==t.MAX_DEAD_NUM&&(this.onComplete=null,this.onProgress=null,this.onError=null,this.source=this.output=this.input=null,this.progress=null,this.options=null,t._deadPool.push(this))},r(t,[{key:"isFinish",get:function(){return this.isFinished},set:function(t){this.isFinished=t}}]),t}());z.MAX_DEAD_NUM=500,z._taskId=0,z._deadPool=[];var q="0123456789abcdef".split(""),$=["","","",""],Y=$.concat($,"-",$,"-",$,"-",$,"-",$,$,$),J=Y.map((function(t,e){return"-"===t?NaN:e})).filter(Number.isFinite);function K(t){var e=t.split("@")[0];if(22!==e.length)return t;Y[0]=t[0],Y[1]=t[1];for(var n=2,i=2;n<22;n+=2){var r=s[t.charCodeAt(n)],o=s[t.charCodeAt(n+1)];Y[J[i++]]=q[r>>2],Y[J[i++]]=q[(3&r)<<2|o>>4],Y[J[i++]]=q[15&o]}return t.replace(e,Y.join(""))}var X,Z,Q,tt=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/;function et(t){var e=tt.exec(t);return e?e[1]:""}function nt(t,e){(e=e||Object.create(null)).__isNative__=e.isNative,e.nativeExt&&(e.ext=e.nativeExt);var n=V.find((function(e){return!!e.getAssetInfo(t)}));return n&&(e.bundle=n.name),ot(t,e)}function it(t){return!!t&&(t instanceof u.SceneAsset||t instanceof u.Scene)}function rt(t){return t&&(46===t.charCodeAt(0)&&47===t.charCodeAt(1)?t=t.slice(2):47===t.charCodeAt(0)&&(t=t.slice(1))),t}function ot(t,e){var n=z.create({input:t,options:e}),i=[];try{for(var r,o=W.sync(n),s=a(o);!(r=s()).done;){var u=r.value,h=u.url;u.recycle(),i.push(h)}}catch(t){for(var l,p=a(n.output);!(l=p()).done;)l.value.recycle();c(t.message,t.stack)}return n.recycle(),i.length>1?i:i[0]}t("D",Object.freeze({__proto__:null,getUuidFromURL:et,getUrlWithUuid:nt,isScene:it,normalize:rt,transform:ot,decodeUuid:K}));var st,ut,at,ct=E,ht=g,lt=t("A",m("cc.Asset")((Z=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).loaded=!0,e._native=Q&&Q(),e._nativeUrl="",e._file=null,e._ref=0,Object.defineProperty(l(e),"_uuid",{value:"",writable:!0}),e}h(e,t),e.deserialize=function(t){return u.deserialize(t)};var n=e.prototype;return n.toString=function(){return this.nativeUrl},n.serialize=function(){},n._setRawAsset=function(t,e){void 0===e&&(e=!0),this._native=!1!==e?t||"":"/"+t},n.addRef=function(){return this._ref++,this},n.decRef=function(t){return void 0===t&&(t=!0),this._ref>0&&this._ref--,t&&u.assetManager._releaseManager.tryRelease(this),this},n.onLoaded=function(){},n.initDefault=function(t){t&&(this._uuid=t),this.isDefault=!0},n.validate=function(){return!0},n.destroy=function(){return p(d(12101,this._uuid)),t.prototype.destroy.call(this)},r(e,[{key:"nativeUrl",get:function(){if(!this._nativeUrl){if(!this._native)return"";var t=this._native;if(47===t.charCodeAt(0))return t.slice(1);46===t.charCodeAt(0)?this._nativeUrl=nt(this._uuid,{nativeExt:t,isNative:!0}):this._nativeUrl=nt(this._uuid,{__nativeName__:t,nativeExt:R(t),isNative:!0})}return this._nativeUrl}},{key:"uuid",get:function(){return this._uuid}},{key:"_nativeAsset",get:function(){return this._file},set:function(t){this._file=t}},{key:"nativeAsset",get:function(){return this._file}},{key:"_nativeDep",get:function(){if(this._native)return{__isNative__:!0,uuid:this._uuid,ext:this._native}}},{key:"refCount",get:function(){return this._ref}}]),e}(f(y)),Q=_(Z.prototype,"_native",[ct],(function(){return""})),v(Z.prototype,"_nativeAsset",[ht],Object.getOwnPropertyDescriptor(Z.prototype,"_nativeAsset"),Z.prototype),X=Z))||X);lt.prototype.createNode=null,u.Asset=lt;var pt=t("S",m("cc.Script")(st=function(t){function e(){return t.apply(this,arguments)||this}return h(e,t),e}(lt))||st);u._Script=pt;var dt=t("J",m("cc.JavaScript")(ut=function(t){function e(){return t.apply(this,arguments)||this}return h(e,t),e}(pt))||ut);u._JavaScript=dt;var ft,_t,vt,mt,gt,yt,Et,Ct=t("T",m("cc.TypeScript")(at=function(t){function e(){return t.apply(this,arguments)||this}return h(e,t),e}(pt))||at);u._TypeScript=Ct;var bt,At,Nt,Ot,It,Dt,kt,wt,Rt,St=t("E",m("cc.ClickEvent")((_t=function(){function t(){this.target=vt&&vt(),this.component=mt&&mt(),this._componentId=gt&&gt(),this.handler=yt&&yt(),this.customEventData=Et&&Et()}t.emitEvents=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,s=e.length;o<s;o++){var u=e[o];u instanceof t&&u.emit(i)}};var e=t.prototype;return e.emit=function(t){var e=this.target;if(u.isValid(e)){this._genCompIdIfNeeded();var n=u.js.getClassById(this._componentId),i=e.getComponent(n);if(u.isValid(i)){var r=i[this.handler];"function"==typeof r&&(null!=this.customEventData&&""!==this.customEventData&&(t=t.slice()).push(this.customEventData),r.apply(i,t))}}},e._compName2Id=function(t){var e=u.js.getClassByName(t);return u.js.getClassId(e)},e._compId2Name=function(t){var e=u.js.getClassById(t);return u.js.getClassName(e)},e._genCompIdIfNeeded=function(){this._componentId||(this._componentName=this.component,this.component="")},r(t,[{key:"_componentName",get:function(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)},set:function(t){this._componentId=this._compName2Id(t)}}]),t}(),vt=_(_t.prototype,"target",[E],(function(){return null})),mt=_(_t.prototype,"component",[E],(function(){return""})),gt=_(_t.prototype,"_componentId",[E],(function(){return""})),yt=_(_t.prototype,"handler",[E],(function(){return""})),Et=_(_t.prototype,"customEventData",[E],(function(){return""})),ft=_t))||ft),Mt=new O("Comp"),xt=y.Flags.IsOnLoadCalled,Pt=t("C",(bt=m("cc.Component"),At=C(pt),bt(((wt=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).node=It&&It(),e._enabled=Dt&&Dt(),e.__prefab=kt&&kt(),e._sceneGetter=null,e._id=Mt.getNewId(),e}h(e,t);var n=e.prototype;return n._getRenderScene=function(){return this._sceneGetter?this._sceneGetter():this.node.scene.renderScene},n.addComponent=function(t){return this.node.addComponent(t)},n.getComponent=function(t){return this.node.getComponent(t)},n.getComponents=function(t){return this.node.getComponents(t)},n.getComponentInChildren=function(t){return this.node.getComponentInChildren(t)},n.getComponentsInChildren=function(t){return this.node.getComponentsInChildren(t)},n.destroy=function(){return!!t.prototype.destroy.call(this)&&(this._enabled&&this.node.activeInHierarchy&&u.director._compScheduler.disableComp(this),!0)},n._onPreDestroy=function(){this.unscheduleAllCallbacks(),u.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)},n._instantiate=function(t){return t||(t=u.instantiate._clone(this,this)),t&&(t.node=null),t},n.schedule=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=u.macro.REPEAT_FOREVER),void 0===i&&(i=0),b(t,1619),b((e=e||0)>=0,1620),n=Number.isNaN(n)?u.macro.REPEAT_FOREVER:n,i=i||0;var r=u.director.getScheduler(),o=r.isTargetPaused(this);r.schedule(t,this,e,n,i,o)},n.scheduleOnce=function(t,e){void 0===e&&(e=0),this.schedule(t,0,0,e)},n.unschedule=function(t){t&&u.director.getScheduler().unschedule(t,this)},n.unscheduleAllCallbacks=function(){u.director.getScheduler().unscheduleAllForTarget(this)},r(e,[{key:"name",get:function(){if(this._name)return this._name;var t=N(this),e=t.lastIndexOf(".");return e>=0&&(t=t.slice(e+1)),this.node?this.node.name+"<"+t+">":t},set:function(t){this._name=t}},{key:"uuid",get:function(){return this._id}},{key:"__scriptAsset",get:function(){return null}},{key:"enabled",get:function(){return this._enabled},set:function(t){if(this._enabled!==t&&(this._enabled=t,this.node.activeInHierarchy)){var e=u.director._compScheduler;t?e.enableComp(this):e.disableComp(this)}}},{key:"enabledInHierarchy",get:function(){return this._enabled&&this.node&&this.node.activeInHierarchy}},{key:"_isOnLoadCalled",get:function(){return this._objFlags&xt}}]),e}(y)).EventHandler=St,wt.system=null,v((Ot=wt).prototype,"__scriptAsset",[At],Object.getOwnPropertyDescriptor(Ot.prototype,"__scriptAsset"),Ot.prototype),It=_(Ot.prototype,"node",[E],(function(){return null})),Dt=_(Ot.prototype,"_enabled",[E],(function(){return!0})),kt=_(Ot.prototype,"__prefab",[E],(function(){return null})),Nt=Ot))||Nt)),Ut=Pt.prototype;Ut.update=void 0,Ut.lateUpdate=void 0,Ut.__preload=void 0,Ut.onLoad=void 0,Ut.start=void 0,Ut.onEnable=void 0,Ut.onDisable=void 0,Ut.onDestroy=void 0,Ut.onFocusInEditor=void 0,Ut.onLostFocusInEditor=void 0,Ut.resetInEditor=void 0,Ut._getLocalBounds=void 0,Ut.onRestore=void 0,Pt._requireComponent=null,Pt._executionOrder=0,A(Pt,"_registerEditorProps",(function(t,e){var n=e.requireComponent;n&&(Array.isArray(n)&&(n=n.filter(Boolean)),t._requireComponent=n);var i=e.executionOrder;i&&"number"==typeof i&&(t._executionOrder=i)})),u.Component=Pt,t("N",Rt),function(t){t.TOUCH_START="touch-start",t.TOUCH_MOVE="touch-move",t.TOUCH_END="touch-end",t.TOUCH_CANCEL="touch-cancel",t.MOUSE_DOWN="mouse-down",t.MOUSE_MOVE="mouse-move",t.MOUSE_UP="mouse-up",t.MOUSE_WHEEL="mouse-wheel",t.MOUSE_ENTER="mouse-enter",t.MOUSE_LEAVE="mouse-leave",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.DEVICEMOTION="devicemotion",t.TRANSFORM_CHANGED="transform-changed",t.MOBILITY_CHANGED="mobility-changed",t.SCENE_CHANGED_FOR_PERSISTS="scene-changed-for-persists",t.SIZE_CHANGED="size-changed",t.ANCHOR_CHANGED="anchor-changed",t.COLOR_CHANGED="color-changed",t.CHILD_ADDED="child-added",t.CHILD_REMOVED="child-removed",t.PARENT_CHANGED="parent-changed",t.NODE_DESTROYED="node-destroyed",t.LAYER_CHANGED="layer-changed",t.SIBLING_ORDER_CHANGED="sibling-order-changed",t.ACTIVE_IN_HIERARCHY_CHANGED="active-in-hierarchy-changed",t.COMPONENT_ADDED="component-added",t.COMPONENT_REMOVED="component-removed",t.LIGHT_PROBE_CHANGED="light-probe-changed",t.LIGHT_PROBE_BAKING_CHANGED="light-probe-baking-changed"}(Rt||t("N",Rt={}))}}}));
