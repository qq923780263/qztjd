System.register(["./index-68ccac70.js","./director-56fe9b8d.js","./deprecated-37e42d8f.js","./node-event-40319828.js","./find-222dc7da.js","./pipeline-state-manager-8f16c5a7.js","./buffer-barrier-d1733967.js","./touch-685512cb.js"],(function(e){"use strict";var t,n,r,i,a,o,s,u,d,c,g,y,f,p,h,l,m;return{setters:[function(e){t=e.f,n=e.a$,r=e.a_,i=e.aa,a=e.bD,o=e.bF,s=e.cr,u=e.bA,d=e.d,c=e.bx,g=e.b$,y=e.bE,f=e.J,p=e.bg},function(){},function(e){h=e.g,l=e.G},function(e){m=e.C},function(){},function(){},function(){},function(){}],execute:function(){h.on(l.EVENT_POST_SUBSYSTEM_INIT,(function(){E.init()}));var _,L,v,M,S,x,E=e("SortingLayers",function(){function e(){}return e.getSortingPriority=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),(e+32768<<16|t+32768)>>>0},e.getLayerIndex=function(e){void 0===e&&(e=0);var n=0;return this.indexMap.has(e)?n=this.indexMap.get(e):t(2105),n},e.getLayerIndexByName=function(e){var t=this.getLayerByName(e);return this.getLayerIndex(t)},e.getLayerName=function(e){void 0===e&&(e=0);var n="";return this.nameMap.has(e)?n=this.nameMap.get(e):t(2105),n},e.getLayerByName=function(e){for(var n=this.nameMap.size,r=this.nameMap.keys(),i=0,a=0;a<n;a++)if(i=r.next().value,this.nameMap.get(i)===e)return i;return t(2106),0},e.isLayerValid=function(e){return!!this.indexMap.has(e)||(t(2105),!1)},e.getBuiltinLayers=function(){return[{id:0,name:"default",value:0}]},e.init=function(){var t=n.querySettings(r.Category.ENGINE,"sortingLayers");t&&0!==t.length||(t=this.getBuiltinLayers()),e.resetState();for(var a=0;a<t.length;a++){var o=t[a];e.setLayer(o.id,o.name,o.value),e.Enum[o.name]=o.id}i.update(e.Enum),i.sortList(e.Enum,(function(t,n){return e.getLayerIndex(t.value)-e.getLayerIndex(n.value)}))},e.setLayer=function(e,t,n){this.nameMap.set(e,t),this.indexMap.set(e,n)},e.resetState=function(){for(var t=Object.keys(e.Enum),n=0;n<t.length;n++)delete e.Enum[e.Enum[t[n]]],delete e.Enum[t[n]];e.indexMap.clear(),e.nameMap.clear()},e}());E.nameMap=new Map,E.indexMap=new Map,E.Enum=i({default:0}),e("Sorting",(_=a("cc.Sorting"),L=o(E.Enum),_(v=s((M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._sortingLayer=S&&S(),t._sortingOrder=x&&x(),t._modelRenderer=null,t}u(t,e);var n=t.prototype;return n.__preload=function(){this._modelRenderer=this.getComponent("cc.ModelRenderer"),this._modelRenderer||d(16301,this.node.name),this._updateSortingPriority()},n._updateSortingPriority=function(){var e=E.getLayerIndex(this._sortingLayer),t=E.getSortingPriority(e,this._sortingOrder);this._modelRenderer&&this._modelRenderer.isValid&&(this._modelRenderer.priority=t)},c(t,[{key:"sortingLayer",get:function(){return this._sortingLayer},set:function(e){e!==this._sortingLayer&&E.isLayerValid(e)&&(this._sortingLayer=e,this._updateSortingPriority())}},{key:"sortingOrder",get:function(){return this._sortingOrder},set:function(e){e!==this._sortingOrder&&(this._sortingOrder=f(e,-32768,32767),this._updateSortingPriority())}}]),t}(m),g(M.prototype,"sortingLayer",[L],Object.getOwnPropertyDescriptor(M.prototype,"sortingLayer"),M.prototype),S=y(M.prototype,"_sortingLayer",[p],(function(){return E.Enum.default})),x=y(M.prototype,"_sortingOrder",[p],(function(){return 0})),v=M))||v)||v))}}}));
