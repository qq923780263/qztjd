System.register(["./index-68ccac70.js","./find-222dc7da.js","./director-56fe9b8d.js","./pipeline-state-manager-8f16c5a7.js","./node-event-40319828.js"],(function(t){"use strict";var e,a,n,i,r,s,l,c,h,o,u;return{setters:[function(t){e=t.bA,a=t.d,n=t.bx,i=t.b$,r=t.bE,s=t.bD,l=t.cr,c=t.bF},function(t){h=t.M,o=t.a6},function(){},function(){},function(t){u=t.C}],execute:function(){var f,m,_,M,d,g,I={parent:null,owner:null,subModelIdx:0},p=l,y=c;t("R",(f=s("cc.Renderer"),m=y(o),_=y([o]),f(M=p((d=function(t){function i(){for(var e,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._materials=g&&g(),e._materialInstances=[],e}e(i,t);var r=i.prototype;return r.getMaterial=function(t){return this.getSharedMaterial(t)},r.getSharedMaterial=function(t){return t<0||t>=this._materials.length?null:this._materials[t]},r.setMaterial=function(t,e){t&&t instanceof h&&console.error("Can't set a material instance to a sharedMaterial slot"),this._materials[e]=t;var a=this._materialInstances[e];a&&(a.destroy(),this._materialInstances[e]=null),this._onMaterialModified(e,this._materials[e])},r.getMaterialInstance=function(t){if(!this._materials[t])return null;if(!this._materialInstances[t]){I.parent=this._materials[t],I.owner=this,I.subModelIdx=t;var e=new h(I);I.parent=null,I.owner=null,I.subModelIdx=0,this.setMaterialInstance(e,t)}return this._materialInstances[t]},r.setMaterialInstance=function(t,e){if("number"==typeof t){a(12007);var n=t;t=e,e=n}var i=this._materialInstances[e];t&&t.parent?t!==i&&(this._materialInstances[e]=t,this._onMaterialModified(e,t)):(t!==this._materials[e]||i)&&this.setMaterial(t,e)},r.getRenderMaterial=function(t){return this._materialInstances[t]||this._materials[t]},r._onMaterialModified=function(){},r._onRebuildPSO=function(){},r._clearMaterials=function(){},n(i,[{key:"sharedMaterial",get:function(){return this.getSharedMaterial(0)}},{key:"sharedMaterials",get:function(){return this._materials},set:function(t){for(var e=0;e<t.length;e++)t[e]!==this._materials[e]&&this.setMaterial(t[e],e);if(t.length<this._materials.length){for(var a=t.length;a<this._materials.length;a++)this.setMaterial(null,a);this._materials.splice(t.length)}}},{key:"material",get:function(){return this.getMaterialInstance(0)},set:function(t){(1!==this._materials.length||this._materialInstances[0]||this._materials[0]!==t)&&this.setMaterialInstance(t,0)}},{key:"materials",get:function(){for(var t=0;t<this._materials.length;t++)this._materialInstances[t]=this.getMaterialInstance(t);return this._materialInstances},set:function(t){for(var e=t.length,a=this._materials.length,n=e;n<a;n++)this.setMaterialInstance(null,n);this._materials.length=e,this._materialInstances.length=e;for(var i=0;i<e;i++)this._materialInstances[i]!=t[i]&&this.setMaterialInstance(t[i],i)}}]),i}(u),i(d.prototype,"sharedMaterials",[m],Object.getOwnPropertyDescriptor(d.prototype,"sharedMaterials"),d.prototype),g=r(d.prototype,"_materials",[_],(function(){return[]})),M=d))||M)||M))}}}));
