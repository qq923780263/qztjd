System.register([],(function(t,e){"use strict";return{execute:function(){function n(t,e){const n="undefined"==typeof window?global:window;return void 0===n[t]?n[t]=e:n[t]}t({$:Tr,D:Qr,G:pr,I:gr,J:_r,K:xr,L:br,N:Mr,O:wr,W:Ar,X:Nr,Y:zr,Z:Ir,_:U,a:T,a0:Or,a1:Sr,a2:Pr,a3:Cr,a4:Rr,a5:Ur,a6:Lr,a9:be,aB:function(t){return t[Os]},aE:Un,aG:C,aH:et,aI:nt,aJ:tt,aa:Me,ab:function(t){"__enums__"in t||Ft(t,"__enums__",null,!0)},af:function(t){t>0&&(ar=t)},aj:hr,ak:function(t){for(var e,n=_(t);!(e=n()).done;)cr(e.value)},al:function(t){return mr||(mr="undefined"==typeof Proxy?{}:new Proxy(t,{get:function(t,e,n){return cr(e),Reflect.get(t,e,n)}})),mr},am:ah,an:sh,aq:_n,ar:xn,b:P,b$:function(t,e,n,r,i){var a={};return Object.keys(r).forEach((function(t){a[t]=r[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a},b2:jm,b3:su,bA:l,bE:fs,bF:to,bI:function(t){var e=Math.max(Math.max(t.x,t.y),t.z),n=128;e>1e-4&&(n=Math.log(e)/Math.log(1.1),n=_r((n=Math.ceil(n))+128,0,255));var r=1/Math.pow(1.1,n-128),i=function(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}(t.multiplyScalar(r),new qr(0,0,0),new qr(1,1,1));i.multiplyScalar(255);var a,s,o=Yr(i).add((a=i.subtract(Yr(i)))<(s=new qr(.5,.5,.5))?s:a);return new kr(o.x/255,o.y/255,o.z/255,n/255)},bO:xt,bQ:_t,bR:qt,bS:$t,bT:jt,bU:Lt,bW:Vt,bY:Mt,bf:Ps,bl:Nn,bm:zn,bp:R,bq:function(t,e){return os(t,e,0)},br:os,bs:function(t,e,n){for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(n(s,e)<0)i=a-1;else{if(!(n(s,e)>0))return a;r=a+1}}return~r},bt:function(){},bu:function(){},bv:function(t,e){e>=0&&t.length,t.length},bx:h,c:F,c1:ye,c3:p,c5:pe,c6:ne,c7:ee,c9:c,cB:Et,cE:He,cF:ke,cJ:Su,cL:Kn,cN:qe,cO:je,cR:v,cc:Be,cg:Jt,ci:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},cj:de,ck:Ns,cm:Qn,cq:ce,cs:zo,cu:function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},cw:bt,cx:function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},cy:wt,d:D,e:S,f:q,g:$,i:_,p:jr,r:Fr,s:ai,u:hi,v:fi,w:O,x:vi,z:gi}),t("bM",!1);const r=!0;n("CC_WECHAT",!0),n("CC_BAIDU",!1),t("cd",!1),n("CC_XIAOMI",!1),n("CC_ALIPAY",!1),n("CC_BYTEDANCE",!1),t("cb",!1),n("CC_OPPO",!1),t("ca",!1),n("CC_VIVO",!1),n("CC_HUAWEI",!1),n("CC_COCOSPLAY",!1),n("CC_QTT",!1),n("CC_LINKSURE",!1);const i=t("cf",!1);n("CC_EDITOR",!1),t("ce",!1),t("ch",!1),n("CC_PREVIEW",!1),n("CC_BUILD",!0),n("CC_TEST",!1),n("CC_DEBUG",!1),n("CC_DEV",!1),t("cG",!0),n("CC_MINIGAME",!0),t("cI",!1),n("CC_RUNTIME_BASED",!1),n("CC_SUPPORT_JIT",!1),t("cH",!1),n("CC_JSB",!1);var a="undefined"==typeof window?global:window,s=t("l",{_global:a});s.internal={};var o=t("k","3.8.0");a.CocosEngine=s.ENGINE_VERSION=o,a.cc=s;var m=t("b_",void 0!==globalThis.jsb&&void 0!==jsb.window?jsb.window:globalThis);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"))?i:String(i)),r)}var i}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(){return t("c9",c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),c.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,y(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function v(e,n,r){return d()?t("cR",v=Reflect.construct.bind()):t("cR",v=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}),v.apply(null,arguments)}function p(e){var n="function"==typeof Map?new Map:void 0;return t("c3",p=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return v(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)}),p(e)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a.ccwindow=m;var x=m.document,b="https://github.com/cocos-creator/engine/blob/develop/EngineErrorMap.md",M=null,w=console.log.bind(console),E=w,A=w,N=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("ASSERT: "+I.apply(void 0,[e].concat(r)))}},z=w;function I(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return s.js.formatStr.apply(null,[t].concat(n))}function T(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return w.apply(void 0,[t].concat(n))}function O(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return E.apply(void 0,[t].concat(n))}function S(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return A.apply(void 0,[t].concat(n))}function P(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return N.apply(void 0,[t,e].concat(r))}function C(){return z.apply(void 0,arguments)}function R(t){if(w=E=A=N=z=function(){},t!==j.NONE){if(t>j.ERROR){var e=function(t){if(s.game.canvas){if(!M){var e=x.createElement("Div");e.setAttribute("id","logInfoDiv"),e.setAttribute("width","200"),e.setAttribute("height",s.game.canvas.height);var n=e.style;n.zIndex="99999",n.position="absolute",n.top=n.left="0",(M=x.createElement("textarea")).setAttribute("rows","20"),M.setAttribute("cols","30"),M.setAttribute("disabled","true");var r=M.style;r.backgroundColor="transparent",r.borderBottom="1px solid #cccccc",r.borderTopWidth=r.borderLeftWidth=r.borderRightWidth="0px",r.borderTopStyle=r.borderLeftStyle=r.borderRightStyle="none",r.padding="0px",r.margin="0px",e.appendChild(M),s.game.canvas.parentNode.appendChild(e)}M.value=M.value+t+"\r\n",M.scrollTop=M.scrollHeight}};A=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e("ERROR :  "+I.apply(void 0,[t].concat(r)))},N=function(t,n){if(!t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];e("ASSERT: "+I.apply(void 0,[n].concat(i)))}},t!==j.ERROR_FOR_WEB_PAGE&&(E=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e("WARN :  "+I.apply(void 0,[t].concat(r)))}),t===j.INFO_FOR_WEB_PAGE&&(w=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e(I.apply(void 0,[t].concat(r)))})}else console&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),A=console.error.bind?console.error.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return console.error.apply(console,[t].concat(n))},N=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=I.apply(void 0,[e].concat(r));throw new Error(a)}});if(t!==j.ERROR&&(E=console.warn.bind?console.warn.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return console.warn.apply(console,[t].concat(n))}),t<=j.INFO&&(w=console.log.bind?console.log.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return console.log.apply(console,[t].concat(n))}),t<=j.VERBOSE&&"function"==typeof console.debug){var n=console.debug.bind(console);z=function(){return n.apply(void 0,arguments)}}}}function U(t){S(t.stack||t)}function L(t){return function(e){for(var n=t+" "+e+", please go to "+b+"#"+e+" to see details.",r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return 0===i.length?n:n+" Arguments: "+i.join(", ")}}var k=L("Log");function F(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T(k.apply(void 0,[t].concat(n)))}var B=L("Warning");function D(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];O(B.apply(void 0,[t].concat(n)))}var H=L("Error");function q(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];S(H.apply(void 0,[t].concat(n)))}var j,V,G,W,K,Q,Y,X,Z,J=L("Assert");function $(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];P(!1,J.apply(void 0,[e].concat(r)))}}function tt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.apply(void 0,[t].concat(n))}function et(){return!!s.profiler&&s.profiler.isShowingStats()}function nt(t){s.profiler&&(t?s.profiler.showStats():s.profiler.hideStats())}t("aK",j),function(t){t[t.NONE=0]="NONE",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.INFO_FOR_WEB_PAGE=5]="INFO_FOR_WEB_PAGE",t[t.WARN_FOR_WEB_PAGE=6]="WARN_FOR_WEB_PAGE",t[t.ERROR_FOR_WEB_PAGE=7]="ERROR_FOR_WEB_PAGE"}(j||t("aK",j={})),t("h",Object.freeze({__proto__:null,log:T,warn:O,error:S,assert:P,debug:C,_resetDebugSetting:R,_throw:U,logID:F,warnID:D,errorID:q,assertID:$,get DebugMode(){return j},getError:tt,isDisplayStats:et,setDisplayStats:nt})),t("bX",V),function(t){t[t.PORTRAIT=1]="PORTRAIT",t[t.PORTRAIT_UPSIDE_DOWN=2]="PORTRAIT_UPSIDE_DOWN",t[t.LANDSCAPE_LEFT=4]="LANDSCAPE_LEFT",t[t.LANDSCAPE_RIGHT=8]="LANDSCAPE_RIGHT",t[t.LANDSCAPE=12]="LANDSCAPE",t[t.AUTO=13]="AUTO"}(V||t("bX",V={}));var rt,it,at=t("bJ",{});rt=at,it=wx,Object.keys(it).forEach((function(t){"function"!=typeof it[t]?rt[t]=it[t]:rt[t]=it[t].bind(it)})),at.wx={},at.wx.onKeyDown=null===(G=wx.onKeyDown)||void 0===G?void 0:G.bind(wx),at.wx.onKeyUp=null===(W=wx.onKeyUp)||void 0===W?void 0:W.bind(wx),at.wx.onMouseDown=null===(K=wx.onMouseDown)||void 0===K?void 0:K.bind(wx),at.wx.onMouseMove=null===(Q=wx.onMouseMove)||void 0===Q?void 0:Q.bind(wx),at.wx.onMouseUp=null===(Y=wx.onMouseUp)||void 0===Y?void 0:Y.bind(wx),at.wx.onWheel=null===(X=wx.onWheel)||void 0===X?void 0:X.bind(wx);var st,ot,mt=wx.getSystemInfoSync();st=0,ot=null,ot=setInterval((function(){var t=wx.getSystemInfoSync();mt.screenWidth===t.screenWidth&&mt.screenHeight===t.screenHeight?++st>=10&&null!==ot&&(clearInterval(ot),ot=null):st=0,mt=t}),500),null===(Z=at.onWindowResize)||void 0===Z||Z.call(at,(function(){mt=wx.getSystemInfoSync()})),at.getSystemInfoSync=function(){return mt};var ut=at.getSystemInfoSync();at.isDevTool="devtools"===ut.platform,Object.defineProperty(at,"isLandscape",{get:function(){var t=wx.getSystemInfoSync();return"string"==typeof t.deviceOrientation?t.deviceOrientation.startsWith("landscape"):t.screenWidth>t.screenHeight}});var ht,ct,lt,ft,yt=V.LANDSCAPE_RIGHT;if("android"!==ut.platform.toLocaleLowerCase()&&wx.onDeviceOrientationChange((function(t){"landscape"===t.value?yt=V.LANDSCAPE_RIGHT:"landscapeReverse"===t.value&&(yt=V.LANDSCAPE_LEFT)})),Object.defineProperty(at,"orientation",{get:function(){return at.isLandscape?yt:V.PORTRAIT}}),at.onAccelerometerChange=function(t){at.offAccelerometerChange(),ht=function(e){var n=e.x,r=e.y;if(at.isLandscape){var i=yt===V.LANDSCAPE_RIGHT?1:-1,a=n;n=-r*i,r=a*i}var s={x:n,y:r,z:e.z};t(s)}},at.offAccelerometerChange=function(){ht&&(wx.offAccelerometerChange(ht),ht=void 0)},at.startAccelerometer=function(t){ht&&wx.onAccelerometerChange(ht),wx.startAccelerometer(t)},at.createInnerAudioContext=(ct=wx,lt={onPlay:!0,onPause:!0,onStop:!0,onSeek:!1},void 0===(ft=!0)&&(ft=!1),function(){var t=ct.createInnerAudioContext();if(lt.onPlay){var e=t.play,n=null;Object.defineProperty(t,"onPlay",{configurable:!0,value:function(t){n=t}}),Object.defineProperty(t,"play",{configurable:!0,value:function(){e.call(t),n&&(ft?setTimeout(n,0):n())}})}if(lt.onPause){var r=t.pause,i=null;Object.defineProperty(t,"onPause",{configurable:!0,value:function(t){i=t}}),Object.defineProperty(t,"pause",{configurable:!0,value:function(){r.call(t),i&&(ft?setTimeout(i,0):i())}})}if(lt.onStop){var a=t.stop,s=null;Object.defineProperty(t,"onStop",{configurable:!0,value:function(t){s=t}}),Object.defineProperty(t,"stop",{configurable:!0,value:function(){a.call(t),s&&(ft?setTimeout(s,0):s())}})}if(lt.onSeek){var o=t.seek,m=null;Object.defineProperty(t,"onSeeked",{configurable:!0,value:function(t){m=t}}),Object.defineProperty(t,"seek",{configurable:!0,value:function(e){o.call(t,e),m&&(ft?setTimeout(m,0):m())}})}return t}),at.getSafeArea=function(){return wx.getSystemInfoSync().safeArea},"windows"===ut.platform&&function(t,e){var n=/\d+\.\d+\.\d+/;if(!n.test(t)||!n.test(e))return console.warn("wrong format of version when compare version"),0;for(var r=t.split(".").map((function(t){return Number.parseInt(t)})),i=e.split(".").map((function(t){return Number.parseInt(t)})),a=0;a<3;++a){var s=r[a],o=i[a];if(s!==o)return s-o}return 0}(ut.SDKVersion,"2.16.0")<0){var dt=canvas;if(dt){var vt=dt.getContext("webgl"),pt=vt.useProgram.bind(vt);vt.useProgram=function(t){t&&pt(t)}}}var gt=t("bN",function(){function t(t){this.i=0,this.array=t}var e=t.prototype;return e.remove=function(t){var e=this.array.indexOf(t);e>=0&&this.removeAt(e)},e.removeAt=function(t){this.array.splice(t,1),t<=this.i&&--this.i},e.fastRemove=function(t){var e=this.array.indexOf(t);e>=0&&this.fastRemoveAt(e)},e.fastRemoveAt=function(t){var e=this.array;e[t]=e[e.length-1],--e.length,t<=this.i&&--this.i},e.push=function(t){this.array.push(t)},h(t,[{key:"length",get:function(){return this.array.length},set:function(t){this.array.length=t,this.i>=t&&(this.i=t-1)}}]),t}());function _t(t,e){t.splice(e,1)}function xt(t,e){var n=t.length;e<0||e>=n||(t[e]=t[n-1],t.length=n-1)}function bt(t,e){var n=t.indexOf(e);return n>=0&&(_t(t,n),!0)}function Mt(t,e){var n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],--t.length)}function wt(t,e){var n=t.findIndex(e);if(n>=0){var r=t[n];return _t(t,n),r}}function Et(t,e){return t.indexOf(e)>=0}var At=Object.freeze({__proto__:null,removeAt:_t,fastRemoveAt:xt,remove:bt,fastRemove:Mt,removeIf:wt,verifyType:function(t,e){if(t&&t.length>0)for(var n,r=_(t);!(n=r()).done;)if(!(n.value instanceof e))return F(1300),!1;return!0},removeArray:function(t,e){for(var n=0,r=e.length;n<r;n++)bt(t,e[n])},appendObjectsAt:function(t,e,n){return t.splice.apply(t,[n,0].concat(e)),t},contains:Et,copy:function(t){for(var e=t.length,n=new Array(e),r=0;r<e;r+=1)n[r]=t[r];return n},MutableForwardIterator:gt}),Nt=function(){function t(){this._poolHandle=-1,It.addContainer(this)}return t.prototype.destroy=function(){It.removeContainer(this)},t}(),zt=function(){function t(){this._pools=[],this._lastShrinkPassed=0,this.shrinkTimeSpan=5}var e=t.prototype;return e.addContainer=function(t){-1===t._poolHandle&&(t._poolHandle=this._pools.length,this._pools.push(t))},e.removeContainer=function(t){-1!==t._poolHandle&&(this._pools[this._pools.length-1]._poolHandle=t._poolHandle,xt(this._pools,t._poolHandle),t._poolHandle=-1)},e.tryShrink=function(){for(var t=0;t<this._pools.length;t++)this._pools[t].tryShrink()},e.update=function(t){this._lastShrinkPassed+=t,this._lastShrinkPassed>this.shrinkTimeSpan&&(this.tryShrink(),this._lastShrinkPassed-=this.shrinkTimeSpan)},t}(),It=t("bZ",new zt),Tt=t("P",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._ctor=void 0,i._elementsPerBatch=void 0,i._nextAvail=void 0,i._freePool=[],i._dtor=void 0,i._ctor=e,i._dtor=r||null,i._elementsPerBatch=Math.max(n,1),i._nextAvail=i._elementsPerBatch-1;for(var a=0;a<i._elementsPerBatch;++a)i._freePool.push(e());return i}l(e,t);var n=e.prototype;return n.alloc=function(){if(this._nextAvail<0){this._freePool.length=this._elementsPerBatch;for(var t=0;t<this._elementsPerBatch;t++)this._freePool[t]=this._ctor();this._nextAvail=this._elementsPerBatch-1}return this._freePool[this._nextAvail--]},n.free=function(t){this._freePool[++this._nextAvail]=t},n.freeArray=function(t){this._freePool.length=this._nextAvail+1,Array.prototype.push.apply(this._freePool,t),this._nextAvail+=t.length},n.tryShrink=function(){if(this._nextAvail>>1>this._elementsPerBatch){if(this._dtor)for(var t=this._nextAvail>>1;t<=this._nextAvail;t++)this._dtor(this._freePool[t]);this._freePool.length=this._nextAvail>>1,this._nextAvail=this._freePool.length-1}},n.destroy=function(){var e=arguments.length>0?arguments[0]:null;e&&D(14100);var n=e||this._dtor;if(n)for(var r=0;r<=this._nextAvail;r++)n(this._freePool[r]);this._freePool.length=0,this._nextAvail=-1,t.prototype.destroy.call(this)},e}(Nt)),Ot=(t("R",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._fn=void 0,i._dtor=null,i._count=0,i._data=void 0,i._initSize=0,i._fn=e,i._dtor=r||null,i._data=new Array(n),i._initSize=n;for(var a=0;a<n;++a)i._data[a]=e();return i}l(e,t);var n=e.prototype;return n.reset=function(){this._count=0},n.resize=function(t){if(t>this._data.length)for(var e=this._data.length;e<t;++e)this._data[e]=this._fn()},n.add=function(){return this._count>=this._data.length&&this.resize(this._data.length<<1),this._data[this._count++]},n.destroy=function(){if(this._dtor)for(var e=0;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=0,this._count=0,t.prototype.destroy.call(this)},n.tryShrink=function(){if(this._data.length>>2>this._count){var t=Math.max(this._initSize,this._data.length>>1);if(this._dtor)for(var e=t;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=t}},n.removeAt=function(t){if(!(t>=this._count)){var e=this._count-1,n=this._data[t];this._data[t]=this._data[e],this._data[e]=n,this._count-=1}},h(e,[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}]),e}(Nt)),t("C",function(t){function e(e,n){var r;return(r=t.call(this)||this).array=void 0,r.length=0,r._compareFn=void 0,r._initSize=0,r.array=new Array(e),r._initSize=e,r.length=0,r._compareFn=n,r}l(e,t);var n=e.prototype;return n.push=function(t){this.array[this.length++]=t},n.pop=function(){return this.array[--this.length]},n.get=function(t){return this.array[t]},n.clear=function(){this.length=0},n.destroy=function(){this.length=0,this.array.length=0,t.prototype.destroy.call(this)},n.tryShrink=function(){this.array.length>>2>this.length&&(this.array.length=Math.max(this._initSize,this.array.length>>1))},n.sort=function(){this.array.length=this.length,this.array.sort(this._compareFn)},n.concat=function(t){for(var e=0;e<t.length;++e)this.array[this.length++]=t[e]},n.fastRemove=function(t){if(!(t>=this.length||t<0)){var e=--this.length;this.array[t]=this.array[e]}},n.indexOf=function(t){for(var e=0,n=this.length;e<n;++e)if(this.array[e]===t)return e;return-1},e}(Nt)),t("c0",function(){function t(t){this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=t?t+".":""}return t.prototype.getNewId=function(){return this.prefix+(++this.id).toString()},t}()));Ot.global=new Ot("global");var St=new Ot("TmpCId."),Pt="undefined"==typeof Symbol?"__aliases__":Symbol("[[Aliases]]"),Ct="__cid__";function Rt(t){return"number"==typeof t||t instanceof Number}function Ut(t){return"string"==typeof t||t instanceof String}function Lt(t){for(var e in t)return!1;return!0}var kt,Ft=t("bV",(kt={value:void 0,enumerable:!1,writable:!1,configurable:!0},function(t,e,n,r,i){kt.value=n,kt.writable=r,kt.enumerable=i,Object.defineProperty(t,e,kt),kt.value=void 0})),Bt=t("cS",function(){var t={get:void 0,set:void 0,enumerable:!1};return function(e,n,r,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1),"boolean"==typeof i&&(console.log("Set `setter` to boolean is deprecated. Please don not use like this again."),a=i,i=void 0),t.get=r,t.set=i,t.enumerable=a,t.configurable=s,Object.defineProperty(e,n,t),t.get=void 0,t.set=void 0}}()),Dt=function(){var t={get:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.get=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.get=void 0}}(),Ht=function(){var t={set:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.set=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.set=void 0}}();function qt(t){var e=Object.create(null);return t&&(e["."]=1,e["/"]=1,delete e["."],delete e["/"]),e}function jt(t){if("function"==typeof t){var e=t.prototype;if(e&&e.hasOwnProperty("__classname__")&&e.__classname__)return e.__classname__;var n="";if(t.name&&(n=t.name),t.toString){var r,i=t.toString();(r="["===i.charAt(0)?/\[\w+\s*(\w+)\]/.exec(i):/function\s*(\w+)/.exec(i))&&2===r.length&&(n=r[1])}return"Object"!==n?n:""}return t&&t.constructor?jt(t.constructor):""}function Vt(t,e,n,r){var i=/([^.]+)$/,a=i.exec(e)[0],s=i.exec(n)[0];function o(){return this[s]}r?Bt(t,a,o,(function(t){this[s]=t})):Dt(t,a,o)}function Gt(t,e,n,r){for(var i in n)Vt(t,e+"."+i,n[i],r)}var Wt=/(%d)|(%s)/,Kt=/%s/;function Qt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(0===arguments.length)return"";if(0===n.length)return""+t;var i="string"==typeof t&&Wt.test(t);if(i)for(var a,s=_(n);!(a=s()).done;){var o=a.value,m="number"==typeof o?Wt:Kt;if(m.test(t)){var u=""+o;t=t.replace(m,u)}else t+=" "+o}else for(var h,c=_(n);!(h=c()).done;){var l=h.value;t+=" "+l}return t}function Yt(){for(var t=arguments.length-1,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n+1];return e}function Xt(t,e){for(;t;){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}return null}function Zt(t,e,n){var r=Xt(e,t);r&&Object.defineProperty(n,t,r)}function Jt(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){q(5402,s);continue}for(var o in s)o in t||Zt(o,s,t)}}return t}function $t(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){q(5403,s);continue}for(var o in s)Zt(o,s,t)}}return t}function te(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),t}function ee(t){var e=t.prototype,n=e&&Object.getPrototypeOf(e);return n&&n.constructor}function ne(t,e){if(t&&e){if("function"!=typeof t)return!1;if("function"!=typeof e)return!1;if(t===e)return!0;for(;;){if(!(t=ee(t)))return!1;if(t===e)return!0}}return!1}function re(t){for(var e=0,n=Object.keys(t);e<n.length;e++)delete t[n[e]]}function ie(t){return"string"!=typeof t||t.startsWith(St.prefix)}var ae=qt(!0),se=qt(!0);function oe(t,e,n){return function(r,i){if(i.prototype.hasOwnProperty(t)&&delete e[i.prototype[t]],Ft(i.prototype,t,r),r){var a=e[r];!n&&a&&a!==i?S("A Class already exists with the same "+t+' : "'+r+'".'):e[r]=i}}}var me=oe("__cid__",ae,!1),ue=oe("__classname__",se,!0);function he(t,e){if(ue(t,e),!e.prototype.hasOwnProperty(Ct)){var n=t||St.getNewId();n&&me(n,e)}}function ce(t,e){var n=se[e],r=ae[e],i=!0;if(n&&n!==t&&(S('"'+e+'" has already been set as name or alias of another class.'),i=!1),r&&r!==t&&(S('"'+e+'" has already been set as id or alias of another class.'),i=!1),i){var a=t[Pt];a||(a=[],t[Pt]=a),a.push(e),se[e]=t,ae[e]=t}}function le(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r],s=a.prototype,o=s.__cid__;o&&delete ae[o];var m=s.__classname__;m&&delete se[m];var u=s[Pt];if(u)for(var h=0;h<u.length;++h){var c=u[h];delete se[c],delete ae[c]}}}function fe(t){return ye(t)}function ye(t){return ae[t]}function de(t){return se[t]}function ve(t,e){return pe(t,e)}function pe(t,e){var n;if(e=void 0===e||e,"function"==typeof t&&t.prototype.hasOwnProperty(Ct))return n=t.prototype.__cid__,!e&&i&&ie(n)?"":n;if(t&&t.constructor){var r=t.constructor.prototype;if(r&&r.hasOwnProperty(Ct))return n=t.__cid__,!e&&i&&ie(n)?"":n}return""}var ge=t("bP",function(){var t=e.prototype;function e(t,e){this.count=void 0,this._pool=void 0,this._cleanup=void 0;var n=void 0===e?t:e,r=void 0===e?null:t;this.count=0,this._pool=new Array(n),this._cleanup=r}return t.get=function(){return this._get()},t._get=function(){if(this.count>0){--this.count;var t=this._pool[this.count];return this._pool[this.count]=null,t}return null},t.put=function(t){var e=this._pool;if(this.count<e.length){if(this._cleanup&&!1===this._cleanup(t))return;e[this.count]=t,++this.count}},t.resize=function(t){t>=0&&(this._pool.length=t,this.count>t&&(this.count=t))},e}()),_e={IDGenerator:Ot,Pool:ge,array:At,isNumber:Rt,isString:Ut,isEmptyObject:Lt,getPropertyDescriptor:Xt,addon:Jt,mixin:$t,extend:te,getSuper:ee,isChildClassOf:ne,clear:re,value:Ft,getset:Bt,get:Dt,set:Ht,unregisterClass:le,getClassName:jt,setClassName:he,setClassAlias:ce,getClassByName:de,getClassById:ye,get _registeredClassNames(){return c({},se)},set _registeredClassNames(t){re(se),Object.assign(se,t)},get _registeredClassIds(){return c({},ae)},set _registeredClassIds(t){re(ae),Object.assign(ae,t)},_getClassId:ve,getClassId:pe,_setClassId:me,_getClassById:fe,obsolete:Vt,obsoletes:Gt,formatStr:Qt,shiftArguments:Yt,createMap:qt};s.js=_e;var xe=Object.freeze({__proto__:null,array:At,js:_e,IDGenerator:Ot,Pool:ge,isNumber:Rt,isString:Ut,isEmptyObject:Lt,value:Ft,getset:Bt,get:Dt,set:Ht,createMap:qt,getClassName:jt,obsolete:Vt,obsoletes:Gt,formatStr:Qt,shiftArguments:Yt,getPropertyDescriptor:Xt,copyAllProperties:function(t,e,n){for(var r=Object.getOwnPropertyNames(t),i=0,a=r.length;i<a;++i){var s=r[i];-1===n.indexOf(s)&&Zt(s,t,e)}},addon:Jt,mixin:$t,extend:te,getSuper:ee,isChildClassOf:ne,clear:re,_idToClass:ae,_nameToClass:se,_setClassId:me,setClassName:he,setClassAlias:ce,unregisterClass:le,_getClassById:fe,getClassById:ye,getClassByName:de,_getClassId:ve,getClassId:pe});function be(t){if("__bitmask__"in t)return t;Ft(t,"__bitmask__",null,!0);for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Ft(t,s,i)}return t}function Me(t){return"__enums__"in t?t:(Ft(t,"__enums__",null,!0),Me.update(t))}function we(t){t.hasOwnProperty("__enums__")}function Ee(t){we(t);var e=t.__enums__||[];for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),t.__enums__=e,e}t("ad",xe),be.isBitMask=function(t){return t&&t.hasOwnProperty("__bitmask__")},be.getList=function(t){return t.__bitmask__?t.__bitmask__:be.update(t)},be.update=function(t){Array.isArray(t.__bitmask__)||(t.__bitmask__=[]);var e=t.__bitmask__;for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),e},s.BitMask=be,Me.update=function(t){for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Ft(t,s,i)}return Array.isArray(t.__enums__)&&Ee(t),t},Me||t("aa",Me={}),Me.isEnum=function(t){return t&&t.hasOwnProperty("__enums__")},Me.getList=function(t){return we(t),t.__enums__?t.__enums__:Ee(t)},Me.sortList=function(t,e){we(t),Array.isArray(t.__enums__)&&t.__enums__.sort(e)},s.Enum=Me;var Ae,Ne=t("ac",function(){function t(){}var e=t.prototype;return e.clone=function(){return q(100,jt(this)+".clone"),this},e.equals=function(){return!1},e.set=function(){q(100,jt(this)+".set")},e.toString=function(){return""},t}());he("cc.ValueType",Ne),s.ValueType=Ne,function(t){t.PATH="path",t.ENGINE="engine",t.ASSETS="assets",t.SCRIPTING="scripting",t.PHYSICS="physics",t.RENDERING="rendering",t.LAUNCH="launch",t.SCREEN="screen",t.SPLASH_SCREEN="splashScreen",t.ANIMATION="animation",t.PROFILING="profiling",t.PLUGINS="plugins",t.XR="xr"}(Ae||(Ae={}));var ze=t("a_",function(){function t(){this._settings={},this._override={}}var n=t.prototype;return n.init=function(t,n){var r=this;for(var i in void 0===t&&(t=""),void 0===n&&(n={}),n){var a=n[i];if(a)for(var s in a)this.overrideSettings(i,s,a[s])}return t?window.oh?new Promise((function(t,n){e.import("../settings.js").then((function(e){r._settings=e.default,t()})).catch((function(t){return n(t)}))})):new Promise((function(e,n){if(t.startsWith("http")){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="text",i.onload=function(){r._settings=JSON.parse(i.response),e()},i.onerror=function(){n(new Error("request settings failed!"))},i.send(null)}else{var a=fsUtils.readJsonSync(t);a instanceof Error?n(a):(r._settings=a,e())}})):Promise.resolve()},n.overrideSettings=function(t,e,n){t in this._override||(this._override[t]={}),this._override[t][e]=n},n.querySettings=function(t,e){if(t in this._override){var n=this._override[t];if(n&&e in n)return n[e]}if(t in this._settings){var r=this._settings[t];if(r&&e in r)return r[e]}return null},t}());ze.Category=Ae;var Ie=t("a$",new ze);s.settings=Ie;var Te=t("aN",{SUPPORT_TEXTURE_FORMATS:[".astc",".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],KEY:{none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,ENABLE_TILEDMAP_CULLING:!0,TOUCH_TIMEOUT:5e3,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!0,ENABLE_FLOAT_OUTPUT:!1,CLEANUP_IMAGE_CACHE:!1,ENABLE_MULTI_TOUCH:!0,MAX_LABEL_CANVAS_POOL_SIZE:20,ENABLE_WEBGL_HIGHP_STRUCT_VALUES:!1,BATCHER2D_MEM_INCREMENT:144,CUSTOM_PIPELINE_NAME:"",init:function(){this.CLEANUP_IMAGE_CACHE=!0;var t=Ie.querySettings(ze.Category.ENGINE,"macros");if(t)for(var e in t)Te[e]=t[e]}});s.macro=Te;for(var Oe=t("c4",/^(?:cc|dragonBones|sp|ccsg)\..+/),Se=new Array(123),Pe=0;Pe<123;++Pe)Se[Pe]=64;for(var Ce=0;Ce<64;++Ce)Se["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(Ce)]=Ce;var Re=t("cn",Se);function Ue(t,e,n){function r(t,e,n,r){var i=Object.getOwnPropertyDescriptor(t,e);if(i)i.get&&(t[n]=i.get),i.set&&r&&(t[r]=i.set);else{var a=t[n];Bt(t,e,a,t[r])}}for(var i,a=t.prototype,s=0;s<e.length;s++){var o=(i=e[s])[0].toUpperCase()+i.slice(1);r(a,i,"get"+o,"set"+o)}for(i in n){var m=n[i];r(a,i,m[0],m[1])}}function Le(t,e,n,r){var i=t[e];i?Array.isArray(i)?r?(i.push(i[0]),i[0]=n):i.push(n):t[e]=r?[n,i]:[i,n]:t[e]=n}function ke(t,e){if("function"==typeof t.contains)return t.contains(e);if("function"==typeof t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));var n=e.parentNode;if(n)do{if(n===t)return!0;n=n.parentNode}while(null!==n);return!1}function Fe(t){return"object"==typeof window&&"function"==typeof Node?t instanceof Node:!!t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function Be(t,e,n){t&&function(t,e){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var s=performance.now(),o=requestAnimationFrame||window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(void 0===o||null!==(n=globalThis.__globalXR)&&void 0!==n&&n.isWebXR)return setTimeout.apply(void 0,[t,e].concat(i));var m=function n(){performance.now()-s<e?o(n):t.apply(void 0,i)};o(m)}((function(){t(e,n)}),0)}function De(t){return!(!t||t.constructor!==Object)&&Lt(t)}function He(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t<n?t:n}function qe(t){return t*Te.RAD}function je(t){return t*Te.DEG}s.misc={BUILTIN_CLASSID_RE:Oe,BASE64_VALUES:Re,propertyDefine:Ue,pushToMap:Le,contains:ke,isDomNode:Fe,callInNextTick:Be,isPlainEmptyObj_DEV:De,clampf:He,degreesToRadians:qe,radiansToDegrees:je},t("ae",Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:Oe,BASE64_VALUES:Re,propertyDefine:Ue,pushToMap:Le,contains:ke,isDomNode:Fe,callInNextTick:Be,tryCatchFunctor_EDITOR:function(t){return Function("target","try {\n  target."+t+"();\n}\ncatch (e) {\n  cc._throw(e);\n}")},isPlainEmptyObj_DEV:De,clampf:He,degreesToRadians:qe,radiansToDegrees:je}));var Ve="$_$";function Ge(t,e){var n=e?Object.create(e):{};return Ft(t,"__attrs__",n),n}function We(t){if("function"!=typeof t)return Ge(t,Qe(t.constructor));for(var e,n=s.Class.getInheritanceChain(t),r=n.length-1;r>=0;r--){var i=n[r];i.hasOwnProperty("__attrs__")&&i.__attrs__||Ge(i,(e=n[r+1])&&e.__attrs__)}return Ge(t,(e=n[0])&&e.__attrs__),t.__attrs__}function Ke(t,e){var n=Qe(t),r=e+Ve,i={};for(var a in n)a.startsWith(r)&&(i[a.slice(r.length)]=n[a]);return i}function Qe(t){return t.hasOwnProperty("__attrs__")&&t.__attrs__||We(t)}function Ye(t,e,n,r){Qe(t)[e+Ve+n]=r}var Xe=function(){function t(t,e){this.name=void 0,this.default=void 0,this.name=t,this.default=e}return t.prototype.toString=function(){return this.name},t}(),Ze=t("at",new Xe("Integer",0));s.Integer=Ze,s.CCInteger=Ze;var Je=t("au",new Xe("Float",0));s.Float=Je,s.CCFloat=Je;var $e=t("av",new Xe("Boolean",!1));s.Boolean=$e,s.CCBoolean=$e;var tn=t("aw",new Xe("String",""));function en(t,e){return function(n,r){var i='"'+jt(n)+"."+r+'"',a=Ke(n,r),s=a.type;if(s===Ze||s===Je?s="Number":s!==tn&&s!==$e||(s=""+s),s===t){if(a.hasOwnProperty("default")){var o=a.default;if(void 0!==o&&!Array.isArray(o)&&!De(o)){var m=typeof o,u=t.toLowerCase();if(m===u)if("object"===u){if(!o||o instanceof a.ctor)return;D(3605,i,jt(a.ctor))}else"Number"!==t&&D(3606,e,i,t);else{if("function"===m)return;t===tn.default&&null==o?D(3607,i):D(3611,e,i,m)}delete a.type}}}else D(3604,i)}}s.String=tn,s.CCString=tn;var nn=Object.freeze({__proto__:null,DELIMETER:Ve,createAttrsSingle:Ge,createAttrs:We,attr:Ke,getClassAttrs:Qe,setClassAttr:Ye,PrimitiveType:Xe,CCInteger:Ze,CCFloat:Je,CCBoolean:$e,CCString:tn,getTypeChecker_ET:en,getObjTypeChecker_ET:function(t){return function(e,n){en("Object","type")(e,n);var r=Qe(e)[n+Ve+"default"],i=s.Class.getDefault(r);if(!Array.isArray(i)&&ne(t,s.ValueType)){var a=jt(t),o=Qt('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',jt(e),n,a);r?T(o):D(3612,o,a,jt(e),n,a)}}}}),rn={default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function an(t,e,n,r){if(!t.get&&!t.set&&t.hasOwnProperty("default")){var i="_N$"+e;t.get=function(){return this[i]},t.set=function(t){var e=this[i];this[i]=t,n.call(this,e)};var a={};for(var s in r[i]=a,rn){var o=rn[s];t.hasOwnProperty(s)&&(a[s]=t[s],o.canUsedInGet||delete t[s])}}}function sn(t,e,n,r){if(Array.isArray(e)){if(!(e.length>0))return q(5508,n,r);t.type=e=e[0]}"function"==typeof e&&(e===String?t.type=s.String:e===Boolean?t.type=s.Boolean:e===Number&&(t.type=s.Float))}function on(t,e,n){var r=t||void 0===e?{_short:!0}:{_short:!0,default:e};return n&&(r.type=n),r}function mn(t,e){if(!t||t.constructor!==Object){if(Array.isArray(t)&&t.length>0)return on(e,[],t);if("function"==typeof t){var n=t;return on(e,ne(n,s.ValueType)?new n:null,n)}return t instanceof Xe?on(e,void 0,t):on(e,t)}return null}var un,hn=[];function cn(){return hn[hn.length-1]}s._RF={push:function(t,e,n,r){void 0===n&&(n=e,e=""),hn.push({uuid:e,script:n,module:t,exports:t.exports,beh:null,importMeta:r})},pop:function(){var t=hn.pop(),e=t.module,n=e.exports;if(n===t.exports){for(var r in n)return;e.exports=n=t.cls}},peek:cn},function(t){t[t.STANDALONE=1]="STANDALONE",t[t.IMPLICIT_VISIBLE=2]="IMPLICIT_VISIBLE",t[t.IMPLICIT_SERIALIZABLE=4]="IMPLICIT_SERIALIZABLE"}(un||(un={}));var ln=Ve,fn="__ctors__",yn=t("bj","Enum"),dn=t("bk","BitMask");function vn(t,e,n,r){!function(t,e){!function(t,e){t.indexOf(e)<0&&t.push(e)}(t.__props__,e)}(t,n),Mn(t,r,e,n)}function pn(t,e,n,r){var i=r.get;r.set,i&&(Mn(t,r,e,n),Ye(t,n,"serializable",!1))}function gn(t){return"function"==typeof t?t():t}function _n(t){var e=t.name,n=t.extends,r=function(t,e,n){var r=s.Component,i=cn();if(i&&ne(e,r)){if(ne(i.cls,r))return q(3615),null;t=t||i.script}var a=function(t,e,n){var r=n.ctor;return Ft(r,fn,!0,!0),r.prototype,e&&(r.$super=e),he(t,r),r}(t,e,n);if(i)if(ne(e,r)){var o=i.uuid;o&&me(o,a),i.cls=a}else ne(i.cls,r)||(i.cls=a);return a}(e,n,t);e||(e=s.js.getClassName(r)),r._sealed=!0,n&&(n._sealed=!1),function(t,e,n,r){if(t.__props__=[],r&&r.__props__&&(t.__props__=r.__props__.slice()),n)for(var i in function(t,e){for(var n in t){var r=t[n],i=mn(r,!1);if(i&&(r=t[n]=i),r){var a=r.notify;a&&an(r,n,a,t),"type"in r&&sn(r,r.type,e,n)}}}(n,e),n){var a=n[i];a.get||a.set?pn(t,e,i,a):vn(t,e,i,a)}var s=Qe(t);t.__values__=t.__props__.filter((function(t){return!1!==s[t+ln+"serializable"]}))}(r,e,t.properties,n);var i=t.editor;return i&&ne(n,s.Component)&&s.Component._registerEditorProps(r,i),r}function xn(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,"__values__")}_n._isCCClass=function(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,fn)},_n.fastDefine=function(t,e,n){he(t,e);for(var r=e.__props__=e.__values__=Object.keys(n),i=Qe(e),a=0;a<r.length;a++){var s=r[a];i[s+ln+"visible"]=!1,i[s+ln+"default"]=n[s]}},_n.Attr=nn,_n.attr=Ke,_n.isCCClassOrFastDefined=xn,_n.getInheritanceChain=function(t){for(var e=[];t=ee(t);)t!==Object&&e.push(t);return e};var bn={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function Mn(t,e,n,r){var i=null,a="";function s(){return a=r+ln,i=Qe(t)}"type"in e&&void 0===e.type&&D(3660,r,n);var o=e.type;o&&(bn[o]?(i||s())[a+"type"]=o:"Object"===o||("object"==typeof o?Me.isEnum(o)?((i||s())[a+"type"]=yn,i[a+"enumList"]=Me.getList(o)):be.isBitMask(o)&&((i||s())[a+"type"]=dn,i[a+"bitmaskList"]=be.getList(o)):"function"==typeof o&&((i||s())[a+"type"]="Object",i[a+"ctor"]=o))),"default"in e&&((i||s())[a+"default"]=e.default);var m,u=function(t,n){if(t in e){var r=e[t];typeof r===n&&((i||s())[a+t]=r)}};e.editorOnly&&((i||s())[a+"editorOnly"]=!0),e.__internalFlags&un.STANDALONE?m=!0===e.serializable||0!=(e.__internalFlags&un.IMPLICIT_SERIALIZABLE):!1===e.serializable&&(m=!1),void 0!==m&&((i||s())[a+"serializable"]=m),u("formerlySerializedAs","string");var h=e.range;h&&Array.isArray(h)&&h.length>=2&&((i||s())[a+"min"]=h[0],i[a+"max"]=h[1],h.length>2&&(i[a+"step"]=h[2])),u("min","number"),u("max","number"),u("step","number")}_n.isArray=function(t){return t=gn(t),Array.isArray(t)},_n.getDefault=gn,_n.escapeForJS=function(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},_n.IDENTIFIER_RE=/^[A-Za-z_$][0-9A-Za-z_$]*$/,_n.getNewValueTypeCode=!1,s.Class=_n;var wn=t("ay","__editorExtras__"),En=[],An=t("as",function(){function t(t){void 0===t&&(t=""),this._objFlags=void 0,this._name=void 0,this._name=t,this._objFlags=0}t._deferredDestroy=function(){for(var t=En.length,e=0;e<t;++e){var n=En[e];1&n._objFlags||n._destroyImmediate()}t===En.length?En.length=0:En.splice(0,t)};var e=t.prototype;return e.destroy=function(){return 1&this._objFlags?(D(5e3),!1):!(4&this._objFlags||(this._objFlags|=4,En.push(this),0))},e._destruct=function(){var t=this.constructor,e=t.__destruct__;e||(e=function(t,e){var n,r=t instanceof s.Node||t instanceof s.Component,i=r?"_id":null,a={};for(n in t)if(t.hasOwnProperty(n)){if(n===i)continue;switch(typeof t[n]){case"string":a[n]="";break;case"object":case"function":a[n]=null}}if(_n._isCCClass(e))for(var o=s.Class.Attr.getClassAttrs(e),m=e.__props__,u=0;u<m.length;u++){var h=""+(n=m[u]);if(h in o){if(r&&"_id"===n)continue;switch(typeof o[h]){case"string":a[n]="";break;case"object":case"function":a[n]=null;break;case"undefined":a[n]=void 0}}}return function(t){for(var e in a)t[e]=a[e]}}(this,t),Ft(t,"__destruct__",e,!0)),e(this)},e._destroyImmediate=function(){var t;1&this._objFlags?q(5e3):(null===(t=this._onPreDestroy)||void 0===t||t.call(this),this._destruct(),this._objFlags|=1)},h(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"hideFlags",get:function(){return this._objFlags&t.Flags.AllHideMasks},set:function(e){var n=e&t.Flags.AllHideMasks;this._objFlags=this._objFlags&~t.Flags.AllHideMasks|n}},{key:"isValid",get:function(){return!(1&this._objFlags)}}]),t}());function Nn(t){return t instanceof An}function zn(t,e){return"object"==typeof t?!(!t||t._objFlags&(e?5:1)):void 0!==t}An.prototype._deserialize=null,_n.fastDefine("cc.Object",An,{_name:"",_objFlags:0}),Ft(An,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,AllHideMasks:1560,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),s.isValid=zn,s.Object=An;var In=xt;function Tn(){}var On=function(){function t(){this.callback=Tn,this.target=void 0,this.once=!1}var e=t.prototype;return e.set=function(t,e,n){this.callback=t||Tn,this.target=e,this.once=!!n},e.reset=function(){this.target=void 0,this.callback=Tn,this.once=!1},e.check=function(){return!(Nn(this.target)&&!zn(this.target,!0))},t}(),Sn=new Tt((function(){return new On}),32),Pn=function(){function t(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}var e=t.prototype;return e.removeByCallback=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.callback===t&&(n.reset(),Sn.free(n),In(this.callbackInfos,e),--e)}},e.removeByTarget=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.target===t&&(n.reset(),Sn.free(n),In(this.callbackInfos,e),--e)}},e.cancel=function(t){var e=this.callbackInfos[t];e&&(e.reset(),this.isInvoking?this.callbackInfos[t]=null:In(this.callbackInfos,t),Sn.free(e)),this.containCanceled=!0},e.cancelAll=function(){for(var t=0;t<this.callbackInfos.length;t++){var e=this.callbackInfos[t];e&&(e.reset(),Sn.free(e),this.callbackInfos[t]=null)}this.containCanceled=!0},e.purgeCanceled=function(){for(var t=this.callbackInfos.length-1;t>=0;--t)this.callbackInfos[t]||In(this.callbackInfos,t);this.containCanceled=!1},e.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1},t}(),Cn=new Tt((function(){return new Pn}),16),Rn=t("bo",function(){function t(){this._callbackTable=qt(!0),this._offCallback=void 0}var e=t.prototype;return e.on=function(t,e,n,r){if(!this.hasEventListener(t,e,n)){var i=this._callbackTable[t];i||(i=this._callbackTable[t]=Cn.alloc());var a=Sn.alloc();a.set(e,n,r),i.callbackInfos.push(a)}return e},e.hasEventListener=function(t,e,n){var r=this._callbackTable&&this._callbackTable[t];if(!r)return!1;var i=r.callbackInfos;if(!e){if(r.isInvoking){for(var a=0;a<i.length;++a)if(i[a])return!0;return!1}return i.length>0}for(var s=0;s<i.length;++s){var o=i[s];if(o&&o.check()&&o.callback===e&&o.target===n)return!0}return!1},e.removeAll=function(t){var e=typeof t;if("string"===e||"number"===e){var n=this._callbackTable&&this._callbackTable[t];n&&(n.isInvoking?n.cancelAll():(n.clear(),Cn.free(n),delete this._callbackTable[t]))}else if(t)for(var r in this._callbackTable){var i=this._callbackTable[r];if(i.isInvoking)for(var a=i.callbackInfos,s=0;s<a.length;++s){var o=a[s];o&&o.target===t&&i.cancel(s)}else i.removeByTarget(t)}},e.off=function(t,e,n){var r,i=this._callbackTable&&this._callbackTable[t];if(i){var a=i.callbackInfos;if(e)for(var s=0;s<a.length;++s){var o=a[s];if(o&&o.callback===e&&o.target===n){i.cancel(s);break}}else this.removeAll(t)}null===(r=this._offCallback)||void 0===r||r.call(this)},e.emit=function(t,e,n,r,i,a){var s=this._callbackTable&&this._callbackTable[t];if(s){var o=!s.isInvoking;s.isInvoking=!0;for(var m=s.callbackInfos,u=0,h=m.length;u<h;++u){var c=m[u];if(c){var l=c.callback,f=c.target;c.once&&this.off(t,l,f),c.check()?f?l.call(f,e,n,r,i,a):l(e,n,r,i,a):this.off(t,l,f)}}o&&(s.isInvoking=!1,s.containCanceled&&s.purgeCanceled())}},e.clear=function(){for(var t in this._callbackTable){var e=this._callbackTable[t];e&&(e.clear(),Cn.free(e),delete this._callbackTable[t])}},e._registerOffCallback=function(t){this._offCallback=t},t}());function Un(t){for(var e=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._callbackTable=qt(!0),e}l(e,t);var n=e.prototype;return n.once=function(t,e,n){return this.on(t,e,n,!0)},n.targetOff=function(t){this.removeAll(t)},e}(t),n=Rn.prototype,r=Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n)),i=0;i<r.length;++i){var a=r[i];if(!(a in e.prototype)){var s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e.prototype,a,s)}}return e}var Ln,kn,Fn,Bn,Dn,Hn,qn,jn=t("aD",Un((function(){})));s.EventTarget=jn,t("aF",function(){function t(){this._delegates=[]}var e=t.prototype;return e.add=function(t){this._delegates.includes(t)||this._delegates.push(t)},e.hasListener=function(t){return this._delegates.includes(t)},e.remove=function(t){Mt(this._delegates,t)},e.dispatch=function(){for(var t=arguments,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Promise.all(this._delegates.map((function(e){return e.apply(void 0,t)})).filter(Boolean))},t}()),t("cl",Ln),function(t){t.UNKNOWN="unknown",t.WECHAT="wechat",t.ANDROID="androidbrowser",t.IE="ie",t.EDGE="edge",t.QQ="qqbrowser",t.MOBILE_QQ="mqqbrowser",t.UC="ucbrowser",t.UCBS="ucbs",t.BROWSER_360="360browser",t.BAIDU_APP="baiduboxapp",t.BAIDU="baidubrowser",t.MAXTHON="maxthon",t.OPERA="opera",t.OUPENG="oupeng",t.MIUI="miuibrowser",t.FIREFOX="firefox",t.SAFARI="safari",t.CHROME="chrome",t.LIEBAO="liebao",t.QZONE="qzone",t.SOUGOU="sogou",t.HUAWEI="huawei"}(Ln||t("cl",Ln={})),function(t){t.UNKNOWN="unknown",t.ENGLISH="en",t.CHINESE="zh",t.FRENCH="fr",t.ITALIAN="it",t.GERMAN="de",t.SPANISH="es",t.DUTCH="du",t.RUSSIAN="ru",t.KOREAN="ko",t.JAPANESE="ja",t.HUNGARIAN="hu",t.PORTUGUESE="pt",t.ARABIC="ar",t.NORWEGIAN="no",t.POLISH="pl",t.TURKISH="tr",t.UKRAINIAN="uk",t.ROMANIAN="ro",t.BULGARIAN="bg",t.HINDI="hi"}(kn||(kn={})),function(t){t[t.NONE=0]="NONE",t[t.LAN=1]="LAN",t[t.WWAN=2]="WWAN"}(Fn||(Fn={})),t("bH",Bn),function(t){t.UNKNOWN="Unknown",t.IOS="iOS",t.ANDROID="Android",t.WINDOWS="Windows",t.LINUX="Linux",t.OSX="OS X",t.OHOS="OHOS",t.OPENHARMONY="OpenHarmony"}(Bn||t("bH",Bn={})),t("c8",Dn),function(t){t.UNKNOWN="UNKNOWN",t.EDITOR_PAGE="EDITOR_PAGE",t.EDITOR_CORE="EDITOR_CORE",t.MOBILE_BROWSER="MOBILE_BROWSER",t.DESKTOP_BROWSER="DESKTOP_BROWSER",t.WIN32="WIN32",t.ANDROID="ANDROID",t.IOS="IOS",t.MACOS="MACOS",t.OHOS="OHOS",t.OPENHARMONY="OPENHARMONY",t.WECHAT_GAME="WECHAT_GAME",t.WECHAT_MINI_PROGRAM="WECHAT_MINI_PROGRAM",t.BAIDU_MINI_GAME="BAIDU_MINI_GAME",t.XIAOMI_QUICK_GAME="XIAOMI_QUICK_GAME",t.ALIPAY_MINI_GAME="ALIPAY_MINI_GAME",t.TAOBAO_CREATIVE_APP="TAOBAO_CREATIVE_APP",t.TAOBAO_MINI_GAME="TAOBAO_MINI_GAME",t.BYTEDANCE_MINI_GAME="BYTEDANCE_MINI_GAME",t.OPPO_MINI_GAME="OPPO_MINI_GAME",t.VIVO_MINI_GAME="VIVO_MINI_GAME",t.HUAWEI_QUICK_GAME="HUAWEI_QUICK_GAME",t.COCOSPLAY="COCOSPLAY",t.LINKSURE_MINI_GAME="LINKSURE_MINI_GAME",t.QTT_MINI_GAME="QTT_MINI_GAME"}(Dn||t("c8",Dn={})),t("bK",Hn),function(t){t.WEBP="WEBP",t.IMAGE_BITMAP="IMAGE_BITMAP",t.WEB_VIEW="WEB_VIEW",t.VIDEO_PLAYER="VIDEO_PLAYER",t.SAFE_AREA="SAFE_AREA",t.HPE="HPE",t.INPUT_TOUCH="INPUT_TOUCH",t.EVENT_KEYBOARD="EVENT_KEYBOARD",t.EVENT_MOUSE="EVENT_MOUSE",t.EVENT_TOUCH="EVENT_TOUCH",t.EVENT_ACCELEROMETER="EVENT_ACCELEROMETER",t.EVENT_GAMEPAD="EVENT_GAMEPAD",t.EVENT_HANDLE="EVENT_HANDLE",t.EVENT_HMD="EVENT_HMD",t.EVENT_HANDHELD="EVENT_HANDHELD",t.WASM="WASM"}(Hn||t("bK",Hn={})),qn=Dn.WECHAT_GAME;var Vn=function(t){function e(){var e,n;(n=t.call(this)||this).networkType=void 0,n.isNative=void 0,n.isBrowser=void 0,n.isMobile=void 0,n.isLittleEndian=void 0,n.platform=void 0,n.language=void 0,n.nativeLanguage=void 0,n.os=void 0,n.osVersion=void 0,n.osMainVersion=void 0,n.browserType=void 0,n.browserVersion=void 0,n.isXR=void 0,n._featureMap=void 0,n._initPromise=void 0;var i,a=at.getSystemInfoSync();n.networkType=Fn.LAN,n.isNative=!1,n.isBrowser=!1,n.isLittleEndian=(i=new ArrayBuffer(2),new DataView(i).setInt16(0,256,!0),256===new Int16Array(i)[0]),n.nativeLanguage=a.language,n.language=a.language.substr(0,2);var s=a.platform.toLocaleLowerCase();n.os="android"===s?Bn.ANDROID:"ios"===s?Bn.IOS:"windows"===s?Bn.WINDOWS:Bn.UNKNOWN;var o=a.system.toLowerCase();"android p"===o&&(o="android p 9.0");var m=/[\d.]+/.exec(o);n.osVersion=m?m[0]:o,n.osMainVersion=parseInt(n.osVersion),n.platform=qn,n.isMobile=n.os!==Bn.WINDOWS,n.browserType=Ln.UNKNOWN,n.browserVersion="",n.isXR=!1;var u=n.os===Bn.WINDOWS&&!at.isDevTool;return n._featureMap=((e={})[Hn.WEBP]=!1,e[Hn.IMAGE_BITMAP]=!1,e[Hn.WEB_VIEW]=!1,e[Hn.VIDEO_PLAYER]=r,e[Hn.SAFE_AREA]=r,e[Hn.HPE]=!1,e[Hn.INPUT_TOUCH]=!u,e[Hn.EVENT_KEYBOARD]=u,e[Hn.EVENT_MOUSE]=u,e[Hn.EVENT_TOUCH]=!0,e[Hn.EVENT_ACCELEROMETER]=!u,e[Hn.EVENT_GAMEPAD]=!1,e[Hn.EVENT_HANDLE]=n.isXR,e[Hn.EVENT_HMD]=n.isXR,e[Hn.EVENT_HANDHELD]=!1,e[Hn.WASM]=r,e),n._initPromise=[],n._initPromise.push(n._supportsWebpPromise()),n._registerEvent(),n}l(e,t);var n=e.prototype;return n._supportsWebpPromise=function(){var t=this;return this._supportsWebp().then((function(e){t._setFeature(Hn.WEBP,e)}))},n._supportsWebp=function(){var t=this;return new Promise((function(e){if(t.os!==Bn.ANDROID)try{var n=document.createElement("img"),r=setTimeout((function(){e(!1)}),500);n.onload=function(){clearTimeout(r);var t=n.width>0&&n.height>0;e(t)},n.onerror=function(){clearTimeout(r),e(!1)},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}catch(t){e(!1)}else e(!1)}))},n._registerEvent=function(){var t=this;at.onHide((function(){t.emit("hide")})),at.onShow((function(){t.emit("show")}))},n._setFeature=function(t,e){return this._featureMap[t]=e},n.init=function(){return Promise.all(this._initPromise)},n.hasFeature=function(t){return this._featureMap[t]},n.getBatteryLevel=function(){return at.getBatteryInfoSync().level/100},n.triggerGC=function(){var t;null===(t=at.triggerGC)||void 0===t||t.call(at)},n.openURL=function(){},n.now=function(){return Date.now?Date.now():+new Date},n.restartJSVM=function(){},n.close=function(){var t;null===(t=at.exitMiniProgram)||void 0===t||t.call(at)},e}(jn),Gn=t("bG",new Vn),Wn=t("cM",2147483647);function Kn(t){return(t>0)-(t<0)}function Qn(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Yn(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function Xn(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}function Zn(t){return--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}var Jn=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(Jn);var $n=Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:Wn,INT_MIN:-2147483648,sign:Kn,abs:function(t){var e=t>>31;return(t^e)-e},min:function(t,e){return e^(t^e)&-(t<e)},max:function(t,e){return t^(t^e)&-(t<e)},isPow2:function(t){return!(t&t-1||!t)},log2:Qn,log10:function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},popCount:Yn,countTrailingZeros:Xn,nextPow2:Zn,prevPow2:function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},parity:function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1},reverse:function(t){return Jn[255&t]<<24|Jn[t>>>8&255]<<16|Jn[t>>>16&255]<<8|Jn[t>>>24&255]},interleave2:function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},deinterleave2:function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},interleave3:function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},deinterleave3:function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},nextCombination:function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Xn(t)+1}});t("n",$n);var tr,er,nr,rr,ir,ar=10;t("ag",tr),t("ah",er),t("ai",nr);var sr=0,or=new Map;rr=function(t,e,n,r,i,a,s){var o=or.get(a);o&&o.logTimes>o.count&&(i("'%s' is deprecated, please use '%s' instead. "+s,t+"."+e,n+"."+r),o.count++)},t("ag",tr=function(t,e,n){null!=t&&n.forEach((function(n){var r=sr++;or.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:ar});var i=null!=n.target?n.target:t,a=null!=n.newName?n.newName:n.name,s=null!=n.targetName?n.targetName:e,o=i===t,m=n.suggest?"("+n.suggest+")":"";if(null!=n.customFunction)t[n.name]=function(){var t;return rr(e,n.name,s,a,O,r,m),(t=n.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=n.customSetter||null!=n.customGetter){var u=null!=n.customSetter,h=null!=n.customGetter;u&&h?Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,O,r,m),n.customGetter.call(this)},set:function(t){rr(e,n.name,s,a,O,r,m),n.customSetter.call(this,t)},enumerable:!1}):u?Object.defineProperty(t,n.name,{set:function(t){rr(e,n.name,s,a,O,r,m),n.customSetter.call(this,t)},enumerable:!1}):h&&Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,O,r,m),n.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,O,r,m),o?this[a]:i[a]},set:function(t){rr(e,n.name,s,a,O,r,m),o?this[a]=t:i[a]=t},enumerable:!1})}))}),ir=function(t,e,n,r,i){var a=or.get(r);a&&a.logTimes>a.count&&(n("'%s' has been removed. "+i,t+"."+e),a.count++)},t("ah",er=function(t,e,n){null!=t&&n.forEach((function(n){var r=sr++;or.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:ar});var i=n.suggest?"("+n.suggest+")":"";Object.defineProperty(t,n.name,{get:function(){return ir(e,n.name,S,r,i)},set:function(){ir(e,n.name,S,r,i)},enumerable:!1})}))}),t("ai",nr=function(){});var mr,ur={};function hr(t){for(var e in t){var n=t[e];ur[e]=n}}function cr(t){var e=ur[t];if(e){var n=e.newName,r=e.since;e.removed?n?q(16003,t,r,n):q(16002,t,r):n?D(16001,t,r,n):D(16e3,t,r)}}var lr=Math.PI/180,fr=180/Math.PI,yr=t("H",.5*Math.PI),dr=t("T",2*Math.PI),vr=t("F",1e-6);function pr(t,e){return Math.abs(t-e)<=vr*Math.max(1,Math.abs(t),Math.abs(e))}function gr(t,e,n){return n=n||vr,Math.abs(t-e)<=n}function _r(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}function xr(t){return t<0?0:t>1?1:t}function br(t,e,n){return t+(e-t)*n}function Mr(t){return t*lr}function wr(t){return t*fr}var Er=t("U",Math.random);function Ar(t,e){return Math.random()*(e-t)+t}function Nr(t,e){return Math.floor(Ar(t,e))}function zr(t){return(t=(9301*t+49297)%233280)/233280}function Ir(t,e,n){return zr(t)*(n-e)+e}function Tr(t,e,n){return Math.floor(Ir(t,e,n))}function Or(t){return Zn(t)}function Sr(t,e){return t-Math.floor(t/e)*e}function Pr(t,e){return t=Sr(t,2*e),e-Math.abs(t-e)}function Cr(t,e,n){return(n-t)/(e-t)}function Rr(t){return Math.abs(t.x)>Math.abs(t.y)?Math.abs(t.x)>Math.abs(t.z)?t.x:t.z:Math.abs(t.y)>Math.abs(t.z)?t.y:t.z}function Ur(t,e){return Math.abs(t)>Math.abs(e)?t:e}function Lr(t,e){e.forEach((function(e){Object.defineProperty(t,e,{enumerable:!0})}))}var kr=t("q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=i||0),a}l(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.fromColor=function(t,e){return t.x=e.r,t.y=e.g,t.z=e.b,t.w=e.a,t},e.angle=function(t,e){var n=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x,a=t.x*e.x+t.y*e.y+t.z*e.z;return Math.atan2(Math.sqrt(n*n+r*r+i*i),a)},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t.w=e.w*n.w,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t.w=e.w/n.w,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t.w=Math.ceil(e.w),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t.w=Math.floor(e.w),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t.w=Math.min(e.w,n.w),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t.w=Math.max(e.w,n.w),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t.w=Math.round(e.w),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return Math.sqrt(n*n+r*r+i*i+a*a)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return n*n+r*r+i*i+a*a},e.len=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return Math.sqrt(e*e+n*n+r*r+i*i)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t.w=1/e.w,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w;return Math.abs(n)<vr?t.x=0:t.x=1/n,Math.abs(r)<vr?t.y=0:t.y=1/r,Math.abs(i)<vr?t.z=0:t.z=1/i,Math.abs(a)<vr?t.w=0:t.w=1/a,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n*n+r*r+i*i+a*a;return s>0?(s=1/Math.sqrt(s),t.x=n*s,t.y=r*s,t.z=i*s,t.w=a*s):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.scale=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.random=function(t,e){e=e||1;var n=2*Er()*Math.PI,r=2*Er()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t.w=0,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=n.m03*r+n.m07*i+n.m11*a+n.m15*s,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=e.w,t},e.transformQuat=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z,u=n.w,h=u*r+o*a-m*i,c=u*i+m*r-s*a,l=u*a+s*i-o*r,f=-s*r-o*i-m*a;return t.x=h*u+f*-s+c*-m-l*-o,t.y=c*u+f*-o+l*-s-h*-m,t.z=l*u+f*-m+h*-o-c*-s,t.w=e.w,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=vr),!(Math.abs(t.x)===1/0||Math.abs(t.y)===1/0||Math.abs(t.z)===1/0||Math.abs(t.w)===1/0||Math.abs(e.x)===1/0||Math.abs(e.y)===1/0||Math.abs(e.z)===1/0||Math.abs(e.w)===1/0)&&Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},n.equals=function(t,e){return void 0===e&&(e=vr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.equals4f=function(t,e,n,r,i){return void 0===i&&(i=vr),Math.abs(this.x-t)<=i*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=i*Math.max(1,Math.abs(this.y),Math.abs(e))&&Math.abs(this.z-n)<=i*Math.max(1,Math.abs(this.z),Math.abs(n))&&Math.abs(this.w-r)<=i*Math.max(1,Math.abs(this.w),Math.abs(r))},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.strictEquals4f=function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.z,a=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=a+e*(t.w-a),this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},n.clampf=function(t,e){return this.x=_r(this.x,t.x,e.x),this.y=_r(this.y,t.y,e.y),this.z=_r(this.z,t.z,e.z),this.w=_r(this.w,t.w,e.w),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},n.add4f=function(t,e,n,r){return this.x+=t,this.y+=e,this.z+=n,this.w+=r,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},n.subtract4f=function(t,e,n,r){return this.x-=t,this.y-=e,this.z-=n,this.w-=r,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},n.multiply4f=function(t,e,n,r){return this.x*=t,this.y*=e,this.z*=n,this.w*=r,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},n.divide4f=function(t,e,n,r){return this.x/=t,this.y/=e,this.z/=n,this.w/=r,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},n.lengthSqr=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},n.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=this.w;return this.x=t.m00*e+t.m04*n+t.m08*r+t.m12*i,this.y=t.m01*e+t.m05*n+t.m09*r+t.m13*i,this.z=t.m02*e+t.m06*n+t.m10*r+t.m14*i,this.w=t.m03*e+t.m07*n+t.m11*r+t.m15*i,this},e}(Ne));function Fr(t,e,n,r){return new kr(t,e,n,r)}kr.ZERO=Object.freeze(new kr(0,0,0,0)),kr.ONE=Object.freeze(new kr(1,1,1,1)),kr.NEG_ONE=Object.freeze(new kr(-1,-1,-1,-1)),kr.UNIT_X=Object.freeze(new kr(1,0,0,0)),kr.UNIT_Y=Object.freeze(new kr(0,1,0,0)),kr.UNIT_Z=Object.freeze(new kr(0,0,1,0)),kr.UNIT_W=Object.freeze(new kr(0,0,0,1)),_n.fastDefine("cc.Vec4",kr,{x:0,y:0,z:0,w:0}),s.Vec4=kr,s.v4=Fr;var Br,Dr,Hr,qr=t("o",function(t){function e(e,n,r){var i;return i=t.call(this)||this,"object"==typeof e?(i.x=e.x,i.y=e.y,i.z=e.z):(i.x=e||0,i.y=n||0,i.z=r||0),i}l(e,t),e.zero=function(t){return t.x=0,t.y=0,t.z=0,t},e.clone=function(t){return new e(t.x,t.y,t.z)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t},e.set=function(t,e,n,r){return t.x=e,t.y=n,t.z=r,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return Math.sqrt(n*n+r*r+i*i)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},e.len=function(t){var e=t.x,n=t.y,r=t.z;return Math.sqrt(e*e+n*n+r*r)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z;return e*e+n*n+r*r},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},e.invert=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t},e.invertSafe=function(t,e){var n=e.x,r=e.y,i=e.z;return Math.abs(n)<vr?t.x=0:t.x=1/n,Math.abs(r)<vr?t.y=0:t.y=1/r,Math.abs(i)<vr?t.z=0:t.z=1/i,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=n*n+r*r+i*i;return a>0?(a=1/Math.sqrt(a),t.x=n*a,t.y=r*a,t.z=i*a):(t.x=0,t.y=0,t.z=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},e.cross=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z;return t.x=i*m-a*o,t.y=a*s-r*m,t.z=r*o-i*s,t},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t},e.random=function(t,e){e=e||1;var n=2*Er()*Math.PI,r=2*Er()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a+n.m15;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a+n.m12)*s,t.y=(n.m01*r+n.m05*i+n.m09*a+n.m13)*s,t.z=(n.m02*r+n.m06*i+n.m10*a+n.m14)*s,t},e.transformMat4Normal=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a)*s,t.y=(n.m01*r+n.m05*i+n.m09*a)*s,t.z=(n.m02*r+n.m06*i+n.m10*a)*s,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=r*n.m00+i*n.m03+a*n.m06,t.y=r*n.m01+i*n.m04+a*n.m07,t.z=r*n.m02+i*n.m05+a*n.m08,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14,t},e.transformQuat=function(t,e,n){var r=n.w*e.x+n.y*e.z-n.z*e.y,i=n.w*e.y+n.z*e.x-n.x*e.z,a=n.w*e.z+n.x*e.y-n.y*e.x,s=-n.x*e.x-n.y*e.y-n.z*e.z;return t.x=r*n.w+s*-n.x+i*-n.z-a*-n.y,t.y=i*n.w+s*-n.y+a*-n.x-r*-n.z,t.z=a*n.w+s*-n.z+r*-n.y-i*-n.x,t},e.transformRTS=function(t,e,n,r,i){var a=e.x*i.x,s=e.y*i.y,o=e.z*i.z,m=n.w*a+n.y*o-n.z*s,u=n.w*s+n.z*a-n.x*o,h=n.w*o+n.x*s-n.y*a,c=-n.x*a-n.y*s-n.z*o;return t.x=m*n.w+c*-n.x+u*-n.z-h*-n.y+r.x,t.y=u*n.w+c*-n.y+h*-n.x-m*-n.z+r.y,t.z=h*n.w+c*-n.z+m*-n.y-u*-n.x+r.z,t},e.transformInverseRTS=function(t,e,n,r,i){var a=e.x-r.x,s=e.y-r.y,o=e.z-r.z,m=n.w*a-n.y*o+n.z*s,u=n.w*s-n.z*a+n.x*o,h=n.w*o-n.x*s+n.y*a,c=n.x*a+n.y*s+n.z*o;return t.x=(m*n.w+c*n.x+u*n.z-h*n.y)/i.x,t.y=(u*n.w+c*n.y+h*n.x-m*n.z)/i.y,t.z=(h*n.w+c*n.z+m*n.y-u*n.x)/i.z,t},e.rotateX=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i,h=a*o-s*m,c=a*m+s*o;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateY=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=s*m+i*o,h=a,c=s*o-i*m;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateZ=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i*o-a*m,h=i*m+a*o,c=s;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateN=function(t,e,n,r,i){var a=e.x-n.x,s=e.y-n.y,o=e.z-n.z,m=r.x,u=r.y,h=r.z,c=Math.cos(i),l=Math.sin(i),f=a*(m*m*(1-c)+c)+s*(m*u*(1-c)-m*l)+o*(m*h*(1-c)+u*l),y=a*(m*u*(1-c)+h*l)+s*(u*u*(1-c)+c)+o*(u*h*(1-c)-m*l),d=a*(m*h*(1-c)-u*l)+s*(u*h*(1-c)+m*l)+o*(h*h*(1-c)+c);return t.x=f+n.x,t.y=y+n.y,t.z=d+n.z,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},e.equals=function(t,e,n){void 0===n&&(n=vr);var r=t.x,i=t.y,a=t.z,s=e.x,o=e.y,m=e.z;return Math.abs(r-s)<=n*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=n*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-m)<=n*Math.max(1,Math.abs(a),Math.abs(m))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y+t.z*t.z,r=e.x*e.x+e.y*e.y+e.z*e.z;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y+t.z*e.z)/Math.sqrt(n*r);return i=_r(i,-1,1),Math.acos(i)},e.projectOnPlane=function(t,n,r){return e.subtract(t,n,e.project(t,n,r))},e.project=function(t,n,r){var i=e.lengthSqr(r);return i<1e-6?e.set(t,0,0,0):e.multiplyScalar(t,r,e.dot(n,r)/i)},e.moveTowards=function(t,e,n,r){var i=n.x-e.x,a=n.y-e.y,s=n.z-e.z,o=i*i+a*a+s*s;if(0===o||r>=0&&o<r*r)return t.x=n.x,t.y=n.y,t.z=n.z,t;var m=r/Math.sqrt(o);return t.x=e.x+i*m,t.y=e.y+a*m,t.z=e.z+s*m,t};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z)},n.set=function(t,e,n){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=n||0),this},n.equals=function(t,e){return void 0===e&&(e=vr),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e},n.equals3f=function(t,e,n,r){return void 0===r&&(r=vr),Math.abs(this.x-t)<=r&&Math.abs(this.y-e)<=r&&Math.abs(this.z-n)<=r},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},n.strictEquals3f=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},n.add3f=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},n.subtract3f=function(t,e,n){return this.x-=t,this.y-=e,this.z-=n,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this},n.multiply3f=function(t,e,n){return this.x*=t,this.y*=e,this.z*=n,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},n.divide3f=function(t,e,n){return this.x/=t,this.y/=e,this.z/=n,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},n.clampf=function(t,e){return this.x=_r(this.x,t.x,e.x),this.y=_r(this.y,t.y,e.y),this.z=_r(this.z,t.z,e.z),this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=t*t+e*e+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r),this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=t.m03*e+t.m07*n+t.m11*r+t.m15;return i=i?1/i:1,this.x=(t.m00*e+t.m04*n+t.m08*r+t.m12)*i,this.y=(t.m01*e+t.m05*n+t.m09*r+t.m13)*i,this.z=(t.m02*e+t.m06*n+t.m10*r+t.m14)*i,this},e}(Ne));function jr(t,e,n){return new qr(t,e,n)}qr.UNIT_X=Object.freeze(new qr(1,0,0)),qr.UNIT_Y=Object.freeze(new qr(0,1,0)),qr.UNIT_Z=Object.freeze(new qr(0,0,1)),qr.RIGHT=Object.freeze(new qr(1,0,0)),qr.UP=Object.freeze(new qr(0,1,0)),qr.FORWARD=Object.freeze(new qr(0,0,-1)),qr.ZERO=Object.freeze(new qr(0,0,0)),qr.ONE=Object.freeze(new qr(1,1,1)),qr.NEG_ONE=Object.freeze(new qr(-1,-1,-1)),qr.slerp=(Br=new qr,Dr=new qr,Hr=new qr,function(t,e,n,r){var i=1e-5,a=qr.len(e),s=qr.len(n);if(a<i||s<i)return qr.lerp(t,e,n,r);var o=br(a,s,r),m=qr.dot(e,n)/(a*s);if(m>.99999)return qr.lerp(t,e,n,r);if(m<-.99999){var u=qr.multiplyScalar(Br,e,1/a),h=function(t,e){var n=e.x,r=e.y,i=e.z,a=Math.abs(n),s=Math.abs(r),o=Math.abs(i);return a<s&&a<o?qr.set(t,0,i,-r):s<o?qr.set(t,i,0,-n):qr.set(t,r,-n,0),qr.normalize(t,t)}(Dr,u),c=Math.PI*r;return Gr(Hr,u,h,c),qr.multiplyScalar(t,Hr,o),t}var l=m,f=Math.acos(l)*r,y=qr.multiplyScalar(Br,e,1/a),d=qr.multiplyScalar(Dr,n,1/s);return qr.scaleAndAdd(Hr,d,y,-l),qr.normalize(Hr,Hr),qr.multiplyScalar(Hr,Hr,Math.sin(f)),qr.scaleAndAdd(Hr,Hr,y,Math.cos(f)),qr.multiplyScalar(t,Hr,o),t}),_n.fastDefine("cc.Vec3",qr,{x:0,y:0,z:0}),s.Vec3=qr;var Vr,Gr=(Vr={x:0,y:0,z:0,w:0},function(t,e,n,r){var i=.5*r,a=Math.sin(i);return Vr.x=a*n.x,Vr.y=a*n.y,Vr.z=a*n.z,Vr.w=Math.cos(i),qr.transformQuat(t,e,Vr),t});s.v3=jr;var Wr=1/255,Kr=t("B",function(t){function e(e,n,r,i){var a;return(a=t.call(this)||this)._val=0,"string"==typeof e?a.fromHEX(e):void 0!==n?a.set(e,n,r,i):a.set(e),a}l(e,t),e.clone=function(t){var n=new e;return t._val?n._val=t._val:n._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,n},e.copy=function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t},e.set=function(t,e,n,r,i){return t.r=e,t.g=n,t.b=r,t.a=i,t},e.toVec4=function(t,e){return(e=void 0!==e?e:new kr).x=t.r*Wr,e.y=t.g*Wr,e.z=t.b*Wr,e.w=t.a*Wr,e},e.fromVec4=function(t,n){return(n=void 0===n?new e:n).r=Math.floor(t.x/Wr),n.g=Math.floor(t.y/Wr),n.b=Math.floor(t.z/Wr),n.a=Math.floor(t.w/Wr),n},e.fromHEX=function(t,e){e=0===e.indexOf("#")?e.substring(1):e,t.r=parseInt(e.substr(0,2),16)||0,t.g=parseInt(e.substr(2,2),16)||0,t.b=parseInt(e.substr(4,2),16)||0;var n=parseInt(e.substr(6,2),16);return t.a=Number.isNaN(n)?255:n,t._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,t},e.add=function(t,e,n){return t.r=e.r+n.r,t.g=e.g+n.g,t.b=e.b+n.b,t.a=e.a+n.a,t},e.subtract=function(t,e,n){return t.r=e.r-n.r,t.g=e.g-n.g,t.b=e.b-n.b,t.a=e.a-n.a,t},e.multiply=function(t,e,n){return t.r=e.r*n.r,t.g=e.g*n.g,t.b=e.b*n.b,t.a=e.a*n.a,t},e.divide=function(t,e,n){return t.r=e.r/n.r,t.g=e.g/n.g,t.b=e.b/n.b,t.a=e.a/n.a,t},e.scale=function(t,e,n){return t.r=e.r*n,t.g=e.g*n,t.b=e.b*n,t.a=e.a*n,t},e.lerp=function(t,e,n,r){var i=e.r,a=e.g,s=e.b,o=e.a;return i+=(n.r-i)*r,a+=(n.g-a)*r,s+=(n.b-s)*r,o+=(n.a-o)*r,t._val=Math.floor((o<<24>>>0)+(s<<16)+(a<<8)+i),t},e.toArray=function(t,n,r){void 0===r&&(r=0);var i=n instanceof e||n.a>1?1/255:1;return t[r+0]=n.r*i,t[r+1]=n.g*i,t[r+2]=n.b*i,t[r+3]=n.a*i,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),e.r=255*t[n+0],e.g=255*t[n+1],e.b=255*t[n+2],e.a=255*t[n+3],e},e.fromUint32=function(t,e){return t._val=e,t},e.toUint32=function(t){return t._val},e.strictEquals=function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a},e.equals=function(t,e,n){return void 0===n&&(n=vr),!(Math.abs(t.r)===1/0||Math.abs(t.g)===1/0||Math.abs(t.b)===1/0||Math.abs(t.a)===1/0)&&Math.abs(t.r-e.r)<=n*Math.max(1,Math.abs(t.r),Math.abs(e.r))&&Math.abs(t.g-e.g)<=n*Math.max(1,Math.abs(t.g),Math.abs(e.g))&&Math.abs(t.b-e.b)<=n*Math.max(1,Math.abs(t.b),Math.abs(e.b))&&Math.abs(t.a-e.a)<=n*Math.max(1,Math.abs(t.a),Math.abs(e.a))},e.hex=function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0};var n=e.prototype;return n.clone=function(){var t=new e;return t._val=this._val,t},n.equals=function(t){return t&&this._val===t._val},n.lerp=function(t,e){var n=this.r,r=this.g,i=this.b,a=this.a;return n+=(t.r-n)*e,r+=(t.g-r)*e,i+=(t.b-i)*e,a+=(t.a-a)*e,this._val=Math.floor((a<<24>>>0)+(i<<16)+(r<<8)+n),this},n.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},n.toCSS=function(t){return void 0===t&&(t="rgba"),"rgba"===t?"rgba("+this.r+","+this.g+","+this.b+","+(this.a*Wr).toFixed(2)+")":"rgb"===t?"rgb("+this.r+","+this.g+","+this.b+")":"#"+this.toHEX(t)},n.fromHEX=function(t){t=0===t.indexOf("#")?t.substring(1):t;var e=parseInt(t.substr(0,2),16)||0,n=parseInt(t.substr(2,2),16)||0,r=parseInt(t.substr(4,2),16)||0,i=parseInt(t.substr(6,2),16);return i=Number.isNaN(i)?255:i,this._val=(i<<24>>>0)+(r<<16)+(n<<8)+(0|e),this},n.toHEX=function(t){void 0===t&&(t="#rrggbb");var e="0",n=[(this.r<16?e:"")+this.r.toString(16),(this.g<16?e:"")+this.g.toString(16),(this.b<16?e:"")+this.b.toString(16)];return"#rgb"===t?(n[0]=n[0][0],n[1]=n[1][0],n[2]=n[2][0]):"#rrggbbaa"===t&&n.push((this.a<16?e:"")+this.a.toString(16)),n.join("")},n.toRGBValue=function(){return 16777215&this._val},n.fromHSV=function(t,e,n){var r=0,i=0,a=0;if(0===e)r=i=a=n;else if(0===n)r=i=a=0;else{1===t&&(t=0),t*=6;var s=Math.floor(t),o=t-s,m=n*(1-e),u=n*(1-e*o),h=n*(1-e*(1-o));switch(s){default:case 0:r=n,i=h,a=m;break;case 1:r=u,i=n,a=m;break;case 2:r=m,i=n,a=h;break;case 3:r=m,i=u,a=n;break;case 4:r=h,i=m,a=n;break;case 5:r=n,i=m,a=u}}return r*=255,i*=255,a*=255,this._val=(this.a<<24>>>0)+(a<<16)+(i<<8)+(0|r),this},n.toHSV=function(){var t=this.r*Wr,e=this.g*Wr,n=this.b*Wr,r={h:0,s:0,v:0},i=Math.max(t,e,n),a=Math.min(t,e,n),s=0;return r.v=i,r.s=i?(i-a)/i:0,r.s?(s=i-a,r.h=t===i?(e-n)/s:e===i?2+(n-t)/s:4+(t-e)/s,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},n.set=function(t,e,n,r){return"object"==typeof t?null!=t._val?this._val=t._val:(e=t.g||0,n=t.b||0,r="number"==typeof t.a?t.a:255,t=t.r||0,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)):(t=t||0,e=e||0,n=n||0,r="number"==typeof r?r:255,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)),this},n.multiply=function(t){var e=(255&this._val)*t.r>>8,n=(65280&this._val)*t.g>>8,r=(16711680&this._val)*t.b>>8,i=((4278190080&this._val)>>>8)*t.a;return this._val=4278190080&i|16711680&r|65280&n|255&e,this},n._set_r_unsafe=function(t){return this._val=(4294967040&this._val|t)>>>0,this},n._set_g_unsafe=function(t){return this._val=(4294902015&this._val|t<<8)>>>0,this},n._set_b_unsafe=function(t){return this._val=(4278255615&this._val|t<<16)>>>0,this},n._set_a_unsafe=function(t){return this._val=(16777215&this._val|t<<24)>>>0,this},h(e,[{key:"r",get:function(){return 255&this._val},set:function(t){t=~~_r(t,0,255),this._val=(4294967040&this._val|t)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(t){t=~~_r(t,0,255),this._val=(4294902015&this._val|t<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(t){t=~~_r(t,0,255),this._val=(4278255615&this._val|t<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(t){t=~~_r(t,0,255),this._val=(16777215&this._val|t<<24)>>>0}},{key:"x",get:function(){return this.r*Wr},set:function(t){this.r=255*t}},{key:"y",get:function(){return this.g*Wr},set:function(t){this.g=255*t}},{key:"z",get:function(){return this.b*Wr},set:function(t){this.b=255*t}},{key:"w",get:function(){return this.a*Wr},set:function(t){this.a=255*t}}]),e}(Ne));function Qr(t,e,n,r){return new Kr(t,e,n,r)}function Yr(t){var e=t.clone();return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}Kr.WHITE=Object.freeze(new Kr(255,255,255,255)),Kr.GRAY=Object.freeze(new Kr(127,127,127,255)),Kr.BLACK=Object.freeze(new Kr(0,0,0,255)),Kr.TRANSPARENT=Object.freeze(new Kr(0,0,0,0)),Kr.RED=Object.freeze(new Kr(255,0,0,255)),Kr.GREEN=Object.freeze(new Kr(0,255,0,255)),Kr.BLUE=Object.freeze(new Kr(0,0,255,255)),Kr.CYAN=Object.freeze(new Kr(0,255,255,255)),Kr.MAGENTA=Object.freeze(new Kr(255,0,255,255)),Kr.YELLOW=Object.freeze(new Kr(255,255,0,255)),_n.fastDefine("cc.Color",Kr,{r:0,g:0,b:0,a:255}),s.Color=Kr,s.color=Qr;var Xr=t("M",function(t){function e(e,n,r,i,a,s,o,m,u){var h;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),h=t.call(this)||this,"object"==typeof e?(h.m00=e.m00,h.m01=e.m01,h.m02=e.m02,h.m03=e.m03,h.m04=e.m04,h.m05=e.m05,h.m06=e.m06,h.m07=e.m07,h.m08=e.m08):(h.m00=e,h.m01=n,h.m02=r,h.m03=i,h.m04=a,h.m05=s,h.m06=o,h.m07=m,h.m08=u),h}l(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.set=function(t,e,n,r,i,a,s,o,m,u){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m05;t.m01=e.m03,t.m02=e.m06,t.m03=n,t.m05=e.m07,t.m06=r,t.m07=i}else t.m00=e.m00,t.m01=e.m03,t.m02=e.m06,t.m03=e.m01,t.m04=e.m04,t.m05=e.m07,t.m06=e.m02,t.m07=e.m05,t.m08=e.m08;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=h*s-o*u,l=-h*a+o*m,f=u*a-s*m,y=n*c+r*l+i*f;return 0===y?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t):(y=1/y,t.m00=c*y,t.m01=(-h*r+i*u)*y,t.m02=(o*r-i*s)*y,t.m03=l*y,t.m04=(h*n-i*m)*y,t.m05=(-o*n+i*a)*y,t.m06=f*y,t.m07=(-u*n+r*m)*y,t.m08=(s*n-r*a)*y,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08;return e*(u*a-s*m)+n*(-u*i+s*o)+r*(m*i-a*o)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m03,v=n.m04,p=n.m05,g=n.m06,_=n.m07,x=n.m08;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=d*r+v*s+p*u,t.m04=d*i+v*o+p*h,t.m05=d*a+v*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.multiplyMat4=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m04,v=n.m05,p=n.m06,g=n.m08,_=n.m09,x=n.m10;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=d*r+v*s+p*u,t.m04=d*i+v*o+p*h,t.m05=d*a+v*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.transform=function(t,e,n){this.translate(t,e,n)},e.translate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.x,f=n.y;return t.m00=r,t.m01=i,t.m02=a,t.m03=s,t.m04=o,t.m05=m,t.m06=l*r+f*s+u,t.m07=l*i+f*o+h,t.m08=l*a+f*m+c,t},e.scale=function(t,e,n){var r=n.x,i=n.y;return t.m00=r*e.m00,t.m01=r*e.m01,t.m02=r*e.m02,t.m03=i*e.m03,t.m04=i*e.m04,t.m05=i*e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.rotate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=Math.sin(n),f=Math.cos(n);return t.m00=f*r+l*s,t.m01=f*i+l*o,t.m02=f*a+l*m,t.m03=f*s-l*r,t.m04=f*o-l*i,t.m05=f*m-l*a,t.m06=u,t.m07=h,t.m08=c,t},e.fromMat4=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m04,t.m04=e.m05,t.m05=e.m06,t.m06=e.m08,t.m07=e.m09,t.m08=e.m10,t},e.fromViewUp=function(t,n,r){return qr.lengthSqr(n)<vr*vr?(e.identity(t),t):(r=r||qr.UNIT_Y,qr.normalize(Zr,qr.cross(Zr,r,n)),qr.lengthSqr(Zr)<vr*vr?(e.identity(t),t):(qr.cross(Jr,n,Zr),e.set(t,Zr.x,Zr.y,Zr.z,Jr.x,Jr.y,Jr.z,n.x,n.y,n.z),t))},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=e.x,t.m07=e.y,t.m08=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=e.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=-n,t.m04=r,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,d=a*s,v=a*o,p=a*m;return t.m00=1-c-y,t.m03=h-p,t.m06=l+v,t.m01=h+p,t.m04=1-u-y,t.m07=f-d,t.m02=l-v,t.m05=f+d,t.m08=1-u-c,t},e.inverseTransposeMat4=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,z=c*v-l*d,I=c*p-f*d,T=l*p-f*v,O=g*T-_*I+x*z+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*I-o*N+u*E)*O,t.m03=(i*I-r*T-a*z)*O,t.m04=(n*T-i*N+a*A)*O,t.m05=(r*N-n*I-a*E)*O,t.m06=(d*w-v*M+p*b)*O,t.m07=(v*x-y*w-p*_)*O,t.m08=(y*M-d*x+p*g)*O,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=n.m00*r+e.m00,t.m01=n.m01*r+e.m01,t.m02=n.m02*r+e.m02,t.m03=n.m03*r+e.m03,t.m04=n.m04*r+e.m04,t.m05=n.m05*r+e.m05,t.m06=n.m06*r+e.m06,t.m07=n.m07*r+e.m07,t.m08=n.m08*r+e.m08,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08},e.equals=function(t,e,n){return void 0===n&&(n=vr),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))},e.toEuler=function(t,e){var n=t.m00,r=t.m01;t.m02;var i=t.m03,a=t.m04;t.m05;var s=t.m06,o=t.m07,m=t.m08;return o<.999?o>-.999?(e.x=Math.asin(-o),e.y=Math.atan2(s,m),e.z=Math.atan2(r,a),!0):(e.x=yr,e.y=Math.atan2(i,n),e.z=0,!1):(e.x=-yr,e.y=Math.atan2(-i,n),e.z=0,!1)};var n=e.prototype;return n.clone=function(){var t=this;return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},n.set=function(t,e,n,r,i,a,s,o,m){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=1),"object"==typeof t?(this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08):(this.m00=t,this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m),this},n.equals=function(t,e){return void 0===e&&(e=vr),Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08},n.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+",\n"+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+",\n"+t.m08+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=t,this.m05=this.m07,this.m06=e,this.m07=n,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=m*i-a*o,h=-m*r+a*s,c=o*r-i*s,l=t*u+e*h+n*c;return 0===l?(this.set(0,0,0,0,0,0,0,0,0),this):(l=1/l,this.m00=u*l,this.m01=(-m*e+n*o)*l,this.m02=(a*e-n*i)*l,this.m03=h*l,this.m04=(m*t-n*s)*l,this.m05=(-a*t+n*r)*l,this.m06=c*l,this.m07=(-o*t+e*s)*l,this.m08=(i*t-e*r)*l,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08;return t*(m*i-a*o)+e*(-m*r+a*s)+n*(o*r-i*s)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=t.m00,c=t.m01,l=t.m02,f=t.m03,y=t.m04,d=t.m05,v=t.m06,p=t.m07,g=t.m08;return this.m00=h*e+c*i+l*o,this.m01=h*n+c*a+l*m,this.m02=h*r+c*s+l*u,this.m03=f*e+y*i+d*o,this.m04=f*n+y*a+d*m,this.m05=f*r+y*s+d*u,this.m06=v*e+p*i+g*o,this.m07=v*n+p*a+g*m,this.m08=v*r+p*s+g*u,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this},n.scale=function(t){var e=t.x,n=t.y;return this.m00=e*this.m00,this.m01=e*this.m01,this.m02=e*this.m02,this.m03=n*this.m03,this.m04=n*this.m04,this.m05=n*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this},n.rotate=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=Math.sin(t),c=Math.cos(t);return this.m00=c*e+h*i,this.m01=c*n+h*a,this.m02=c*r+h*s,this.m03=c*i-h*e,this.m04=c*a-h*n,this.m05=c*s-h*r,this.m06=o,this.m07=m,this.m08=u,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,d=i*s,v=i*o;return this.m00=1-h-f,this.m03=u-v,this.m06=c+d,this.m01=u+v,this.m04=1-m-f,this.m07=l-y,this.m02=c-d,this.m05=l+y,this.m08=1-m-h,this},e}(Ne));Xr.IDENTITY=Object.freeze(new Xr);var Zr=new qr,Jr=new qr;_n.fastDefine("cc.Mat3",Xr,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),s.Mat3=Xr;var $r=t("Q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=null!=i?i:1),a}l(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.identity=function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t},e.rotationTo=function(t,n,r){var i=qr.dot(n,r);return i<-.999999?(qr.cross(ni,qr.UNIT_X,n),ni.length()<1e-6&&qr.cross(ni,qr.UNIT_Y,n),qr.normalize(ni,ni),e.fromAxisAngle(t,ni,Math.PI),t):i>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(qr.cross(ni,n,r),t.x=ni.x,t.y=ni.y,t.z=ni.z,t.w=1+i,e.normalize(t,t))},e.getAxisAngle=function(t,e){var n=2*Math.acos(e.w),r=Math.sin(n/2);return 0!==r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):(t.x=1,t.y=0,t.z=0),n},e.multiply=function(t,e,n){var r=e.x*n.w+e.w*n.x+e.y*n.z-e.z*n.y,i=e.y*n.w+e.w*n.y+e.z*n.x-e.x*n.z,a=e.z*n.w+e.w*n.z+e.x*n.y-e.y*n.x,s=e.w*n.w-e.x*n.x-e.y*n.y-e.z*n.z;return t.x=r,t.y=i,t.z=a,t.w=s,t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.rotateX=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+m*r,t.y=s*i+o*r,t.z=o*i-s*r,t.w=m*i-a*r,t},e.rotateY=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i-o*r,t.y=s*i+m*r,t.z=o*i+a*r,t.w=m*i-s*r,t},e.rotateZ=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+s*r,t.y=s*i-a*r,t.z=o*i+m*r,t.w=m*i-o*r,t},e.rotateAround=function(t,n,r,i){return e.invert(ti,n),qr.transformQuat(ni,r,ti),e.fromAxisAngle(ti,ni,i),e.multiply(t,n,ti),t},e.rotateAroundLocal=function(t,n,r,i){return e.fromAxisAngle(ti,r,i),e.multiply(t,n,ti),t},e.calculateW=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=Math.sqrt(Math.abs(1-e.x*e.x-e.y*e.y-e.z*e.z)),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.slerp=function(t,e,n,r){var i=0,a=0,s=n.x,o=n.y,m=n.z,u=n.w,h=e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w;if(h<0&&(h=-h,s=-s,o=-o,m=-m,u=-u),1-h>1e-6){var c=Math.acos(h),l=Math.sin(c);i=Math.sin((1-r)*c)/l,a=Math.sin(r*c)/l}else i=1-r,a=r;return t.x=i*e.x+a*s,t.y=i*e.y+a*o,t.z=i*e.z+a*m,t.w=i*e.w+a*u,t},e.sqlerp=function(t,n,r,i,a,s){return e.slerp(ti,n,a,s),e.slerp(ei,r,i,s),e.slerp(t,ti,ei,2*s*(1-s)),t},e.invert=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,r=n?1/n:0;return t.x=-e.x*r,t.y=-e.y*r,t.z=-e.z*r,t.w=e.w*r,t},e.conjugate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},e.lengthSqr=function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},e.normalize=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w;return n>0?(n=1/Math.sqrt(n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.fromAxes=function(t,n,r,i){return Xr.set(ri,n.x,n.y,n.z,r.x,r.y,r.z,i.x,i.y,i.z),e.normalize(t,e.fromMat3(t,ri))},e.fromViewUp=function(t,n,r){return Xr.fromViewUp(ri,n,r),e.normalize(t,e.fromMat3(t,ri))},e.fromAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t.x=r*e.x,t.y=r*e.y,t.z=r*e.z,t.w=Math.cos(n),t},e.fromMat3=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=n-s-h,l=s-n-h,f=h-n-s,y=0,d=n+s+h;c>d&&(d=c,y=1),l>d&&(d=l,y=2),f>d&&(d=f,y=3);var v=.5*Math.sqrt(d+1),p=.25/v;switch(y){case 0:t.w=v,t.x=(o-u)*p,t.y=(m-i)*p,t.z=(r-a)*p;break;case 1:t.w=(o-u)*p,t.x=v,t.y=(r+a)*p,t.z=(m+i)*p;break;case 2:t.w=(m-i)*p,t.x=(r+a)*p,t.y=v,t.z=(o+u)*p;break;case 3:t.w=(r-a)*p,t.x=(m+i)*p,t.y=(o+u)*p,t.z=v;break;default:t.w=1,t.x=0,t.y=0,t.z=0}return t},e.fromEuler=function(t,e,n,r){e*=ii,n*=ii,r*=ii;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),o=Math.cos(n),m=Math.sin(r),u=Math.cos(r);return t.x=i*o*u+a*s*m,t.y=a*s*u+i*o*m,t.z=a*o*m-i*s*u,t.w=a*o*u-i*s*m,t},e.fromAngleZ=function(t,e){return e*=ii,t.x=t.y=0,t.z=Math.sin(e),t.w=Math.cos(e),t},e.toAxisX=function(t,e){var n=2*e.y,r=2*e.z;return t.x=1-n*e.y-r*e.z,t.y=n*e.x+r*e.w,t.z=r*e.x-n*e.w,t},e.toAxisY=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=r*e.x-i*e.w,t.y=1-n*e.x-i*e.z,t.z=i*e.y+n*e.w,t},e.toAxisZ=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=i*e.x+r*e.w,t.y=i*e.y-n*e.w,t.z=1-n*e.x-r*e.y,t},e.toEuler=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=0,m=0,u=0,h=r*i+a*s;if(h>.499999)o=0,m=wr(2*Math.atan2(r,s)),u=90;else if(h<-.499999)o=0,m=-wr(2*Math.atan2(r,s)),u=-90;else{var c=r*r,l=i*i,f=a*a;o=wr(Math.atan2(2*r*s-2*i*a,1-2*c-2*f)),m=wr(Math.atan2(2*i*s-2*r*a,1-2*l-2*f)),u=wr(Math.asin(2*h)),n&&(o=-180*Math.sign(o+1e-6)+o,m=-180*Math.sign(m+1e-6)+m,u=180*Math.sign(u+1e-6)-u)}return t.x=o,t.y=m,t.z=u,t},e.toEulerInYXZOrder=function(t,e){Xr.fromQuat(ri,e),Xr.toEuler(ri,t),t.x=wr(t.x),t.y=wr(t.y),t.z=wr(t.z)},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=vr),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))},e.angle=function(t,n){var r=Math.min(Math.abs(e.dot(t,n)),1);return 2*Math.acos(r)},e.rotateTowards=function(t,n,r,i){var a=e.angle(n,r);if(0===a)return t.x=r.x,t.y=r.y,t.z=r.z,t.w=r.w,t;var s=Math.min(i/wr(a),1);return e.slerp(t,n,r,s)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=null!=r?r:1),this},n.equals=function(t,e){return void 0===e&&(e=vr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.getEulerAngles=function(t){return e.toEuler(t,this)},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this.w+=e*(t.w-this.w),this},n.slerp=function(t,n){return e.slerp(this,this,t,n)},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e}(Ne));$r.IDENTITY=Object.freeze(new $r);var ti=new $r,ei=new $r,ni=new qr,ri=new Xr,ii=.5*Math.PI/180;function ai(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),new $r(t,e,n,r)}_n.fastDefine("cc.Quat",$r,{x:0,y:0,z:0,w:1}),s.Quat=$r,s.quat=ai;var si=t("E",Object.freeze([Object.freeze([1,0,0,1]),Object.freeze([0,1,-1,0]),Object.freeze([-1,0,0,-1]),Object.freeze([0,-1,1,0])])),oi=t("t",function(t){function e(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d,v){var p;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===d&&(d=0),void 0===v&&(v=1),p=t.call(this)||this,"object"==typeof e?(p.m00=e.m00,p.m01=e.m01,p.m02=e.m02,p.m03=e.m03,p.m04=e.m04,p.m05=e.m05,p.m06=e.m06,p.m07=e.m07,p.m08=e.m08,p.m09=e.m09,p.m10=e.m10,p.m11=e.m11,p.m12=e.m12,p.m13=e.m13,p.m14=e.m14,p.m15=e.m15):(p.m00=e,p.m01=n,p.m02=r,p.m03=i,p.m04=a,p.m05=s,p.m06=o,p.m07=m,p.m08=u,p.m09=h,p.m10=c,p.m11=l,p.m12=f,p.m13=y,p.m14=d,p.m15=v),p}l(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d,v){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t.m09=h,t.m10=c,t.m11=l,t.m12=f,t.m13=y,t.m14=d,t.m15=v,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m03,a=e.m06,s=e.m07,o=e.m11;t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=n,t.m06=e.m09,t.m07=e.m13,t.m08=r,t.m09=a,t.m11=e.m14,t.m12=i,t.m13=s,t.m14=o}else t.m00=e.m00,t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=e.m01,t.m05=e.m05,t.m06=e.m09,t.m07=e.m13,t.m08=e.m02,t.m09=e.m06,t.m10=e.m10,t.m11=e.m14,t.m12=e.m03,t.m13=e.m07,t.m14=e.m11,t.m15=e.m15;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,z=c*v-l*d,I=c*p-f*d,T=l*p-f*v,O=g*T-_*I+x*z+b*N-M*A+w*E;return 0===O?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t):(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(i*I-r*T-a*z)*O,t.m02=(d*w-v*M+p*b)*O,t.m03=(l*M-c*w-f*b)*O,t.m04=(m*N-s*T-u*A)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(v*x-y*w-p*_)*O,t.m07=(h*w-l*x+f*_)*O,t.m08=(s*I-o*N+u*E)*O,t.m09=(r*N-n*I-a*E)*O,t.m10=(y*M-d*x+p*g)*O,t.m11=(c*x-h*M-f*g)*O,t.m12=(o*A-s*z-m*E)*O,t.m13=(n*z-r*A+i*E)*O,t.m14=(d*_-y*b-v*g)*O,t.m15=(h*b-c*_+l*g)*O,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08,h=t.m09,c=t.m10,l=t.m11,f=t.m12,y=t.m13,d=t.m14,v=t.m15;return(e*s-n*a)*(c*v-l*d)-(e*o-r*a)*(h*v-l*y)+(e*m-i*a)*(h*d-c*y)+(n*o-r*s)*(u*v-l*f)-(n*m-i*s)*(u*d-c*f)+(r*m-i*o)*(u*y-h*f)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=e.m09,f=e.m10,y=e.m11,d=e.m12,v=e.m13,p=e.m14,g=e.m15,_=n.m00,x=n.m01,b=n.m02,M=n.m03;return t.m00=_*r+x*o+b*c+M*d,t.m01=_*i+x*m+b*l+M*v,t.m02=_*a+x*u+b*f+M*p,t.m03=_*s+x*h+b*y+M*g,_=n.m04,x=n.m05,b=n.m06,M=n.m07,t.m04=_*r+x*o+b*c+M*d,t.m05=_*i+x*m+b*l+M*v,t.m06=_*a+x*u+b*f+M*p,t.m07=_*s+x*h+b*y+M*g,_=n.m08,x=n.m09,b=n.m10,M=n.m11,t.m08=_*r+x*o+b*c+M*d,t.m09=_*i+x*m+b*l+M*v,t.m10=_*a+x*u+b*f+M*p,t.m11=_*s+x*h+b*y+M*g,_=n.m12,x=n.m13,b=n.m14,M=n.m15,t.m12=_*r+x*o+b*c+M*d,t.m13=_*i+x*m+b*l+M*v,t.m14=_*a+x*u+b*f+M*p,t.m15=_*s+x*h+b*y+M*g,t},e.transform=function(t,e,n){var r=n.x,i=n.y,a=n.z;if(e===t)t.m12=e.m00*r+e.m04*i+e.m08*a+e.m12,t.m13=e.m01*r+e.m05*i+e.m09*a+e.m13,t.m14=e.m02*r+e.m06*i+e.m10*a+e.m14,t.m15=e.m03*r+e.m07*i+e.m11*a+e.m15;else{var s=e.m00,o=e.m01,m=e.m02,u=e.m03,h=e.m04,c=e.m05,l=e.m06,f=e.m07,y=e.m08,d=e.m09,v=e.m10,p=e.m11;t.m00=s,t.m01=o,t.m02=m,t.m03=u,t.m04=h,t.m05=c,t.m06=l,t.m07=f,t.m08=y,t.m09=d,t.m10=v,t.m11=p,t.m12=s*r+h*i+y*a+e.m12,t.m13=o*r+c*i+d*a+e.m13,t.m14=m*r+l*i+v*a+e.m14,t.m15=u*r+f*i+p*a+e.m15}return t},e.translate=function(t,e,n){return e===t?(t.m12+=n.x,t.m13+=n.y,t.m14+=n.z):(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12+n.x,t.m13=e.m13+n.y,t.m14=e.m14+n.z,t.m15=e.m15),t},e.scale=function(t,e,n){var r=n.x,i=n.y,a=n.z;return t.m00=e.m00*r,t.m01=e.m01*r,t.m02=e.m02*r,t.m03=e.m03*r,t.m04=e.m04*i,t.m05=e.m05*i,t.m06=e.m06*i,t.m07=e.m07*i,t.m08=e.m08*a,t.m09=e.m09*a,t.m10=e.m10*a,t.m11=e.m11*a,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.rotate=function(t,e,n,r){var i=r.x,a=r.y,s=r.z,o=Math.sqrt(i*i+a*a+s*s);if(Math.abs(o)<vr)return null;i*=o=1/o,a*=o,s*=o;var m=Math.sin(n),u=Math.cos(n),h=1-u,c=e.m00,l=e.m01,f=e.m02,y=e.m03,d=e.m04,v=e.m05,p=e.m06,g=e.m07,_=e.m08,x=e.m09,b=e.m10,M=e.m11,w=i*i*h+u,E=a*i*h+s*m,A=s*i*h-a*m,N=i*a*h-s*m,z=a*a*h+u,I=s*a*h+i*m,T=i*s*h+a*m,O=a*s*h-i*m,S=s*s*h+u;return t.m00=c*w+d*E+_*A,t.m01=l*w+v*E+x*A,t.m02=f*w+p*E+b*A,t.m03=y*w+g*E+M*A,t.m04=c*N+d*z+_*I,t.m05=l*N+v*z+x*I,t.m06=f*N+p*z+b*I,t.m07=y*N+g*z+M*I,t.m08=c*T+d*O+_*S,t.m09=l*T+v*O+x*S,t.m10=f*T+p*O+b*S,t.m11=y*T+g*O+M*S,e!==t&&(t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t},e.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m04,s=e.m05,o=e.m06,m=e.m07,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m04=a*i+u*r,t.m05=s*i+h*r,t.m06=o*i+c*r,t.m07=m*i+l*r,t.m08=u*i-a*r,t.m09=h*i-s*r,t.m10=c*i-o*r,t.m11=l*i-m*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i-u*r,t.m01=s*i-h*r,t.m02=o*i-c*r,t.m03=m*i-l*r,t.m08=a*r+u*i,t.m09=s*r+h*i,t.m10=o*r+c*i,t.m11=m*r+l*i,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m04,h=e.m05,c=e.m06,l=e.m07;return e!==t&&(t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i+u*r,t.m01=s*i+h*r,t.m02=o*i+c*r,t.m03=m*i+l*r,t.m04=u*i-a*r,t.m05=h*i-s*r,t.m06=c*i-o*r,t.m07=l*i-m*r,t},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=e.x,t.m13=e.y,t.m14=e.z,t.m15=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=e.y,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=e.z,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRotation=function(t,e,n){var r=n.x,i=n.y,a=n.z,s=Math.sqrt(r*r+i*i+a*a);if(Math.abs(s)<vr)return null;r*=s=1/s,i*=s,a*=s;var o=Math.sin(e),m=Math.cos(e),u=1-m;return t.m00=r*r*u+m,t.m01=i*r*u+a*o,t.m02=a*r*u-i*o,t.m03=0,t.m04=r*i*u-a*o,t.m05=i*i*u+m,t.m06=a*i*u+r*o,t.m07=0,t.m08=r*a*u+i*o,t.m09=i*a*u-r*o,t.m10=a*a*u+m,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=r,t.m06=n,t.m07=0,t.m08=0,t.m09=-n,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=0,t.m02=-n,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=n,t.m09=0,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=0,t.m04=-n,t.m05=r,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRT=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u;return t.m00=1-(f+d),t.m01=c+g,t.m02=l-p,t.m03=0,t.m04=c-g,t.m05=1-(h+d),t.m06=y+v,t.m07=0,t.m08=l+p,t.m09=y-v,t.m10=1-(h+f),t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.getTranslation=function(t,e){return t.x=e.m12,t.y=e.m13,t.z=e.m14,t},e.getScaling=function(t,e){var n=ui.m00=e.m00,r=ui.m01=e.m01,i=ui.m02=e.m02,a=ui.m03=e.m04,s=ui.m04=e.m05,o=ui.m05=e.m06,m=ui.m06=e.m08,u=ui.m07=e.m09,h=ui.m08=e.m10;return t.x=Math.sqrt(n*n+r*r+i*i),t.y=Math.sqrt(a*a+s*s+o*o),t.z=Math.sqrt(m*m+u*u+h*h),Xr.determinant(ui)<0&&(t.x*=-1),t},e.getRotation=function(t,e){var n=e.m00+e.m05+e.m10,r=0;return n>0?(r=2*Math.sqrt(n+1),t.w=.25*r,t.x=(e.m06-e.m09)/r,t.y=(e.m08-e.m02)/r,t.z=(e.m01-e.m04)/r):e.m00>e.m05&&e.m00>e.m10?(r=2*Math.sqrt(1+e.m00-e.m05-e.m10),t.w=(e.m06-e.m09)/r,t.x=.25*r,t.y=(e.m01+e.m04)/r,t.z=(e.m08+e.m02)/r):e.m05>e.m10?(r=2*Math.sqrt(1+e.m05-e.m00-e.m10),t.w=(e.m08-e.m02)/r,t.x=(e.m01+e.m04)/r,t.y=.25*r,t.z=(e.m06+e.m09)/r):(r=2*Math.sqrt(1+e.m10-e.m00-e.m05),t.w=(e.m01-e.m04)/r,t.x=(e.m08+e.m02)/r,t.y=(e.m06+e.m09)/r,t.z=.25*r),t},e.toRTS=function(t,e,n,r){var i=qr.set(mi,t.m00,t.m01,t.m02).length(),a=qr.set(mi,t.m04,t.m05,t.m06).length(),s=qr.set(mi,t.m08,t.m09,t.m10).length();ui.m00=t.m00/i,ui.m01=t.m01/i,ui.m02=t.m02/i,ui.m03=t.m04/a,ui.m04=t.m05/a,ui.m05=t.m06/a,ui.m06=t.m08/s,ui.m07=t.m09/s,ui.m08=t.m10/s;var o=Xr.determinant(ui);r&&(qr.set(r,i,a,s),o<0&&(r.x*=-1)),n&&qr.set(n,t.m12,t.m13,t.m14),e&&(o<0&&(ui.m00*=-1,ui.m01*=-1,ui.m02*=-1),$r.fromMat3(e,ui))},e.toSRT=function(t,e,n,r){var i=qr.set(mi,t.m00,t.m01,t.m02).length(),a=qr.set(mi,t.m04,t.m05,t.m06).length(),s=qr.set(mi,t.m08,t.m09,t.m10).length();r&&(r.x=i,r.y=a,r.z=s),n&&qr.set(n,t.m12,t.m13,t.m14),e&&(ui.m00=t.m00/i,ui.m01=t.m01/i,ui.m02=t.m02/i,ui.m03=t.m04/a,ui.m04=t.m05/a,ui.m05=t.m06/a,ui.m06=t.m08/s,ui.m07=t.m09/s,ui.m08=t.m10/s,Xr.determinant(ui)<0&&(r&&(r.x*=-1),ui.m00*=-1,ui.m01*=-1,ui.m02*=-1),$r.fromMat3(e,ui))},e.toEuler=function(t,e){return Xr.set(ui,t.m00,t.m01,t.m02,t.m04,t.m05,t.m06,t.m08,t.m09,t.m10),Xr.toEuler(ui,e)},e.fromRTS=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,d=a*h,v=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+v))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+v))*b,t.m06=(d+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(d-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromSRT=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,d=a*h,v=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+v))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+v))*b,t.m06=(d+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(d-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromRTSOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,d=s*h,v=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(d+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(v+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(v-g)*w,t.m10=(1-(l+d))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromSRTOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,d=s*h,v=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(d+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(v+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(v-g)*w,t.m10=(1-(l+d))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,d=a*s,v=a*o,p=a*m;return t.m00=1-c-y,t.m01=h+p,t.m02=l-v,t.m03=0,t.m04=h-p,t.m05=1-u-y,t.m06=f+d,t.m07=0,t.m08=l+v,t.m09=f-d,t.m10=1-u-c,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.frustum=function(t,e,n,r,i,a,s){var o=1/(n-e),m=1/(i-r),u=1/(a-s);return t.m00=2*a*o,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*a*m,t.m06=0,t.m07=0,t.m08=(n+e)*o,t.m09=(i+r)*m,t.m10=(s+a)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=s*a*2*u,t.m15=0,t},e.perspective=function(t,e,n,r,i,a,s,o,m){void 0===a&&(a=!0),void 0===s&&(s=-1),void 0===o&&(o=1),void 0===m&&(m=0);var u=1/Math.tan(e/2),h=1/(r-i),c=a?u/n:u,l=(a?u:u*n)*o,f=si[m];return t.m00=c*f[0],t.m01=c*f[1],t.m02=0,t.m03=0,t.m04=l*f[2],t.m05=l*f[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(i-s*r)*h,t.m11=-1,t.m12=0,t.m13=0,t.m14=i*r*h*(1-s),t.m15=0,t},e.ortho=function(t,e,n,r,i,a,s,o,m,u){void 0===o&&(o=-1),void 0===m&&(m=1),void 0===u&&(u=0);var h=1/(e-n),c=1/(r-i)*m,l=1/(a-s),f=-2*h,y=-2*c,d=(e+n)*h,v=(i+r)*c,p=si[u];return t.m00=f*p[0],t.m01=f*p[1],t.m02=0,t.m03=0,t.m04=y*p[2],t.m05=y*p[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=l*(1-o),t.m11=0,t.m12=d*p[0]+v*p[2],t.m13=d*p[1]+v*p[3],t.m14=(a-o*s)*l,t.m15=1,t},e.lookAt=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=r.x,m=r.y,u=r.z,h=i-n.x,c=a-n.y,l=s-n.z,f=1/Math.sqrt(h*h+c*c+l*l),y=m*(l*=f)-u*(c*=f),d=u*(h*=f)-o*l,v=o*c-m*h,p=c*(v*=f=1/Math.sqrt(y*y+d*d+v*v))-l*(d*=f),g=l*(y*=f)-h*v,_=h*d-c*y;return t.m00=y,t.m01=p,t.m02=h,t.m03=0,t.m04=d,t.m05=g,t.m06=c,t.m07=0,t.m08=v,t.m09=_,t.m10=l,t.m11=0,t.m12=-(y*i+d*a+v*s),t.m13=-(p*i+g*a+_*s),t.m14=-(h*i+c*a+l*s),t.m15=1,t},e.inverseTranspose=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,z=c*v-l*d,I=c*p-f*d,T=l*p-f*v,O=g*T-_*I+x*z+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*I-o*N+u*E)*O,t.m03=0,t.m04=(i*I-r*T-a*z)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(r*N-n*I-a*E)*O,t.m07=0,t.m08=(d*w-v*M+p*b)*O,t.m09=(v*x-y*w-p*_)*O,t.m10=(y*M-d*x+p*g)*O,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t[n+9]=e.m09,t[n+10]=e.m10,t[n+11]=e.m11,t[n+12]=e.m12,t[n+13]=e.m13,t[n+14]=e.m14,t[n+15]=e.m15,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t.m09=e[n+9],t.m10=e[n+10],t.m11=e[n+11],t.m12=e[n+12],t.m13=e[n+13],t.m14=e[n+14],t.m15=e[n+15],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t.m09=e.m09+n.m09,t.m10=e.m10+n.m10,t.m11=e.m11+n.m11,t.m12=e.m12+n.m12,t.m13=e.m13+n.m13,t.m14=e.m14+n.m14,t.m15=e.m15+n.m15,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t.m09=e.m09-n.m09,t.m10=e.m10-n.m10,t.m11=e.m11-n.m11,t.m12=e.m12-n.m12,t.m13=e.m13-n.m13,t.m14=e.m14-n.m14,t.m15=e.m15-n.m15,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t.m09=e.m09*n,t.m10=e.m10*n,t.m11=e.m11*n,t.m12=e.m12*n,t.m13=e.m13*n,t.m14=e.m14*n,t.m15=e.m15*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=e.m00+n.m00*r,t.m01=e.m01+n.m01*r,t.m02=e.m02+n.m02*r,t.m03=e.m03+n.m03*r,t.m04=e.m04+n.m04*r,t.m05=e.m05+n.m05*r,t.m06=e.m06+n.m06*r,t.m07=e.m07+n.m07*r,t.m08=e.m08+n.m08*r,t.m09=e.m09+n.m09*r,t.m10=e.m10+n.m10*r,t.m11=e.m11+n.m11*r,t.m12=e.m12+n.m12*r,t.m13=e.m13+n.m13*r,t.m14=e.m14+n.m14*r,t.m15=e.m15+n.m15*r,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08&&t.m09===e.m09&&t.m10===e.m10&&t.m11===e.m11&&t.m12===e.m12&&t.m13===e.m13&&t.m14===e.m14&&t.m15===e.m15},e.equals=function(t,e,n){return void 0===n&&(n=vr),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))&&Math.abs(t.m09-e.m09)<=n*Math.max(1,Math.abs(t.m09),Math.abs(e.m09))&&Math.abs(t.m10-e.m10)<=n*Math.max(1,Math.abs(t.m10),Math.abs(e.m10))&&Math.abs(t.m11-e.m11)<=n*Math.max(1,Math.abs(t.m11),Math.abs(e.m11))&&Math.abs(t.m12-e.m12)<=n*Math.max(1,Math.abs(t.m12),Math.abs(e.m12))&&Math.abs(t.m13-e.m13)<=n*Math.max(1,Math.abs(t.m13),Math.abs(e.m13))&&Math.abs(t.m14-e.m14)<=n*Math.max(1,Math.abs(t.m14),Math.abs(e.m14))&&Math.abs(t.m15-e.m15)<=n*Math.max(1,Math.abs(t.m15),Math.abs(e.m15))};var n=e.prototype;return n.clone=function(){return new e(this.m00,this.m01,this.m02,this.m03,this.m04,this.m05,this.m06,this.m07,this.m08,this.m09,this.m10,this.m11,this.m12,this.m13,this.m14,this.m15)},n.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===d&&(d=1),"object"==typeof t?(this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08,this.m09=t.m09,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m15=t.m15,this.m00=t.m00):(this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m,this.m09=u,this.m10=h,this.m11=c,this.m12=l,this.m13=f,this.m14=y,this.m15=d,this.m00=t),this},n.equals=function(t,e){return void 0===e&&(e=vr),!(Math.abs(this.m00)===1/0||Math.abs(this.m01)===1/0||Math.abs(this.m02)===1/0||Math.abs(this.m03)===1/0||Math.abs(this.m04)===1/0||Math.abs(this.m05)===1/0||Math.abs(this.m06)===1/0||Math.abs(this.m07)===1/0||Math.abs(this.m08)===1/0||Math.abs(this.m09)===1/0||Math.abs(this.m10)===1/0||Math.abs(this.m11)===1/0||Math.abs(this.m12)===1/0||Math.abs(this.m13)===1/0||Math.abs(this.m14)===1/0||Math.abs(this.m15)===1/0)&&Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))&&Math.abs(this.m09-t.m09)<=e*Math.max(1,Math.abs(this.m09),Math.abs(t.m09))&&Math.abs(this.m10-t.m10)<=e*Math.max(1,Math.abs(this.m10),Math.abs(t.m10))&&Math.abs(this.m11-t.m11)<=e*Math.max(1,Math.abs(this.m11),Math.abs(t.m11))&&Math.abs(this.m12-t.m12)<=e*Math.max(1,Math.abs(this.m12),Math.abs(t.m12))&&Math.abs(this.m13-t.m13)<=e*Math.max(1,Math.abs(this.m13),Math.abs(t.m13))&&Math.abs(this.m14-t.m14)<=e*Math.max(1,Math.abs(this.m14),Math.abs(t.m14))&&Math.abs(this.m15-t.m15)<=e*Math.max(1,Math.abs(this.m15),Math.abs(t.m15))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08&&this.m09===t.m09&&this.m10===t.m10&&this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m14===t.m14&&this.m15===t.m15},n.toString=function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},n.zero=function(){return this.m00=0,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=0,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=0,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=0,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m03,r=this.m06,i=this.m07,a=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=t,this.m06=this.m09,this.m07=this.m13,this.m08=e,this.m09=r,this.m11=this.m14,this.m12=n,this.m13=i,this.m14=a,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,d=this.m15,v=t*a-e*i,p=t*s-n*i,g=t*o-r*i,_=e*s-n*a,x=e*o-r*a,b=n*o-r*s,M=m*f-u*l,w=m*y-h*l,E=m*d-c*l,A=u*y-h*f,N=u*d-c*f,z=h*d-c*y,I=v*z-p*N+g*A+_*E-x*w+b*M;return 0===I?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(I=1/I,this.m00=(a*z-s*N+o*A)*I,this.m01=(n*N-e*z-r*A)*I,this.m02=(f*b-y*x+d*_)*I,this.m03=(h*x-u*b-c*_)*I,this.m04=(s*E-i*z-o*w)*I,this.m05=(t*z-n*E+r*w)*I,this.m06=(y*g-l*b-d*p)*I,this.m07=(m*b-h*g+c*p)*I,this.m08=(i*N-a*E+o*M)*I,this.m09=(e*E-t*N-r*M)*I,this.m10=(l*x-f*g+d*v)*I,this.m11=(u*g-m*x-c*v)*I,this.m12=(a*w-i*A-s*M)*I,this.m13=(t*A-e*w+n*M)*I,this.m14=(f*p-l*_-y*v)*I,this.m15=(m*_-u*p+h*v)*I,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,d=this.m15;return(t*a-e*i)*(h*d-c*y)-(t*s-n*i)*(u*d-c*f)+(t*o-r*i)*(u*y-h*f)+(e*s-n*a)*(m*d-c*l)-(e*o-r*a)*(m*y-h*l)+(n*o-r*s)*(m*f-u*l)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this.m09+=t.m09,this.m10+=t.m10,this.m11+=t.m11,this.m12+=t.m12,this.m13+=t.m13,this.m14+=t.m14,this.m15+=t.m15,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this.m09-=t.m09,this.m10-=t.m10,this.m11-=t.m11,this.m12-=t.m12,this.m13-=t.m13,this.m14-=t.m14,this.m15-=t.m15,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=this.m09,c=this.m10,l=this.m11,f=this.m12,y=this.m13,d=this.m14,v=this.m15,p=t.m00,g=t.m01,_=t.m02,x=t.m03;return this.m00=p*e+g*a+_*u+x*f,this.m01=p*n+g*s+_*h+x*y,this.m02=p*r+g*o+_*c+x*d,this.m03=p*i+g*m+_*l+x*v,p=t.m04,g=t.m05,_=t.m06,x=t.m07,this.m04=p*e+g*a+_*u+x*f,this.m05=p*n+g*s+_*h+x*y,this.m06=p*r+g*o+_*c+x*d,this.m07=p*i+g*m+_*l+x*v,p=t.m08,g=t.m09,_=t.m10,x=t.m11,this.m08=p*e+g*a+_*u+x*f,this.m09=p*n+g*s+_*h+x*y,this.m10=p*r+g*o+_*c+x*d,this.m11=p*i+g*m+_*l+x*v,p=t.m12,g=t.m13,_=t.m14,x=t.m15,this.m12=p*e+g*a+_*u+x*f,this.m13=p*n+g*s+_*h+x*y,this.m14=p*r+g*o+_*c+x*d,this.m15=p*i+g*m+_*l+x*v,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this.m09*=t,this.m10*=t,this.m11*=t,this.m12*=t,this.m13*=t,this.m14*=t,this.m15*=t,this},n.translate=function(t){return this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this},n.transform=function(t){var e=t.x,n=t.y,r=t.z,i=this.m00,a=this.m01,s=this.m02,o=this.m03,m=this.m04,u=this.m05,h=this.m06,c=this.m07,l=this.m08,f=this.m09,y=this.m10,d=this.m11;return this.m12=i*e+m*n+l*r+this.m12,this.m13=a*e+u*n+f*r+this.m13,this.m14=s*e+h*n+y*r+this.m14,this.m15=o*e+c*n+d*r+this.m15,this},n.scale=function(t){var e=t.x,n=t.y,r=t.z;return this.m00*=e,this.m01*=e,this.m02*=e,this.m03*=e,this.m04*=n,this.m05*=n,this.m06*=n,this.m07*=n,this.m08*=r,this.m09*=r,this.m10*=r,this.m11*=r,this},n.rotate=function(t,e){var n=e.x,r=e.y,i=e.z,a=Math.sqrt(n*n+r*r+i*i);if(Math.abs(a)<vr)return null;n*=a=1/a,r*=a,i*=a;var s=Math.sin(t),o=Math.cos(t),m=1-o,u=this.m00,h=this.m01,c=this.m02,l=this.m03,f=this.m04,y=this.m05,d=this.m06,v=this.m07,p=this.m08,g=this.m09,_=this.m10,x=this.m11,b=n*n*m+o,M=r*n*m+i*s,w=i*n*m-r*s,E=n*r*m-i*s,A=r*r*m+o,N=i*r*m+n*s,z=n*i*m+r*s,I=r*i*m-n*s,T=i*i*m+o;return this.m00=u*b+f*M+p*w,this.m01=h*b+y*M+g*w,this.m02=c*b+d*M+_*w,this.m03=l*b+v*M+x*w,this.m04=u*E+f*A+p*N,this.m05=h*E+y*A+g*N,this.m06=c*E+d*A+_*N,this.m07=l*E+v*A+x*N,this.m08=u*z+f*I+p*T,this.m09=h*z+y*I+g*T,this.m10=c*z+d*I+_*T,this.m11=l*z+v*I+x*T,this},n.getTranslation=function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t},n.getScale=function(t){var e=ui.m00=this.m00,n=ui.m01=this.m01,r=ui.m02=this.m02,i=ui.m03=this.m04,a=ui.m04=this.m05,s=ui.m05=this.m06,o=ui.m06=this.m08,m=ui.m07=this.m09,u=ui.m08=this.m10;return t.x=Math.sqrt(e*e+n*n+r*r),t.y=Math.sqrt(i*i+a*a+s*s),t.z=Math.sqrt(o*o+m*m+u*u),Xr.determinant(ui)<0&&(t.x*=-1),t},n.getRotation=function(t){var e=qr.set(mi,this.m00,this.m01,this.m02).length(),n=qr.set(mi,this.m04,this.m05,this.m06).length(),r=qr.set(mi,this.m08,this.m09,this.m10).length();return ui.m00=this.m00/e,ui.m01=this.m01/e,ui.m02=this.m02/e,ui.m03=this.m04/n,ui.m04=this.m05/n,ui.m05=this.m06/n,ui.m06=this.m08/r,ui.m07=this.m09/r,ui.m08=this.m10/r,Xr.determinant(ui)<0&&(ui.m00*=-1,ui.m01*=-1,ui.m02*=-1),$r.fromMat3(t,ui)},n.fromRTS=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+d))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+d))*x,this.m06=(y+v)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-v)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromSRT=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+d))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+d))*x,this.m06=(y+v)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-v)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,d=i*s,v=i*o;return this.m00=1-h-f,this.m01=u+v,this.m02=c-d,this.m03=0,this.m04=u-v,this.m05=1-m-f,this.m06=l+y,this.m07=0,this.m08=c+d,this.m09=l-y,this.m10=1-m-h,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},e}(Ne));oi.IDENTITY=Object.freeze(new oi);var mi=new qr,ui=new Xr;function hi(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return new oi(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d)}_n.fastDefine("cc.Mat4",oi,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),s.Mat4=oi,s.mat4=hi;var ci,li=t("V",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.x=e.x,r.y=e.y):(r.x=e||0,r.y=n||0),r}l(e,t),e.clone=function(t){return new e(t.x,t.y)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t},e.set=function(t,e,n){return t.x=e,t.y=n,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.len=function(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)},e.lengthSqr=function(t){var e=t.x,n=t.y;return e*e+n*n},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y;return Math.abs(n)<vr?t.x=0:t.x=1/n,Math.abs(r)<vr?t.y=0:t.y=1/r,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=n*n+r*r;return i>0?(i=1/Math.sqrt(i),t.x=n*i,t.y=r*i):(t.x=0,t.y=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.cross=function(t,e,n){return t instanceof qr?(t.x=t.y=0,t.z=e.x*n.y-e.y*n.x,t):t.x*e.y-t.y*e.x},e.lerp=function(t,e,n,r){var i=e.x,a=e.y;return t.x=i+r*(n.x-i),t.y=a+r*(n.y-a),t},e.random=function(t,e){e=e||1;var n=2*Er()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m03*i+n.m06,t.y=n.m01*r+n.m04*i+n.m07,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m04*i+n.m12,t.y=n.m01*r+n.m05*i+n.m13,t},e.str=function(t){return"Vec2("+t.x+", "+t.y+")"},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y},e.equals=function(t,e,n){return void 0===n&&(n=vr),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y,r=e.x*e.x+e.y*e.y;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y)/Math.sqrt(n*r);return i=_r(i,-1,1),Math.acos(i)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y)},n.set=function(t,e){return"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=e||0),this},n.equals=function(t,e){return void 0===e&&(e=vr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))},n.equals2f=function(t,e,n){return void 0===n&&(n=vr),Math.abs(this.x-t)<=n*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=n*Math.max(1,Math.abs(this.y),Math.abs(e))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y},n.strictEquals2f=function(t,e){return this.x===t&&this.y===e},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},n.lerp=function(t,e){var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},n.clampf=function(t,e){return this.x=_r(this.x,t.x,e.x),this.y=_r(this.y,t.y,e.y),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.add2f=function(t,e){return this.x+=t,this.y+=e,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.subtract2f=function(t,e){return this.x-=t,this.y-=e,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x*=t,this.y*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this},n.multiply2f=function(t,e){return this.x*=t,this.y*=e,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this},n.divide2f=function(t,e){return this.x/=t,this.y/=e,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y},n.normalize=function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x*=n,this.y*=n),this},n.angle=function(t){var e=this.lengthSqr(),n=t.lengthSqr();if(0===e||0===n)return 0;var r=this.dot(t)/Math.sqrt(e*n);return r=_r(r,-1,1),Math.acos(r)},n.signAngle=function(t){var e=this.angle(t);return this.cross(t)<0?-e:e},n.rotate=function(t){var e=this.x,n=this.y,r=Math.sin(t),i=Math.cos(t);return this.x=i*e-r*n,this.y=r*e+i*n,this},n.project=function(t){var e=this.dot(t)/t.dot(t);return this.x=t.x*e,this.y=t.y*e,this},n.transformMat4=function(t){var e=this.x,n=this.y;return this.x=t.m00*e+t.m04*n+t.m12,this.y=t.m01*e+t.m05*n+t.m13,this},e}(Ne));function fi(t,e){return new li(t,e)}li.ZERO=Object.freeze(new li(0,0)),li.ONE=Object.freeze(new li(1,1)),li.NEG_ONE=Object.freeze(new li(-1,-1)),li.UNIT_X=Object.freeze(new li(1,0)),li.UNIT_Y=Object.freeze(new li(0,1)),_n.fastDefine("cc.Vec2",li,{x:0,y:0}),s.Vec2=li,s.v2=fi,tr(li,"Vec2",[{name:"sub",newName:"subtract",target:li,targetName:"Vec2"},{name:"mul",newName:"multiply",target:li,targetName:"Vec2"},{name:"div",newName:"divide",target:li,targetName:"Vec2"},{name:"dist",newName:"distance",target:li,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:li,targetName:"Vec2"},{name:"mag",newName:"len",target:li,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:li,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:li,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:li,targetName:"Vec2"}]),tr(li.prototype,"Vec2",[{name:"mag",newName:"length",target:li.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:li.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:li.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:li.prototype,targetName:"Vec2"}]),tr(qr,"Vec3",[{name:"sub",newName:"subtract",target:qr,targetName:"Vec3"},{name:"mul",newName:"multiply",target:qr,targetName:"Vec3"},{name:"div",newName:"divide",target:qr,targetName:"Vec3"},{name:"dist",newName:"distance",target:qr,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:qr,targetName:"Vec3"},{name:"mag",newName:"len",target:qr,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:qr,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:qr,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:qr,targetName:"Vec3"}]),tr(qr.prototype,"Vec3",[{name:"mag",newName:"length",target:qr.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:qr.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:qr.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:qr.prototype,targetName:"Vec3"}]),tr(kr,"Vec4",[{name:"sub",newName:"subtract",target:kr,targetName:"Vec4"},{name:"mul",newName:"multiply",target:kr,targetName:"Vec4"},{name:"div",newName:"divide",target:kr,targetName:"Vec4"},{name:"dist",newName:"distance",target:kr,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:kr,targetName:"Vec4"},{name:"mag",newName:"len",target:kr,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:kr,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:kr,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:kr,targetName:"Vec4"}]),tr(kr.prototype,"Vec4",[{name:"mag",newName:"length",target:kr.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:kr.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:kr.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:kr.prototype,targetName:"Vec4"}]),tr($r,"Quat",[{name:"mag",newName:"len",target:$r,targetName:"Quat"},{name:"mul",newName:"multiply",target:$r,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:$r,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:$r,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:$r,targetName:"Quat"}]),tr($r.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:$r.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:$r.prototype,targetName:"Quat"}]),tr(Kr,"Color",[{name:"sub",newName:"subtract",target:Kr,targetName:"Color"},{name:"mul",newName:"multiply",target:Kr,targetName:"Color"},{name:"div",newName:"divide",target:Kr,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:Kr,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1].toString(16);return s.Color.fromHEX(e[0],r)}}]),tr(Xr,"Mat3",[{name:"sub",newName:"subtract",target:Xr,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Xr,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Xr,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:Xr,targetName:"Mat3"}]),tr(Xr.prototype,"Mat3",[{name:"sub",newName:"subtract",target:Xr.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Xr.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:Xr.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Xr.prototype,targetName:"Mat3"}]),tr(oi,"Mat4",[{name:"sub",newName:"subtract",target:oi,targetName:"Mat4"},{name:"mul",newName:"multiply",target:oi,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:oi,targetName:"Mat4"}]),tr(oi.prototype,"Mat4",[{name:"sub",newName:"subtract",target:oi.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:oi.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:oi.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:oi.prototype,targetName:"Mat4"}]),function(t){t[t.VEC2=0]="VEC2",t[t.VEC3=1]="VEC3",t[t.VEC4=2]="VEC4",t[t.QUATERNION=3]="QUATERNION",t[t.MAT3=4]="MAT3",t[t.MAT4=5]="MAT4",t[t.SIZE=6]="SIZE",t[t.RECT=7]="RECT",t[t.COLOR=8]="COLOR"}(ci||(ci={}));var yi=t("A",function(){function t(t,e,n,r,i,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=a}return t.identity=function(){return new t},t.clone=function(e){return new t(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.concat=function(t,e,n){var r=e.a,i=e.b,a=e.c,s=e.d,o=e.tx,m=e.ty;t.a=r*n.a+i*n.c,t.b=r*n.b+i*n.d,t.c=a*n.a+s*n.c,t.d=a*n.b+s*n.d,t.tx=o*n.a+m*n.c+n.tx,t.ty=o*n.b+m*n.d+n.ty},t.invert=function(t,e){var n=1/(e.a*e.d-e.b*e.c);t.a=n*e.d,t.b=-n*e.b,t.c=-n*e.c,t.d=n*e.a,t.tx=n*(e.c*e.ty-e.d*e.tx),t.ty=n*(e.b*e.tx-e.a*e.ty)},t.fromMat4=function(t,e){t.a=e.m00,t.b=e.m01,t.c=e.m04,t.d=e.m05,t.tx=e.m12,t.ty=e.m13},t.transformVec2=function(t,e,n,r){var i,a;r?(i=e,a=n):(r=n,i=e.x,a=e.y),t.x=r.a*i+r.c*a+r.tx,t.y=r.b*i+r.d*a+r.ty},t.transformSize=function(t,e,n){t.width=n.a*e.width+n.c*e.height,t.height=n.b*e.width+n.d*e.height},t.transformRect=function(t,e,n){var r=e.x+e.width,i=e.y+e.height,a=n.a*e.x+n.c*e.y+n.tx,s=n.b*e.x+n.d*e.y+n.ty,o=n.a*r+n.c*e.y+n.tx,m=n.b*r+n.d*e.y+n.ty,u=n.a*e.x+n.c*i+n.tx,h=n.b*e.x+n.d*i+n.ty,c=n.a*r+n.c*i+n.tx,l=n.b*r+n.d*i+n.ty,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),d=Math.min(s,m,h,l),v=Math.max(s,m,h,l);t.x=f,t.y=d,t.width=y-f,t.height=v-d},t.transformObb=function(t,e,n,r,i,a,s){void 0===s&&(s=!0);var o=a.a*i.x+a.c*i.y+a.tx,m=a.b*i.x+a.d*i.y+a.ty,u=a.a*i.width,h=a.b*i.width,c=a.c*i.height,l=a.d*i.height;s?(e.x=o,e.y=m,n.x=u+o,n.y=h+m,t.x=c+o,t.y=l+m,r.x=u+c+o,r.y=h+l+m):(t.x=o,t.y=m,r.x=u+o,r.y=h+m,e.x=c+o,e.y=l+m,n.x=u+c+o,n.y=h+l+m)},t}());s.AffineTransform=yi;var di=t("S",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.width=e.width,r.height=e.height):(r.width=e||0,r.height=n||0),r}l(e,t),e.lerp=function(t,e,n,r){return t.width=e.width+(n.width-e.width)*r,t.height=e.height+(n.height-e.height)*r,t},e.equals=function(t,e){return t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.width,this.height)},n.set=function(t,e){return"object"==typeof t?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=e||0),this},n.equals=function(t){return this.width===t.width&&this.height===t.height},n.lerp=function(t,e){return this.width+=(t.width-this.width)*e,this.height+=(t.height-this.height)*e,this},n.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},h(e,[{key:"x",get:function(){return this.width},set:function(t){this.width=t}},{key:"y",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ne));function vi(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new di(t,e)}di.ZERO=Object.freeze(new di(0,0)),di.ONE=Object.freeze(new di(1,1)),_n.fastDefine("cc.Size",di,{width:0,height:0}),s.size=vi,s.Size=di;var pi=t("y",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.width=e.width,a.height=e.height):(a.x=e||0,a.y=n||0,a.width=r||0,a.height=i||0),a}l(e,t),e.fromMinMax=function(t,e,n){var r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),a=Math.max(e.x,n.x),s=Math.max(e.y,n.y);return t.x=r,t.y=i,t.width=a-r,t.height=s-i,t},e.lerp=function(t,e,n,r){var i=e.x,a=e.y,s=e.width,o=e.height;return t.x=i+(n.x-i)*r,t.y=a+(n.y-a)*r,t.width=s+(n.width-s)*r,t.height=o+(n.height-o)*r,t},e.intersection=function(t,e,n){var r=e.x,i=e.y,a=e.x+e.width,s=e.y+e.height,o=n.x,m=n.y,u=n.x+n.width,h=n.y+n.height;return t.x=Math.max(r,o),t.y=Math.max(i,m),t.width=Math.min(a,u)-t.x,t.height=Math.min(s,h)-t.y,t},e.union=function(t,e,n){var r=e.x,i=e.y,a=e.width,s=e.height,o=n.x,m=n.y,u=n.width,h=n.height;return t.x=Math.min(r,o),t.y=Math.min(i,m),t.width=Math.max(r+a,o+u)-t.x,t.height=Math.max(i+s,m+h)-t.y,t},e.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0),this},n.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.width,a=this.height;return this.x=n+(t.x-n)*e,this.y=r+(t.y-r)*e,this.width=i+(t.width-i)*e,this.height=a+(t.height-a)*e,this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},n.intersects=function(t){var e=this.x+this.width,n=this.y+this.height,r=t.x+t.width,i=t.y+t.height;return!(e<t.x||r<this.x||n<t.y||i<this.y)},n.contains=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},n.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},n.transformMat4=function(t){var e=this.x,n=this.y,r=e+this.width,i=n+this.height,a=t.m00*e+t.m04*n+t.m12,s=t.m01*e+t.m05*n+t.m13,o=t.m00*r+t.m04*n+t.m12,m=t.m01*r+t.m05*n+t.m13,u=t.m00*e+t.m04*i+t.m12,h=t.m01*e+t.m05*i+t.m13,c=t.m00*r+t.m04*i+t.m12,l=t.m01*r+t.m05*i+t.m13,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),d=Math.min(s,m,h,l),v=Math.max(s,m,h,l);return this.x=f,this.y=d,this.width=y-f,this.height=v-d,this},n.transformMat4ToPoints=function(t,e,n,r,i){var a=this.x,s=this.y,o=a+this.width,m=s+this.height;e.x=t.m00*a+t.m04*s+t.m12,e.y=t.m01*a+t.m05*s+t.m13,i.x=t.m00*o+t.m04*s+t.m12,i.y=t.m01*o+t.m05*s+t.m13,n.x=t.m00*a+t.m04*m+t.m12,n.y=t.m01*a+t.m05*m+t.m13,r.x=t.m00*o+t.m04*m+t.m12,r.y=t.m01*o+t.m05*m+t.m13},h(e,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new li(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new li(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new di(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",get:function(){return this.width},set:function(t){this.width=t}},{key:"w",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ne));function gi(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),new pi(t,e,n,r)}_n.fastDefine("cc.Rect",pi,{x:0,y:0,width:0,height:0}),s.Rect=pi,s.rect=gi;var _i=t("a7",Float64Array),xi=t("a8",function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.createFloatArray=function(t){return new _i(t)},h(e,[{key:"array",get:function(){return this._array}}]),e}(Ne)),bi=Object.freeze({__proto__:null,bits:$n,Vec2:li,v2:fi,Vec3:qr,v3:jr,Vec4:kr,v4:Fr,Quat:$r,quat:ai,Mat3:Xr,Mat4:oi,mat4:hi,AffineTransform:yi,Size:di,size:vi,Rect:pi,rect:gi,Color:Kr,color:Qr,preTransforms:si,HALF_PI:yr,TWO_PI:dr,EPSILON:vr,equals:pr,approx:gr,clamp:_r,clamp01:xr,lerp:br,toRadian:Mr,toDegree:wr,random:Er,randomRange:Ar,randomRangeInt:Nr,pseudoRandom:zr,pseudoRandomRange:Ir,pseudoRandomRangeInt:Tr,nextPow2:Or,repeat:Sr,pingPong:Pr,inverseLerp:Cr,absMaxComponent:Rr,absMax:Ur,enumerableProps:Lr,MATH_FLOAT_ARRAY:_i,MathBase:xi});t("m",bi);var Mi=new qr,wi=new qr,Ei=new qr,Ai=new qr,Ni=new qr,zi=new qr,Ii=new Array(3),Ti=new Array(3);function Oi(t,e){return qr.dot(e.n,t)-e.d}function Si(t,e,n){return qr.copy(t,e),qr.subtract(Ni,n.center,n.halfExtents),qr.add(zi,n.center,n.halfExtents),t.x=t.x<Ni.x?Ni.x:t.x,t.y=t.y<Ni.y?Ni.y:t.y,t.z=t.z<Ni.z?Ni.z:t.z,t.x=t.x>zi.x?zi.x:t.x,t.y=t.y>zi.y?zi.y:t.y,t.z=t.z>zi.z?zi.z:t.z,t}function Pi(t,e,n){qr.set(Mi,n.orientation.m00,n.orientation.m01,n.orientation.m02),qr.set(wi,n.orientation.m03,n.orientation.m04,n.orientation.m05),qr.set(Ei,n.orientation.m06,n.orientation.m07,n.orientation.m08),Ii[0]=Mi,Ii[1]=wi,Ii[2]=Ei,Ti[0]=n.halfExtents.x,Ti[1]=n.halfExtents.y,Ti[2]=n.halfExtents.z,qr.subtract(Ai,e,n.center),qr.set(t,n.center.x,n.center.y,n.center.z);for(var r=0;r<3;r++){var i=qr.dot(Ai,Ii[r]);i>Ti[r]&&(i=Ti[r]),i<-Ti[r]&&(i=-Ti[r]),t.x+=i*Ii[r].x,t.y+=i*Ii[r].y,t.z+=i*Ii[r].z}return t}var Ci=Object.freeze({__proto__:null,point_plane:Oi,pt_point_plane:function(t,e,n){var r=Oi(e,n);return qr.subtract(t,e,qr.multiplyScalar(t,n.n,r))},pt_point_aabb:Si,pt_point_obb:Pi,pt_point_line:function(t,e,n,r){qr.subtract(Mi,n,r);var i=Mi.clone(),a=qr.lengthSqr(i);if(0===a)qr.copy(t,n);else{qr.subtract(Mi,e,n);var s=qr.dot(Mi,i)/a;s<0?qr.copy(t,n):s>1?qr.copy(t,r):qr.scaleAndAdd(t,n,i,s)}}}),Ri={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256,SHAPE_CAPSULE:512,SHAPE_SPLINE:1024},Ui=function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=Ri.SHAPE_LINE,this.s=new qr(t,e,n),this.e=new qr(r,i,a)}return t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.s.x,e.s.y,e.s.z,e.e.x,e.e.y,e.e.z)},t.copy=function(t,e){return qr.copy(t.s,e.s),qr.copy(t.e,e.e),t},t.fromPoints=function(t,e,n){return qr.copy(t.s,e),qr.copy(t.e,n),t},t.set=function(t,e,n,r,i,a,s){return t.s.x=e,t.s.y=n,t.s.z=r,t.e.x=i,t.e.y=a,t.e.z=s,t},t.len=function(t){return qr.distance(t.s,t.e)},t.prototype.length=function(){return qr.distance(this.s,this.e)},h(t,[{key:"type",get:function(){return this._type}}]),t}(),Li=t("bw",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=Ri.SHAPE_RAY,this.o=new qr(t,e,n),this.d=new qr(r,i,a)}return t.create=function(e,n,r,i,a,s){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.o.x,e.o.y,e.o.z,e.d.x,e.d.y,e.d.z)},t.copy=function(t,e){return qr.copy(t.o,e.o),qr.copy(t.d,e.d),t},t.fromPoints=function(t,e,n){return qr.copy(t.o,e),qr.normalize(t.d,qr.subtract(t.d,n,e)),t},t.set=function(t,e,n,r,i,a,s){return t.o.x=e,t.o.y=n,t.o.z=r,t.d.x=i,t.d.y=a,t.d.z=s,t},t.prototype.computeHit=function(t,e){qr.normalize(t,this.d),qr.scaleAndAdd(t,this.o,t,e)},h(t,[{key:"type",get:function(){return this._type}}]),t}()),ki=new qr,Fi=new qr,Bi=new qr,Di=new qr;function Hi(t){return Math.max(Math.max(t.x,t.y),t.z)}var qi,ji,Vi,Gi,Wi,Ki=t("bB",function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this._center=new qr(0,0,0),this._radius=0,this._type=void 0,this._type=Ri.SHAPE_SPHERE,this._center=new qr(t,e,n),this._radius=r}t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.radius)},t.copy=function(t,e){return qr.copy(t.center,e.center),t.radius=e.radius,t},t.fromPoints=function(t,e,n){return qr.multiplyScalar(t.center,qr.add(ki,e,n),.5),t.radius=.5*qr.subtract(ki,n,e).length(),t},t.set=function(t,e,n,r,i){return t.center.x=e,t.center.y=n,t.center.z=r,t.radius=i,t};var e=t.prototype;return e.destroy=function(){},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.getBoundary=function(t,e){qr.set(t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),qr.set(e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},e.transform=function(t,e,n,r,i){qr.transformMat4(i.center,this.center,t),i.radius=this.radius*Hi(r)},e.translateAndRotate=function(t,e,n){qr.transformMat4(n.center,this.center,t)},e.setScale=function(t,e){e.radius=this.radius*Hi(t)},e.mergePoint=function(t){this.radius<0&&(this.center.set(t),this.radius=0),qr.subtract(Fi,t,this.center);var e=Fi.length();if(e>this.radius){var n=.5*(e-this.radius);this.radius+=n,qr.multiplyScalar(Fi,Fi,n/e),qr.add(this.center,this.center,Fi)}},e.mergePoints=function(t){var e=t.length;if(!(e<1)){this.radius=-1;for(var n=0;n<e;n++)this.mergePoint(t[n])}},e.mergeAABB=function(t){t.getBoundary(Bi,Di),this.mergePoint(Bi),this.mergePoint(Di)},h(t,[{key:"center",get:function(){return this._center},set:function(t){this._center=t}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t}},{key:"type",get:function(){return this._type}}]),t}()),Qi=function(t,e){var n=qr.dot(t.d,e.n);if(Math.abs(n)<Number.EPSILON)return 0;var r=-Oi(t.o,e)/n;return r<0?0:r},Yi=(qi=new qr(0,0,0),ji=new qr(0,0,0),Vi=new qr(0,0,0),Gi=new qr(0,0,0),Wi=new qr(0,0,0),function(t,e,n){qr.subtract(qi,e.b,e.a),qr.subtract(ji,e.c,e.a),qr.cross(Vi,t.d,ji);var r=qr.dot(qi,Vi);if(r<Number.EPSILON&&(!n||r>-Number.EPSILON))return 0;var i=1/r;qr.subtract(Gi,t.o,e.a);var a=qr.dot(Gi,Vi)*i;if(a<0||a>1)return 0;qr.cross(Wi,Gi,qi);var s=qr.dot(t.d,Wi)*i;if(s<0||a+s>1)return 0;var o=qr.dot(ji,Wi)*i;return o<0?0:o}),Xi=function(){var t=new qr(0,0,0);return function(e,n){var r=n.radius,i=n.center,a=e.o,s=e.d,o=r*r;qr.subtract(t,i,a);var m=t.lengthSqr(),u=qr.dot(t,s),h=o-(m-u*u);if(h<0)return 0;var c=Math.sqrt(h),l=m<o?u+c:u-c;return l<0?0:l}}(),Zi=function(){var t=new qr,e=new qr;return function(n,r){return qr.subtract(t,r.center,r.halfExtents),qr.add(e,r.center,r.halfExtents),function(t,e,n){var r=t.o,i=t.d,a=1/i.x,s=1/i.y,o=1/i.z,m=(e.x-r.x)*a,u=(n.x-r.x)*a,h=(e.y-r.y)*s,c=(n.y-r.y)*s,l=(e.z-r.z)*o,f=(n.z-r.z)*o,y=Math.max(Math.max(Math.min(m,u),Math.min(h,c)),Math.min(l,f)),d=Math.min(Math.min(Math.max(m,u),Math.max(h,c)),Math.max(l,f));return d<0||y>d?0:y>0?y:d}(n,t,e)}}(),Ji=function(){var t=new qr,e=new qr,n=new qr,r=new qr,i=new qr,a=new qr,s=new qr,o=new Array(3),m=new Array(3),u=new Array(3),h=new Array(6);return function(c,l){o[0]=l.halfExtents.x,o[1]=l.halfExtents.y,o[2]=l.halfExtents.z,t=l.center,e=c.o,n=c.d,qr.set(r,l.orientation.m00,l.orientation.m01,l.orientation.m02),qr.set(i,l.orientation.m03,l.orientation.m04,l.orientation.m05),qr.set(a,l.orientation.m06,l.orientation.m07,l.orientation.m08),qr.subtract(s,t,e),m[0]=qr.dot(r,n),m[1]=qr.dot(i,n),m[2]=qr.dot(a,n),u[0]=qr.dot(r,s),u[1]=qr.dot(i,s),u[2]=qr.dot(a,s);for(var f=0;f<3;++f){if(0===m[f]){if(-u[f]-o[f]>0||-u[f]+o[f]<0)return 0;m[f]=1e-7}h[2*f+0]=(u[f]+o[f])/m[f],h[2*f+1]=(u[f]-o[f])/m[f]}var y=Math.max(Math.max(Math.min(h[0],h[1]),Math.min(h[2],h[3])),Math.min(h[4],h[5])),d=Math.min(Math.min(Math.max(h[0],h[1]),Math.max(h[2],h[3])),Math.max(h[4],h[5]));return d<0||y>d?0:y>0?y:d}}(),$i=function(){var t=new qr,e=new qr,n=new qr,r=new qr,i=new qr,a=new qr,s=new qr,o=new Ki;return function(m,u){var h=u.ellipseCenter0,c=u.ellipseCenter1,l=qr.subtract(e,c,h);if(l.length()<vr)return o.radius=u.radius,o.center.set(u.ellipseCenter0),La.raySphere(m,o);var f=m.o,y=qr.subtract(n,f,h),d=qr.normalize(t,m.d),v=qr.cross(r,d,l),p=v.lengthSqr();if(0===p){o.radius=u.radius;var g=qr.subtract(i,c,f);return y.lengthSqr()<g.lengthSqr()?o.center.set(h):o.center.set(c),La.raySphere(m,o)}var _=qr.cross(i,y,l),x=l.lengthSqr(),b=2*qr.dot(v,_),M=u.radius*u.radius,w=b*b-4*p*(_.lengthSqr()-M*x);if(w<0)return 0;var E=(-b-Math.sqrt(w))/(2*p);if(E<0){o.radius=u.radius;var A=qr.subtract(a,c,f);return y.lengthSqr()<A.lengthSqr()?o.center.set(u.ellipseCenter0):o.center.set(u.ellipseCenter1),La.raySphere(m,o)}var N=qr.scaleAndAdd(a,m.o,d,E),z=qr.subtract(s,N,h),I=qr.dot(z,l)/x;return I>=0&&I<=1?E:I<0?(o.radius=u.radius,o.center.set(u.ellipseCenter0),La.raySphere(m,o)):I>1?(o.radius=u.radius,o.center.set(u.ellipseCenter1),La.raySphere(m,o)):0}}(),ta=function(){var t=new qr(0,0,0);return function(e,n){qr.subtract(t,e.e,e.s);var r=-Oi(e.s,n)/qr.dot(t,n.n);return r<0||r>1?0:r}}(),ea=function(){var t=new qr(0,0,0),e=new qr(0,0,0),n=new qr(0,0,0),r=new qr(0,0,0),i=new qr(0,0,0),a=new qr(0,0,0);return function(s,o,m){qr.subtract(t,o.b,o.a),qr.subtract(e,o.c,o.a),qr.subtract(n,s.s,s.e),qr.cross(i,t,e);var u=qr.dot(n,i);if(u<=0)return 0;qr.subtract(r,s.s,o.a);var h=qr.dot(r,i);if(h<0||h>u)return 0;qr.cross(a,n,r);var c=qr.dot(e,a);if(c<0||c>u)return 0;var l=-qr.dot(t,a);if(l<0||c+l>u)return 0;if(m){var f=1/u,y=1-(c*=f)-(l*=f);qr.set(m,o.a.x*y+o.b.x*c+o.c.x*l,o.a.y*y+o.b.y*c+o.c.y*l,o.a.z*y+o.b.z*c+o.c.z*l)}return 1}}(),na=new Li;function ra(t,e){na.o.set(t.s),qr.subtract(na.d,t.e,t.s),na.d.normalize();var n=Zi(na,e);return n<=t.length()?n:0}function ia(t,e){na.o.set(t.s),qr.subtract(na.d,t.e,t.s),na.d.normalize();var n=Ji(na,e);return n<=t.length()?n:0}function aa(t,e){na.o.set(t.s),qr.subtract(na.d,t.e,t.s),na.d.normalize();var n=Xi(na,e);return n<=t.length()?n:0}var sa,oa,ma,ua,ha=(sa=new qr,oa=new qr,ma=new qr,ua=new qr,function(t,e){return qr.subtract(sa,t.center,t.halfExtents),qr.add(oa,t.center,t.halfExtents),qr.subtract(ma,e.center,e.halfExtents),qr.add(ua,e.center,e.halfExtents),sa.x<=ua.x&&oa.x>=ma.x&&sa.y<=ua.y&&oa.y>=ma.y&&sa.z<=ua.z&&oa.z>=ma.z});function ca(t,e,n,r,i,a){qr.set(a[0],t.x+n.x*e.x+r.x*e.y+i.x*e.z,t.y+n.y*e.x+r.y*e.y+i.y*e.z,t.z+n.z*e.x+r.z*e.y+i.z*e.z),qr.set(a[1],t.x-n.x*e.x+r.x*e.y+i.x*e.z,t.y-n.y*e.x+r.y*e.y+i.y*e.z,t.z-n.z*e.x+r.z*e.y+i.z*e.z),qr.set(a[2],t.x+n.x*e.x-r.x*e.y+i.x*e.z,t.y+n.y*e.x-r.y*e.y+i.y*e.z,t.z+n.z*e.x-r.z*e.y+i.z*e.z),qr.set(a[3],t.x+n.x*e.x+r.x*e.y-i.x*e.z,t.y+n.y*e.x+r.y*e.y-i.y*e.z,t.z+n.z*e.x+r.z*e.y-i.z*e.z),qr.set(a[4],t.x-n.x*e.x-r.x*e.y-i.x*e.z,t.y-n.y*e.x-r.y*e.y-i.y*e.z,t.z-n.z*e.x-r.z*e.y-i.z*e.z),qr.set(a[5],t.x+n.x*e.x-r.x*e.y-i.x*e.z,t.y+n.y*e.x-r.y*e.y-i.y*e.z,t.z+n.z*e.x-r.z*e.y-i.z*e.z),qr.set(a[6],t.x-n.x*e.x+r.x*e.y-i.x*e.z,t.y-n.y*e.x+r.y*e.y-i.y*e.z,t.z-n.z*e.x+r.z*e.y-i.z*e.z),qr.set(a[7],t.x-n.x*e.x-r.x*e.y+i.x*e.z,t.y-n.y*e.x-r.y*e.y+i.y*e.z,t.z-n.z*e.x-r.z*e.y+i.z*e.z)}function la(t,e){for(var n=qr.dot(e,t[0]),r=n,i=1;i<8;++i){var a=qr.dot(e,t[i]);n=a<n?a:n,r=a>r?a:r}return[n,r]}var fa,ya,da,va,pa,ga=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new qr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new qr(0,0,0),r[i]=new qr(0,0,0);var a=new qr,s=new qr;return function(e,i){qr.set(t[0],1,0,0),qr.set(t[1],0,1,0),qr.set(t[2],0,0,1),qr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),qr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),qr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var o=0;o<3;++o)qr.cross(t[6+3*o],t[o],t[3]),qr.cross(t[7+3*o],t[o],t[4]),qr.cross(t[7+3*o],t[o],t[5]);qr.subtract(a,e.center,e.halfExtents),qr.add(s,e.center,e.halfExtents),function(t,e,n){qr.set(n[0],t.x,e.y,e.z),qr.set(n[1],t.x,e.y,t.z),qr.set(n[2],t.x,t.y,e.z),qr.set(n[3],t.x,t.y,t.z),qr.set(n[4],e.x,e.y,e.z),qr.set(n[5],e.x,e.y,t.z),qr.set(n[6],e.x,t.y,e.z),qr.set(n[7],e.x,t.y,t.z)}(a,s,n),ca(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var m=0;m<15;++m){var u=la(n,t[m]),h=la(r,t[m]);if(h[0]>u[1]||u[0]>h[1])return 0}return 1}}(),_a=function(t,e){var n=t.halfExtents.x*Math.abs(e.n.x)+t.halfExtents.y*Math.abs(e.n.y)+t.halfExtents.z*Math.abs(e.n.z),r=qr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1},xa=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===_a(t,e.planes[n]))return 0;return 1},ba=function(){for(var t=new Array(8),e=0,n=0,r=0;r<t.length;r++)t[r]=new qr(0,0,0);return function(r,i){for(var a=0,s=!1,o=0;o<i.planes.length;o++){if(-1===(a=_a(r,i.planes[o])))return 0;1===a&&(s=!0)}if(!s)return 1;for(var m=0;m<i.vertices.length;m++)qr.subtract(t[m],i.vertices[m],r.center);e=0,n=0;for(var u=0;u<i.vertices.length;u++)t[u].x>r.halfExtents.x?e++:t[u].x<-r.halfExtents.x&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var h=0;h<i.vertices.length;h++)t[h].y>r.halfExtents.y?e++:t[h].y<-r.halfExtents.y&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var c=0;c<i.vertices.length;c++)t[c].z>r.halfExtents.z?e++:t[c].z<-r.halfExtents.z&&n++;return e===i.vertices.length||n===i.vertices.length?0:1}}(),Ma=(fa=new qr(0,0,0),ya=new Xr,function(t,e){return qr.subtract(fa,e,t.center),qr.transformMat3(fa,fa,Xr.transpose(ya,t.orientation)),n=fa,r=t.halfExtents,Math.abs(n.x)<r.x&&Math.abs(n.y)<r.y&&Math.abs(n.z)<r.z;var n,r}),wa=(da=function(t,e,n,r){return Math.abs(t.x*e+t.y*n+t.z*r)},function(t,e){var n=t.halfExtents.x*da(e.n,t.orientation.m00,t.orientation.m01,t.orientation.m02)+t.halfExtents.y*da(e.n,t.orientation.m03,t.orientation.m04,t.orientation.m05)+t.halfExtents.z*da(e.n,t.orientation.m06,t.orientation.m07,t.orientation.m08),r=qr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1}),Ea=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===wa(t,e.planes[n]))return 0;return 1},Aa=function(){for(var t=new Array(8),e=0,n=0,r=0,i=0;i<t.length;i++)t[i]=new qr(0,0,0);var a=function(t,e,n,r){return t.x*e+t.y*n+t.z*r};return function(i,s){for(var o=0,m=!1,u=0;u<s.planes.length;u++){if(-1===(o=wa(i,s.planes[u])))return 0;1===o&&(m=!0)}if(!m)return 1;for(var h=0;h<s.vertices.length;h++)qr.subtract(t[h],s.vertices[h],i.center);n=0,r=0;for(var c=0;c<s.vertices.length;c++)(e=a(t[c],i.orientation.m00,i.orientation.m01,i.orientation.m02))>i.halfExtents.x?n++:e<-i.halfExtents.x&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var l=0;l<s.vertices.length;l++)(e=a(t[l],i.orientation.m03,i.orientation.m04,i.orientation.m05))>i.halfExtents.y?n++:e<-i.halfExtents.y&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var f=0;f<s.vertices.length;f++)(e=a(t[f],i.orientation.m06,i.orientation.m07,i.orientation.m08))>i.halfExtents.z?n++:e<-i.halfExtents.z&&r++;return n===s.vertices.length||r===s.vertices.length?0:1}}(),Na=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new qr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new qr(0,0,0),r[i]=new qr(0,0,0);return function(e,i){qr.set(t[0],e.orientation.m00,e.orientation.m01,e.orientation.m02),qr.set(t[1],e.orientation.m03,e.orientation.m04,e.orientation.m05),qr.set(t[2],e.orientation.m06,e.orientation.m07,e.orientation.m08),qr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),qr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),qr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var a=0;a<3;++a)qr.cross(t[6+3*a],t[a],t[3]),qr.cross(t[7+3*a],t[a],t[4]),qr.cross(t[8+3*a],t[a],t[5]);ca(e.center,e.halfExtents,t[0],t[1],t[2],n),ca(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var s=0;s<15;++s){var o=la(n,t[s]),m=la(r,t[s]);if(m[0]>o[1]||o[0]>m[1])return 0}return 1}}(),za=function(){for(var t=new Ki,e=new qr,n=new qr,r=new qr,i=new Array(8),a=0;a<8;a++)i[a]=new qr;for(var s=new Array(8),o=0;o<8;o++)s[o]=new qr;return function(a,o){if(0===qr.squaredDistance(o.ellipseCenter0,o.ellipseCenter1))return t.radius=o.radius,t.center.set(o.ellipseCenter0),La.sphereOBB(t,a);e.x=a.orientation.m00,e.y=a.orientation.m01,e.z=a.orientation.m02,n.x=a.orientation.m03,n.y=a.orientation.m04,n.z=a.orientation.m05,r.x=a.orientation.m06,r.y=a.orientation.m07,r.z=a.orientation.m08,ca(a.center,a.halfExtents,e,n,r,i);var m=s,u=qr.copy(m[0],e),h=qr.copy(m[1],n),c=qr.copy(m[2],r);qr.subtract(m[3],o.center,a.center).normalize();var l=qr.subtract(m[4],o.ellipseCenter0,o.ellipseCenter1);l.normalize(),qr.cross(m[5],u,l),qr.cross(m[6],h,l),qr.cross(m[7],c,l);for(var f=0;f<8;++f){var y=la(i,m[f]),d=qr.dot(m[f],o.ellipseCenter0),v=qr.dot(m[f],o.ellipseCenter1),p=Math.max(d,v),g=Math.min(d,v)-o.radius,_=p+o.radius;if(g>y[1]||y[0]>_)return 0}return 1}}(),Ia=function(t,e){var n=qr.dot(e.n,t.center),r=t.radius*e.n.length();return n+r<e.d?-1:n-r>e.d?0:1},Ta=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===Ia(t,e.planes[n]))return 0;return 1},Oa=(va=new qr(0,0,0),pa=[1,-1,1,-1,1,-1],function(t,e){for(var n=0;n<6;n++){var r=e.planes[n],i=t.radius,a=t.center,s=r.n,o=r.d,m=qr.dot(s,a);if(m+i<o)return 0;if(!(m-i>o)){qr.add(va,a,qr.multiplyScalar(va,s,i));for(var u=0;u<6;u++)if(u!==n&&u!==n+pa[n]){var h=e.planes[u];if(qr.dot(h.n,va)<h.d)return 0}}}return 1}),Sa=function(t,e){var n=t.radius+e.radius;return qr.squaredDistance(t.center,e.center)<n*n},Pa=function(){var t=new qr;return function(e,n){return Si(t,e.center,n),qr.squaredDistance(e.center,t)<e.radius*e.radius}}(),Ca=function(){var t=new qr;return function(e,n){return Pi(t,e.center,n),qr.squaredDistance(e.center,t)<e.radius*e.radius}}(),Ra=function(){var t=new qr,e=new qr;return function(n,r){var i=n.radius+r.radius,a=i*i,s=qr.squaredDistance(r.ellipseCenter0,r.ellipseCenter1);if(0===s)return qr.squaredDistance(n.center,r.center)<a;qr.subtract(t,n.center,r.ellipseCenter0),qr.subtract(e,r.ellipseCenter1,r.ellipseCenter0);var o=qr.dot(t,e)/s;return o<0?qr.squaredDistance(n.center,r.ellipseCenter0)<a:o>1?qr.squaredDistance(n.center,r.ellipseCenter1)<a:(qr.scaleAndAdd(t,r.ellipseCenter0,e,o),qr.squaredDistance(n.center,t)<a)}}(),Ua=function(){var t=new qr,e=new qr,n=new qr,r=new qr,i=new qr,a=new qr;return function(s,o){var m,u,h=qr.subtract(t,s.ellipseCenter1,s.ellipseCenter0),c=qr.subtract(e,o.ellipseCenter1,o.ellipseCenter0),l=qr.subtract(n,s.ellipseCenter0,o.ellipseCenter0),f=qr.dot(h,h),y=qr.dot(h,c),d=qr.dot(c,c),v=qr.dot(h,l),p=qr.dot(c,l),g=f*d-y*y,_=g,x=g;g<vr?(m=0,_=1,u=p,x=d):(u=f*p-y*v,(m=y*p-d*v)<0?(m=0,u=p,x=d):m>_&&(m=_,u=p+y,x=d)),u<0?(u=0,-v<0?m=0:-v>f?m=_:(m=-v,_=f)):u>x&&(u=x,-v+y<0?m=0:-v+y>f?m=_:(m=-v+y,_=f));var b=Math.abs(m)<vr?0:m/_,M=Math.abs(u)<vr?0:u/x,w=r;w.set(l),w.add(qr.multiplyScalar(i,h,b)),w.subtract(qr.multiplyScalar(a,c,M));var E=s.radius+o.radius;return w.lengthSqr()<E*E}}(),La=t("bC",{raySphere:Xi,rayAABB:Zi,rayOBB:Ji,rayPlane:Qi,rayTriangle:Yi,rayCapsule:$i,raySubMesh:null,rayMesh:null,rayModel:null,lineSphere:aa,lineAABB:ra,lineOBB:ia,linePlane:ta,lineTriangle:ea,sphereWithSphere:Sa,sphereAABB:Pa,sphereOBB:Ca,spherePlane:Ia,sphereFrustum:Ta,sphereFrustumAccurate:Oa,sphereCapsule:Ra,aabbWithAABB:ha,aabbWithOBB:ga,aabbPlane:_a,aabbFrustum:xa,aabbFrustumAccurate:ba,obbWithOBB:Na,obbPlane:wa,obbFrustum:Ea,obbFrustumAccurate:Aa,obbPoint:Ma,obbCapsule:za,aabbFrustumCompletelyInside:function(t,e){for(var n=0;n<e.planes.length;n++)if(0!==_a(t,e.planes[n]))return 0;return 1},capsuleWithCapsule:Ua,resolve:function(t,e,n){void 0===n&&(n=null);var r=t._type,i=e._type,a=this[r|i];return r<i?a(t,e,n):a(e,t,n)}});La[Ri.SHAPE_RAY|Ri.SHAPE_SPHERE]=Xi,La[Ri.SHAPE_RAY|Ri.SHAPE_AABB]=Zi,La[Ri.SHAPE_RAY|Ri.SHAPE_OBB]=Ji,La[Ri.SHAPE_RAY|Ri.SHAPE_PLANE]=Qi,La[Ri.SHAPE_RAY|Ri.SHAPE_TRIANGLE]=Yi,La[Ri.SHAPE_RAY|Ri.SHAPE_CAPSULE]=$i,La[Ri.SHAPE_LINE|Ri.SHAPE_SPHERE]=aa,La[Ri.SHAPE_LINE|Ri.SHAPE_AABB]=ra,La[Ri.SHAPE_LINE|Ri.SHAPE_OBB]=ia,La[Ri.SHAPE_LINE|Ri.SHAPE_PLANE]=ta,La[Ri.SHAPE_LINE|Ri.SHAPE_TRIANGLE]=ea,La[Ri.SHAPE_SPHERE]=Sa,La[Ri.SHAPE_SPHERE|Ri.SHAPE_AABB]=Pa,La[Ri.SHAPE_SPHERE|Ri.SHAPE_OBB]=Ca,La[Ri.SHAPE_SPHERE|Ri.SHAPE_PLANE]=Ia,La[Ri.SHAPE_SPHERE|Ri.SHAPE_FRUSTUM]=Ta,La[Ri.SHAPE_SPHERE|Ri.SHAPE_FRUSTUM_ACCURATE]=Oa,La[Ri.SHAPE_SPHERE|Ri.SHAPE_CAPSULE]=Ra,La[Ri.SHAPE_AABB]=ha,La[Ri.SHAPE_AABB|Ri.SHAPE_OBB]=ga,La[Ri.SHAPE_AABB|Ri.SHAPE_PLANE]=_a,La[Ri.SHAPE_AABB|Ri.SHAPE_FRUSTUM]=xa,La[Ri.SHAPE_AABB|Ri.SHAPE_FRUSTUM_ACCURATE]=ba,La[Ri.SHAPE_OBB]=Na,La[Ri.SHAPE_OBB|Ri.SHAPE_PLANE]=wa,La[Ri.SHAPE_OBB|Ri.SHAPE_FRUSTUM]=Ea,La[Ri.SHAPE_OBB|Ri.SHAPE_FRUSTUM_ACCURATE]=Aa,La[Ri.SHAPE_OBB|Ri.SHAPE_CAPSULE]=za,La[Ri.SHAPE_CAPSULE]=Ua,tr(Ui.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),er(La,"intersect",[{name:"line_quad"}]);var ka=new qr(0,0,0),Fa=new qr(0,0,0),Ba=s.mat4(),Da=s.v4(),Ha=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),this.n=void 0,this._type=Ri.SHAPE_PLANE,this.n=new qr(t,e,n),this.d=r}return t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.n.x,e.n.y,e.n.z,e.d)},t.copy=function(t,e){return qr.copy(t.n,e.n),t.d=e.d,t},t.fromPoints=function(t,e,n,r){return qr.subtract(ka,n,e),qr.subtract(Fa,r,e),qr.normalize(t.n,qr.cross(t.n,ka,Fa)),t.d=qr.dot(t.n,e),t},t.set=function(t,e,n,r,i){return t.n.x=e,t.n.y=n,t.n.z=r,t.d=i,t},t.fromNormalAndPoint=function(t,e,n){return qr.copy(t.n,e),t.d=qr.dot(e,n),t},t.normalize=function(t,e){var n=e.n.length();return qr.normalize(t.n,e.n),n>0&&(t.d=e.d/n),t},t.prototype.transform=function(t){oi.invert(Ba,t),oi.transpose(Ba,Ba),kr.set(Da,this.n.x,this.n.y,this.n.z,-this.d),kr.transformMat4(Da,Da,Ba),qr.set(this.n,Da.x,Da.y,Da.z),this.d=-Da.w},h(t,[{key:"type",get:function(){return this._type}},{key:"x",get:function(){return this.n.x},set:function(t){this.n.x=t}},{key:"y",get:function(){return this.n.y},set:function(t){this.n.y=t}},{key:"z",get:function(){return this.n.z},set:function(t){this.n.z=t}},{key:"w",get:function(){return this.d},set:function(t){this.d=t}}]),t}(),qa=t("co",function(){function t(t,e,n,r,i,a,s,o,m){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=1),void 0===m&&(m=0),this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this._type=Ri.SHAPE_TRIANGLE,this.a=new qr(t,e,n),this.b=new qr(r,i,a),this.c=new qr(s,o,m)}return t.create=function(e,n,r,i,a,s,o,m,u){return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),new t(e,n,r,i,a,s,o,m,u)},t.clone=function(e){return new t(e.a.x,e.a.y,e.a.z,e.b.x,e.b.y,e.b.z,e.c.x,e.c.y,e.c.z)},t.copy=function(t,e){return qr.copy(t.a,e.a),qr.copy(t.b,e.b),qr.copy(t.c,e.c),t},t.fromPoints=function(t,e,n,r){return qr.copy(t.a,e),qr.copy(t.b,n),qr.copy(t.c,r),t},t.set=function(t,e,n,r,i,a,s,o,m,u){return t.a.x=e,t.a.y=n,t.a.z=r,t.b.x=i,t.b.y=a,t.b.z=s,t.c.x=o,t.c.y=m,t.c.z=u,t},h(t,[{key:"type",get:function(){return this._type}}]),t}()),ja=new qr,Va=new qr,Ga=new qr,Wa=new qr,Ka=new Xr,Qa=function(t,e,n){Ka.m00=Math.abs(n.m00),Ka.m01=Math.abs(n.m01),Ka.m02=Math.abs(n.m02),Ka.m03=Math.abs(n.m04),Ka.m04=Math.abs(n.m05),Ka.m05=Math.abs(n.m06),Ka.m06=Math.abs(n.m08),Ka.m07=Math.abs(n.m09),Ka.m08=Math.abs(n.m10),qr.transformMat3(t,e,Ka)},Ya=t("bz",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=Ri.SHAPE_AABB,this.center=new qr(t,e,n),this.halfExtents=new qr(r,i,a)}t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z)},t.copy=function(t,e){return qr.copy(t.center,e.center),qr.copy(t.halfExtents,e.halfExtents),t},t.fromPoints=function(t,e,n){return qr.add(ja,n,e),qr.subtract(Va,n,e),qr.multiplyScalar(t.center,ja,.5),qr.multiplyScalar(t.halfExtents,Va,.5),t},t.set=function(t,e,n,r,i,a,s){return t.center.set(e,n,r),t.halfExtents.set(i,a,s),t},t.merge=function(e,n,r){return qr.subtract(ja,n.center,n.halfExtents),qr.subtract(Va,r.center,r.halfExtents),qr.add(Ga,n.center,n.halfExtents),qr.add(Wa,r.center,r.halfExtents),qr.max(Wa,Ga,Wa),qr.min(Ga,ja,Va),t.fromPoints(e,Ga,Wa)},t.toBoundingSphere=function(t,e){return t.center.set(e.center),t.radius=e.halfExtents.length(),t},t.transform=function(t,e,n){return qr.transformMat4(t.center,e.center,n),Qa(t.halfExtents,e.halfExtents,n),t};var e=t.prototype;return e.getBoundary=function(t,e){qr.subtract(t,this.center,this.halfExtents),qr.add(e,this.center,this.halfExtents)},e.transform=function(t,e,n,r,i){qr.transformMat4(i.center,this.center,t),Qa(i.halfExtents,this.halfExtents,t)},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.mergePoint=function(t){this.getBoundary(ja,Va),t.x<ja.x&&(ja.x=t.x),t.y<ja.y&&(ja.y=t.y),t.z<ja.z&&(ja.z=t.z),t.x>Va.x&&(Va.x=t.x),t.y>Va.y&&(Va.y=t.y),t.z>Va.z&&(Va.z=t.z),qr.add(Ga,ja,Va),this.center.set(qr.multiplyScalar(Ga,Ga,.5)),this.halfExtents.set(Va.x-Ga.x,Va.y-Ga.y,Va.z-Ga.z)},e.mergePoints=function(t){if(!(t.length<1))for(var e=0;e<t.length;e++)this.mergePoint(t[e])},e.mergeFrustum=function(t){this.mergePoints(t.vertices)},h(t,[{key:"type",get:function(){return this._type}}]),t}()),Xa=t("cQ",function(){function t(t,e,n){void 0===t&&(t=.5),void 0===e&&(e=.5),void 0===n&&(n=1),this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=Ri.SHAPE_CAPSULE,this.radius=t,this.halfHeight=e,this.axis=n,this.center=new qr,this.rotation=new $r,this.ellipseCenter0=new qr(0,e,0),this.ellipseCenter1=new qr(0,-e,0),this.updateCache()}var e=t.prototype;return e.transform=function(t,e,n,r,i){var a=r,s=Rr(a);i.radius=this.radius*Math.abs(s);var o=(this.halfHeight+this.radius)*Math.abs(a.y)-i.radius;o<0&&(o=0),i.halfHeight=o,qr.transformMat4(i.center,this.center,t),$r.multiply(i.rotation,this.rotation,n),i.updateCache()},e.updateCache=function(){this.updateLocalCenter(),qr.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),qr.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)},e.updateLocalCenter=function(){var t=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(t,0,0),this.ellipseCenter1.set(-t,0,0);break;case 1:this.ellipseCenter0.set(0,t,0),this.ellipseCenter1.set(0,-t,0);break;case 2:this.ellipseCenter0.set(0,0,t),this.ellipseCenter1.set(0,0,-t)}},h(t,[{key:"type",get:function(){return this._type}}]),t}()),Za=new Array(8);Za[0]=new qr(1,1,1),Za[1]=new qr(-1,1,1),Za[2]=new qr(-1,-1,1),Za[3]=new qr(1,-1,1),Za[4]=new qr(1,1,-1),Za[5]=new qr(-1,1,-1),Za[6]=new qr(-1,-1,-1),Za[7]=new qr(1,-1,-1);var Ja,$a=new qr,ts=new qr,es=new qr,ns=t("by",function(){e.createOrthographic=function(t,e,n,r,i,a){var s=e/2,o=n/2;qr.set(es,s,o,-r),qr.transformMat4(t.vertices[0],es,a),qr.set(es,-s,o,-r),qr.transformMat4(t.vertices[1],es,a),qr.set(es,-s,-o,-r),qr.transformMat4(t.vertices[2],es,a),qr.set(es,s,-o,-r),qr.transformMat4(t.vertices[3],es,a),qr.set(es,s,o,-i),qr.transformMat4(t.vertices[4],es,a),qr.set(es,-s,o,-i),qr.transformMat4(t.vertices[5],es,a),qr.set(es,-s,-o,-i),qr.transformMat4(t.vertices[6],es,a),qr.set(es,s,-o,-i),qr.transformMat4(t.vertices[7],es,a),t.updatePlanes()},e.createOrtho=function(t,n,r,i,a,s){return e.createOrthographic(t,n,r,i,a,s)},e.createPerspective=function(t,e,n,r,i,a){var s=Math.tan(.5*n),o=s*e;$a.set(r*o,r*s,r),ts.set(i*o,i*s,i);var m=t.vertices;es.set($a.x,$a.y,-$a.z),qr.transformMat4(m[0],es,a),es.set(-$a.x,$a.y,-$a.z),qr.transformMat4(m[1],es,a),es.set(-$a.x,-$a.y,-$a.z),qr.transformMat4(m[2],es,a),es.set($a.x,-$a.y,-$a.z),qr.transformMat4(m[3],es,a),es.set(ts.x,ts.y,-ts.z),qr.transformMat4(m[4],es,a),es.set(-ts.x,ts.y,-ts.z),qr.transformMat4(m[5],es,a),es.set(-ts.x,-ts.y,-ts.z),qr.transformMat4(m[6],es,a),es.set(ts.x,-ts.y,-ts.z),qr.transformMat4(m[7],es,a),t.updatePlanes()},e.createFromAABB=function(t,e){var n=new qr,r=new qr;return qr.subtract(n,e.center,e.halfExtents),qr.add(r,e.center,e.halfExtents),t.vertices[0].set(r.x,r.y,-n.z),t.vertices[1].set(n.x,r.y,-n.z),t.vertices[2].set(n.x,n.y,-n.z),t.vertices[3].set(r.x,n.y,-n.z),t.vertices[4].set(r.x,r.y,-r.z),t.vertices[5].set(n.x,r.y,-r.z),t.vertices[6].set(n.x,n.y,-r.z),t.vertices[7].set(r.x,n.y,-r.z),t.updatePlanes(),t};var t=e.prototype;function e(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=Ri.SHAPE_FRUSTUM,this.planes=new Array(6);for(var t=0;t<6;++t)this.planes[t]=Ha.create(0,0,0,0);this.vertices=new Array(8);for(var e=0;e<8;++e)this.vertices[e]=new qr}return t.split=function(t,n,r,i,a){return e.createPerspective(this,r,i,t,n,a)},e.create=function(){return new e},e.clone=function(t){return e.copy(new e,t)},e.copy=function(t,e){t._type=e.type;for(var n=0;n<6;++n)Ha.copy(t.planes[n],e.planes[n]);for(var r=0;r<8;++r)qr.copy(t.vertices[r],e.vertices[r]);return t},t.update=function(t,e){qr.set(this.planes[0].n,t.m03+t.m00,t.m07+t.m04,t.m11+t.m08),this.planes[0].d=-(t.m15+t.m12),qr.set(this.planes[1].n,t.m03-t.m00,t.m07-t.m04,t.m11-t.m08),this.planes[1].d=-(t.m15-t.m12),qr.set(this.planes[2].n,t.m03+t.m01,t.m07+t.m05,t.m11+t.m09),this.planes[2].d=-(t.m15+t.m13),qr.set(this.planes[3].n,t.m03-t.m01,t.m07-t.m05,t.m11-t.m09),this.planes[3].d=-(t.m15-t.m13),qr.set(this.planes[4].n,t.m03+t.m02,t.m07+t.m06,t.m11+t.m10),this.planes[4].d=-(t.m15+t.m14),qr.set(this.planes[5].n,t.m03-t.m02,t.m07-t.m06,t.m11-t.m10),this.planes[5].d=-(t.m15-t.m14);for(var n=0;n<6;n++){var r=this.planes[n],i=1/r.n.length();qr.multiplyScalar(r.n,r.n,i),r.d*=i}for(var a=0;a<8;a++)qr.transformMat4(this.vertices[a],Za[a],e)},t.transform=function(t){for(var e=0;e<8;e++)qr.transformMat4(this.vertices[e],this.vertices[e],t);this.updatePlanes()},t.zero=function(){for(var t=0;t<8;t++)this.vertices[t].set(0,0,0);for(var e=0;e<6;e++)Ha.set(this.planes[e],0,0,0,0)},t.updatePlanes=function(){Ha.fromPoints(this.planes[0],this.vertices[1],this.vertices[6],this.vertices[5]),Ha.fromPoints(this.planes[1],this.vertices[3],this.vertices[4],this.vertices[7]),Ha.fromPoints(this.planes[2],this.vertices[6],this.vertices[3],this.vertices[7]),Ha.fromPoints(this.planes[3],this.vertices[0],this.vertices[5],this.vertices[4]),Ha.fromPoints(this.planes[4],this.vertices[2],this.vertices[0],this.vertices[3]),Ha.fromPoints(this.planes[5],this.vertices[7],this.vertices[5],this.vertices[6])},h(e,[{key:"accurate",set:function(t){this._type=t?Ri.SHAPE_FRUSTUM_ACCURATE:Ri.SHAPE_FRUSTUM}},{key:"type",get:function(){return this._type}}]),e}()),rs=new qr,is=new qr,as=new Xr,ss=t("cP",function(){function t(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=Ri.SHAPE_OBB,this.center=new qr(t,e,n),this.halfExtents=new qr(r,i,a),this.orientation=new Xr(s,o,m,u,h,c,l,f,y)}t.create=function(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return new t(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z,e.orientation.m00,e.orientation.m01,e.orientation.m02,e.orientation.m03,e.orientation.m04,e.orientation.m05,e.orientation.m06,e.orientation.m07,e.orientation.m08)},t.copy=function(t,e){return qr.copy(t.center,e.center),qr.copy(t.halfExtents,e.halfExtents),Xr.copy(t.orientation,e.orientation),t},t.fromPoints=function(t,e,n){return qr.multiplyScalar(t.center,qr.add(rs,e,n),.5),qr.multiplyScalar(t.halfExtents,qr.subtract(is,n,e),.5),Xr.identity(t.orientation),t},t.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return qr.set(t.center,e,n,r),qr.set(t.halfExtents,i,a,s),Xr.set(t.orientation,o,m,u,h,c,l,f,y,d),t};var e=t.prototype;return e.getBoundary=function(t,e){!function(t,e,n){as.m00=Math.abs(n.m00),as.m01=Math.abs(n.m01),as.m02=Math.abs(n.m02),as.m03=Math.abs(n.m03),as.m04=Math.abs(n.m04),as.m05=Math.abs(n.m05),as.m06=Math.abs(n.m06),as.m07=Math.abs(n.m07),as.m08=Math.abs(n.m08),qr.transformMat3(t,e,as)}(rs,this.halfExtents,this.orientation),qr.subtract(t,this.center,rs),qr.add(e,this.center,rs)},e.transform=function(t,e,n,r,i){qr.transformMat4(i.center,this.center,t),Xr.fromQuat(i.orientation,n),qr.multiply(i.halfExtents,this.halfExtents,r)},e.translateAndRotate=function(t,e,n){qr.transformMat4(n.center,this.center,t),Xr.fromQuat(n.orientation,e)},e.setScale=function(t,e){qr.multiply(e.halfExtents,this.halfExtents,t)},h(t,[{key:"type",get:function(){return this._type}}]),t}());function os(t,e,n){void 0===n&&(n=1e-6);for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(s>e+n)i=a-1;else{if(!(s<e-n))return a;r=a+1}}return~r}Ja=Symbol.iterator;var ms,us,hs,cs=function(){function t(){this._times=[],this._values=[]}var e=t.prototype;return e[Ja]=function(){var t=this,e=0;return{next:function(){if(e>=t._times.length)return{done:!0,value:void 0};var n=[t._times[e],t._values[e]];return++e,{done:!1,value:n}}}},e.keyframes=function(){return this},e.times=function(){return this._times},e.values=function(){return this._values},e.getKeyframeTime=function(t){return this._times[t]},e.getKeyframeValue=function(t){return this._values[t]},e.addKeyFrame=function(t,e){return this._insertNewKeyframe(t,e)},e.removeKeyframe=function(t){this._times.splice(t,1),this._values.splice(t,1)},e.indexOfKeyframe=function(t){return os(this._times,t)},e.updateTime=function(t,e){var n=this._values[t];this.removeKeyframe(t),this._insertNewKeyframe(e,n)},e.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.slice());else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return t[1]})))}},e.clear=function(){this._times.length=0,this._values.length=0},e.searchKeyframe=function(t){return os(this._times,t)},e.setKeyframes=function(t,e){t.length,e.length,function(t){t.every((function(t,e,n){return 0===e||t>n[e-1]||gr(t,n[e-1],1e-6)}))}(t),this._times=t,this._values=e},e._insertNewKeyframe=function(t,e){var n=this._times,r=this._values,i=n.length,a=os(n,t);if(a>=0)return a;var s=~a;return 0===s?(n.unshift(t),r.unshift(e)):s===i?(n.push(t),r.push(e)):(n.splice(s-1,0,t),r.splice(s-1,0,e)),s},h(t,[{key:"keyFramesCount",get:function(){return this._times.length}},{key:"rangeMin",get:function(){return this._times[0]}},{key:"rangeMax",get:function(){return this._times[this._values.length-1]}}]),t}();function ls(t){return t>-1e-9&&t<1e-9}function fs(t,e,n,r){return n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),r)}_n.fastDefine("cc.KeyframeCurve",cs,{_times:[],_values:[]}),t("aR",ms),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.CUBIC=2]="CUBIC"}(ms||t("aR",ms={})),t("aS",us),function(t){t[t.LINEAR=0]="LINEAR",t[t.CLAMP=1]="CLAMP",t[t.LOOP=2]="LOOP",t[t.PING_PONG=3]="PING_PONG"}(us||t("aS",us={})),t("aT",hs),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTH=3]="BOTH"}(hs||t("aT",hs={}));var ys=function(){},ds=function(){return ys},vs=ps((function(){}));function ps(t){return function(e){return"function"==typeof e?t(e):function(n){return t(n,e)}}}function gs(t){return function(e){return function(n){!function(t,e,n){var r=xs(t);if(r){var i=bs(r,"proto");bs(i,"editor")[e]=n}}(n,t,e)}}}var _s="__ccclassCache__";function xs(t){return bs(t,_s)}function bs(t,e){return t[e]||(t[e]={})}var Ms=t("bD",ps((function(t,e){var n=ee(t);n===Object&&(n=null);var r={name:e,extends:n,ctor:t},i=t[_s];if(i){var a=i.proto;a&&$t(r,a),t[_s]=void 0}return _n(r)}))),ws=t("cD",gs("requireComponent")),Es=t("ct",gs("executionOrder")),As=t("cr",vs);function Ns(t,e,n){var r=null;function i(t,e,n){!function(t,e,n,r,i,a){var s,o=a&&"function"!=typeof a&&(a.get||a.set);i&&(s=mn(i,o));var m=$t(e,s||i||{});o?(a.get&&(m.get=a.get),a.set&&(m.set=a.set)):Ts(t,m,n,r,a)}(function(t){return xs(t.constructor)}(t),function(t,e){var n,r,i=bs(xs(t.constructor),"proto"),a=bs(i,"properties");return null!==(r=a[n=e])&&void 0!==r?r:a[n]={}}(t,e),t.constructor,e,r,n)}return void 0===t?Ns({type:void 0}):void 0===e?(r=t,i):void i(t,e,n)}function zs(t){var e;try{e=t()}catch(e){return t}return"object"!=typeof e||null===e?e:t}function Is(t,e,n){var r,i,a=xs(t.constructor),s=bs(a,"proto"),o=bs(s,"properties"),m=null!==(i=o[r=e])&&void 0!==i?i:o[r]={};return m.__internalFlags|=un.STANDALONE,n&&"function"!=typeof n&&(n.get||n.set)?(n.get&&(m.get=n.get),n.set&&(m.set=n.set)):Ts(a,m,t.constructor,e,n),m}function Ts(t,e,n,r,i){if(void 0!==i)"function"==typeof i?e.default=zs(i):null===i||i.initializer&&(e.default=zs(i.initializer));else{var a=t.default||(t.default=function(t){var e;try{e=new t}catch(t){return{}}return e}(n));a.hasOwnProperty(r)&&(e.default=a[r])}}var Os=Symbol("cc:SerializationMetadata"),Ss=t("bg",(function(t,e,n){Cs(Is(t,e,n))}));function Ps(t){return function(e,n,r){var i=Is(e,n,r);i.formerlySerializedAs=t,Cs(i)}}function Cs(t){t.__internalFlags|=un.IMPLICIT_SERIALIZABLE}t("c2",(function(t,e,n){var r=Is(t,e,n);r.editorOnly=!0,Cs(r)}));var Rs=t("cA",ys),Us=vs,Ls=ds,ks=vs,Fs=ds,Bs=ds,Ds=ds,Hs=t("b5",ys),qs=t("b7",ds),js=t("b8",ds),Vs=t("b6",ds),Gs=t("ba",ds),Ws=t("bb",ds),Ks=t("bc",ys),Qs=t("b9",ds),Ys=t("bd",ys),Xs=to(Ze),Zs=t("cv",to(Je)),Js=to($e),$s=t("cC",to(tn));function to(t){return Ns({type:t})}var eo,no,ro,io,ao,so,oo,mo,uo,ho,co=t("be",(function(t,e,n){Is(t,e,n).override=!0})),lo=t("aC",(function(){})),fo=Object.freeze({__proto__:null,uniquelyReferenced:Rs,ccclass:Ms,property:Ns,requireComponent:ws,executionOrder:Es,disallowMultiple:As,executeInEditMode:Us,menu:Ls,playOnFocus:ks,inspector:Fs,icon:Bs,help:Ds,type:to,integer:Xs,float:Zs,boolean:Js,string:$s,editable:Hs,tooltip:Vs,visible:qs,displayName:js,displayOrder:Qs,range:Gs,rangeStep:Ws,slide:Ks,disallowAnimation:Ys,override:co,formerlySerializedAs:Ps,serializable:Ss});function yo(t,e){return(e<<3)+t}function vo(t){return go[t]}function po(t){switch(t){case uo.Uint8:return Uint8Array;case uo.Uint16:return Uint16Array;case uo.Uint32:return Uint32Array;case uo.Int8:return Int8Array;case uo.Int16:return Int16Array;case uo.Int32:return Int32Array;case uo.Float32:return Float32Array;case uo.Float64:return Float64Array}}t("ap",fo),function(t){t[t.Uint8=0]="Uint8",t[t.Uint16=1]="Uint16",t[t.Uint32=2]="Uint32",t[t.Int8=3]="Int8",t[t.Int16=4]="Int16",t[t.Int32=5]="Int32",t[t.Float32=6]="Float32",t[t.Float64=7]="Float64"}(uo||(uo={})),function(t){t[t.Scalar=0]="Scalar",t[t.Vec2=1]="Vec2",t[t.Vec3=2]="Vec3",t[t.Vec4=3]="Vec4",t[t.Quat=4]="Quat",t[t.Mat4=5]="Mat4"}(ho||(ho={})),t("ax",Ms("cc.CompactValueTypeArray")(((oo=function(){function t(){this._byteOffset=ro&&ro(),this._unitCount=io&&io(),this._unitElement=ao&&ao(),this._length=so&&so()}return t.lengthFor=function(t,e,n){return vo(e).requiredUnits*t.length*po(n).BYTES_PER_ELEMENT},t.compress=function(e,n,r,i,a,s){for(var o=vo(n),m=po(r),u=o.requiredUnits*e.length,h=new m(i,a,u),c=0;c<e.length;++c)o.compress(h,c,e[c]);var l=new t;return l._unitElement=yo(r,n),l._byteOffset=s,l._unitCount=u,l._length=e.length,l},t.prototype.decompress=function(t){for(var e,n={storageUnit:7&(e=this._unitElement),elementType:e>>3},r=n.storageUnit,i=vo(n.elementType),a=new(po(r))(t,this._byteOffset,this._unitCount),s=new Array(this._length),o=0;o<this._length;++o)s[o]=i.decompress(a,o);return s},t}()).StorageUnit=uo,oo.ElementType=ho,ro=fs((no=oo).prototype,"_byteOffset",[Ss],(function(){return 0})),io=fs(no.prototype,"_unitCount",[Ss],(function(){return 0})),ao=fs(no.prototype,"_unitElement",[Ss],(function(){return yo(uo.Uint8,ho.Scalar)})),so=fs(no.prototype,"_length",[Ss],(function(){return 0})),eo=no))||eo);var go=((mo={})[ho.Scalar]={requiredUnits:1,compress:function(t,e,n){t[e]=n},decompress:function(t,e){return t[e]}},mo[ho.Vec2]={requiredUnits:2,compress:function(t,e,n){t[2*e]=n.x,t[2*e+1]=n.y},decompress:function(t,e){return new qr(t[2*e],t[2*e+1])}},mo[ho.Vec3]={requiredUnits:3,compress:function(t,e,n){t[3*e]=n.x,t[3*e+1]=n.y,t[3*e+2]=n.z},decompress:function(t,e){return new qr(t[3*e],t[3*e+1],t[3*e+2])}},mo[ho.Vec4]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new kr(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},mo[ho.Quat]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new $r(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},mo[ho.Mat4]={requiredUnits:16,compress:function(t,e,n){oi.toArray(t,n,16*e)},decompress:function(t,e){return oi.fromArray(new oi,t,16*e)}},mo),_o=t("aA",Symbol("[[Serialize]]")),xo=t("az",Symbol("[[Deserialize]]"));function bo(){return 0}function Mo(t){return t}function wo(t){return t*t}function Eo(t){return t*(2-t)}function Ao(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function No(t){return t*t*t}function zo(t){return--t*t*t+1}function Io(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}function To(t){return t*t*t*t}function Oo(t){return 1- --t*t*t*t}function So(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function Po(t){return t*t*t*t*t}function Co(t){return--t*t*t*t*t+1}function Ro(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Uo(t){return 1===t?1:1-Math.cos(t*Math.PI/2)}function Lo(t){return Math.sin(t*Math.PI/2)}function ko(t){return.5*(1-Math.cos(Math.PI*t))}function Fo(t){return 0===t?0:Math.pow(1024,t-1)}function Bo(t){return 1===t?1:1-Math.pow(2,-10*t)}function Do(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function Ho(t){return 1-Math.sqrt(1-t*t)}function qo(t){return Math.sqrt(1- --t*t)}function jo(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Vo(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}function Go(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}function Wo(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)}function Ko(t){if(1===t)return 1;var e=1.70158;return t*t*((e+1)*t-e)}function Qo(t){if(0===t)return 0;var e=1.70158;return--t*t*((e+1)*t+e)+1}function Yo(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function Xo(t){return 1-Zo(1-t)}function Zo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Jo(t){return t<.5?.5*Xo(2*t):.5*Zo(2*t-1)+.5}function $o(t){return t<=0?0:t>=1?1:t*t*(3-2*t)}function tm(t){return t<=0?0:t>=1?1:t*t*t*(t*(6*t-15)+10)}s._decorator=fo;var em=cm(wo,Eo),nm=cm(No,zo),rm=cm(To,Oo),im=cm(Po,Co),am=cm(Uo,Lo),sm=cm(Fo,Bo),om=cm(Ho,qo),mm=cm(Vo,Go),um=cm(Ko,Qo),hm=cm(Xo,Zo);function cm(t,e){return function(n){return n<.5?e(2*n)/2:t(2*n-1)/2+.5}}var lm,fm,ym=Object.freeze({__proto__:null,constant:bo,linear:Mo,quadIn:wo,quadOut:Eo,quadInOut:Ao,cubicIn:No,cubicOut:zo,cubicInOut:Io,quartIn:To,quartOut:Oo,quartInOut:So,quintIn:Po,quintOut:Co,quintInOut:Ro,sineIn:Uo,sineOut:Lo,sineInOut:ko,expoIn:Fo,expoOut:Bo,expoInOut:Do,circIn:Ho,circOut:qo,circInOut:jo,elasticIn:Vo,elasticOut:Go,elasticInOut:Wo,backIn:Ko,backOut:Qo,backInOut:Yo,bounceIn:Xo,bounceOut:Zo,bounceInOut:Jo,smooth:$o,fade:tm,quadOutIn:em,cubicOutIn:nm,quartOutIn:rm,quintOutIn:im,sineOutIn:am,expoOutIn:sm,circOutIn:om,elasticOutIn:mm,backOutIn:um,bounceOutIn:hm});t("b1",ym),t("bn",fm),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.QUAD_IN=2]="QUAD_IN",t[t.QUAD_OUT=3]="QUAD_OUT",t[t.QUAD_IN_OUT=4]="QUAD_IN_OUT",t[t.QUAD_OUT_IN=5]="QUAD_OUT_IN",t[t.CUBIC_IN=6]="CUBIC_IN",t[t.CUBIC_OUT=7]="CUBIC_OUT",t[t.CUBIC_IN_OUT=8]="CUBIC_IN_OUT",t[t.CUBIC_OUT_IN=9]="CUBIC_OUT_IN",t[t.QUART_IN=10]="QUART_IN",t[t.QUART_OUT=11]="QUART_OUT",t[t.QUART_IN_OUT=12]="QUART_IN_OUT",t[t.QUART_OUT_IN=13]="QUART_OUT_IN",t[t.QUINT_IN=14]="QUINT_IN",t[t.QUINT_OUT=15]="QUINT_OUT",t[t.QUINT_IN_OUT=16]="QUINT_IN_OUT",t[t.QUINT_OUT_IN=17]="QUINT_OUT_IN",t[t.SINE_IN=18]="SINE_IN",t[t.SINE_OUT=19]="SINE_OUT",t[t.SINE_IN_OUT=20]="SINE_IN_OUT",t[t.SINE_OUT_IN=21]="SINE_OUT_IN",t[t.EXPO_IN=22]="EXPO_IN",t[t.EXPO_OUT=23]="EXPO_OUT",t[t.EXPO_IN_OUT=24]="EXPO_IN_OUT",t[t.EXPO_OUT_IN=25]="EXPO_OUT_IN",t[t.CIRC_IN=26]="CIRC_IN",t[t.CIRC_OUT=27]="CIRC_OUT",t[t.CIRC_IN_OUT=28]="CIRC_IN_OUT",t[t.CIRC_OUT_IN=29]="CIRC_OUT_IN",t[t.ELASTIC_IN=30]="ELASTIC_IN",t[t.ELASTIC_OUT=31]="ELASTIC_OUT",t[t.ELASTIC_IN_OUT=32]="ELASTIC_IN_OUT",t[t.ELASTIC_OUT_IN=33]="ELASTIC_OUT_IN",t[t.BACK_IN=34]="BACK_IN",t[t.BACK_OUT=35]="BACK_OUT",t[t.BACK_IN_OUT=36]="BACK_IN_OUT",t[t.BACK_OUT_IN=37]="BACK_OUT_IN",t[t.BOUNCE_IN=38]="BOUNCE_IN",t[t.BOUNCE_OUT=39]="BOUNCE_OUT",t[t.BOUNCE_IN_OUT=40]="BOUNCE_IN_OUT",t[t.BOUNCE_OUT_IN=41]="BOUNCE_OUT_IN",t[t.SMOOTH=42]="SMOOTH",t[t.FADE=43]="FADE"}(fm||t("bn",fm={}));var dm,vm=((lm={})[fm.CONSTANT]=bo,lm[fm.LINEAR]=Mo,lm[fm.QUAD_IN]=wo,lm[fm.QUAD_OUT]=Eo,lm[fm.QUAD_IN_OUT]=Ao,lm[fm.QUAD_OUT_IN]=em,lm[fm.CUBIC_IN]=No,lm[fm.CUBIC_OUT]=zo,lm[fm.CUBIC_IN_OUT]=Io,lm[fm.CUBIC_OUT_IN]=nm,lm[fm.QUART_IN]=To,lm[fm.QUART_OUT]=Oo,lm[fm.QUART_IN_OUT]=So,lm[fm.QUART_OUT_IN]=rm,lm[fm.QUINT_IN]=Po,lm[fm.QUINT_OUT]=Co,lm[fm.QUINT_IN_OUT]=Ro,lm[fm.QUINT_OUT_IN]=im,lm[fm.SINE_IN]=Uo,lm[fm.SINE_OUT]=Lo,lm[fm.SINE_IN_OUT]=ko,lm[fm.SINE_OUT_IN]=am,lm[fm.EXPO_IN]=Fo,lm[fm.EXPO_OUT]=Bo,lm[fm.EXPO_IN_OUT]=Do,lm[fm.EXPO_OUT_IN]=sm,lm[fm.CIRC_IN]=Ho,lm[fm.CIRC_OUT]=qo,lm[fm.CIRC_IN_OUT]=jo,lm[fm.CIRC_OUT_IN]=om,lm[fm.ELASTIC_IN]=Vo,lm[fm.ELASTIC_OUT]=Go,lm[fm.ELASTIC_IN_OUT]=Wo,lm[fm.ELASTIC_OUT_IN]=mm,lm[fm.BACK_IN]=Ko,lm[fm.BACK_OUT]=Qo,lm[fm.BACK_IN_OUT]=Yo,lm[fm.BACK_OUT_IN]=um,lm[fm.BOUNCE_IN]=Xo,lm[fm.BOUNCE_OUT]=Zo,lm[fm.BOUNCE_IN_OUT]=Jo,lm[fm.BOUNCE_OUT_IN]=hm,lm[fm.SMOOTH]=$o,lm[fm.FADE]=tm,lm);function pm(t){return vm[t]}Yn(255),Yn(65280);var gm,_m,xm,bm=ms.LINEAR<<0|hs.NONE<<8|fm.LINEAR<<16,Mm=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).value=0,e.rightTangent=0,e.rightTangentWeight=0,e.leftTangent=0,e.leftTangentWeight=0,e._flags=bm,e}return l(e,t),h(e,[{key:"interpolationMode",get:function(){return(255&this._flags)>>0},set:function(t){this._flags&=-256,this._flags|=t<<0}},{key:"tangentWeightMode",get:function(){return(65280&this._flags)>>8},set:function(t){this._flags&=-65281,this._flags|=t<<8}},{key:"easingMethod",get:function(){return(16711680&this._flags)>>16},set:function(t){this._flags&=-16711681,this._flags|=t<<16}}]),e}(lo);function wm(t){var e=new Mm;if("number"==typeof t)e.value=t;else{var n=t.interpolationMode,r=t.tangentWeightMode,i=t.value,a=t.rightTangent,s=t.rightTangentWeight,o=t.leftTangent,m=t.leftTangentWeight,u=t.easingMethod,h=t[wn];e.value=null!=i?i:e.value,e.rightTangent=null!=a?a:e.rightTangent,e.rightTangentWeight=null!=s?s:e.rightTangentWeight,e.leftTangent=null!=o?o:e.leftTangent,e.leftTangentWeight=null!=m?m:e.leftTangentWeight,e.interpolationMode=null!=n?n:e.interpolationMode,e.tangentWeightMode=null!=r?r:e.tangentWeightMode,e.easingMethod=null!=u?u:e.easingMethod,h&&(e[wn]=h)}return e}_n.fastDefine("cc.RealKeyframeValue",Mm,((dm={interpolationMode:ms.LINEAR,tangentWeightMode:hs.NONE,value:0,rightTangent:0,rightTangentWeight:0,leftTangent:0,leftTangentWeight:0,easingMethod:fm.LINEAR})[wn]=void 0,dm)),_n.Attr.setClassAttr(Mm,wn,"editorOnly",!0),(gm=Mm,null!==(xm=(_m=gm)[Os])&&void 0!==xm?xm:_m[Os]={}).uniquelyReferenced=!0;var Em,Am=t("aQ",function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=us.CLAMP,e.postExtrapolation=us.CLAMP,e}l(e,t);var n=e.prototype;return n.evaluate=function(t){var e=this._times,n=this._values,r=e.length;if(0===r)return 0;var i=e[0],a=e[r-1];if(t<i){var s=this.preExtrapolation,o=n[0];if(s===us.CLAMP||r<2)return o.value;switch(s){case us.LINEAR:return Hm(i,n[0].value,e[1],n[1].value,t);case us.LOOP:t=Bm(t,i,a);break;case us.PING_PONG:t=Dm(t,i,a);break;default:return o.value}}else if(t>a){var m=this.postExtrapolation,u=n[r-1];if(m===us.CLAMP||r<2)return u.value;switch(m){case us.LINEAR:return Hm(a,u.value,e[r-2],n[r-2].value,t);case us.LOOP:t=Bm(t,i,a);break;case us.PING_PONG:t=Dm(t,i,a);break;default:return u.value}}var h=os(e,t);if(h>=0)return n[h].value;var c=~h,l=c-1,f=e[l],y=n[l],d=e[c];return function(t,e,n,r,i){var a=n-t;switch(e.interpolationMode){default:case ms.CONSTANT:return e.value;case ms.LINEAR:var s=e.easingMethod===fm.LINEAR?i:pm(e.easingMethod)(i);return br(e.value,r.value,s);case ms.CUBIC:var o=1/3,m=e.rightTangent,u=e.rightTangentWeight,h=0!=(e.tangentWeightMode&hs.RIGHT),c=r.leftTangent,l=r.leftTangentWeight,f=0!=(r.tangentWeightMode&hs.LEFT);if(h||f){var y=0;if(h)y=u;else{var d=a,v=a*m;y=Math.sqrt(d*d+v*v)*o}var p=Math.atan(m),g=Math.cos(p)*y+t,_=Math.sin(p)*y+e.value,x=0;if(f)x=l;else{var b=a,M=a*c;x=Math.sqrt(b*b+M*M)*o}var w=Math.atan(c),E=(g-t)/a,A=(-Math.cos(w)*x+n-t)/a,N=_,z=-Math.sin(w)*x+r.value,I=[0,0,0],T=function(t,e,n,r,i){var a=n/r,s=e/r,o=a*a,m=1/3*(-1/3*o+s),u=.5*(2/27*a*o-1/3*a*s+t/r),h=m*m*m,c=u*u+h,l=0;if(ls(c)){if(ls(u))return i[0]=0,1;var f=Math.cbrt(-u);return i[0]=2*f,i[1]=-f,2}if(c<0){var y=1/3*Math.acos(-u/Math.sqrt(-h)),d=2*Math.sqrt(-m);i[0]=d*Math.cos(y),i[1]=-d*Math.cos(y+Math.PI/3),i[2]=-d*Math.cos(y-Math.PI/3),l=3}else{var v=Math.sqrt(c),p=Math.cbrt(v-u),g=-Math.cbrt(v+u);i[0]=p+g,l=1}for(var _=1/3*a,x=0;x<l;++x)i[x]-=_;return l}(0-i,3*E,3*A-6*E,3*(E-A)+1,I),O=function(t,e,n){var r=n;if(1===e)r=t[0];else{r=-1/0;for(var i=0;i<e;++i){var a=t[i];a>=0&&a<=1&&a>r&&(r=a)}r===-1/0&&(r=0)}return r}(I,T,i);return qm(e.value,N,z,r.value,O)}var S=e.value+o*m*a,P=r.value-o*c*a;return qm(e.value,S,P,r.value,i)}}(f,y,d,n[c],(t-f)/(d-f))},n.addKeyFrame=function(e,n){return t.prototype.addKeyFrame.call(this,e,wm(n))},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return wm(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return wm(t[1])})))}},n.isConstant=function(t){if(this._values.length<=1)return!0;var e=this._values[0].value;return this._values.every((function(n){return gr(n.value,e,t)}))},n[_o]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=n.length,a=new DataView(new ArrayBuffer(0+Nm+Nm+zm+Im*i+Lm*i)),s=0;a.setUint8(s,this.preExtrapolation),s+=Nm,a.setUint8(s,this.postExtrapolation),s+=Nm,a.setUint32(s,i,!0),s+=zm,n.forEach((function(t,e){return a.setFloat32(s+Im*e,t,!0)})),s+=Im*i;for(var o,m=_(r);!(o=m()).done;){var u=o.value;s=km(a,u,s)}var h=new Uint8Array(a.buffer,0,s);t.writeProperty("bytes",h);var c=r.map((function(t){return t[wn]}));c.some((function(t){return void 0!==t}))&&t.writeProperty("keyframeValueEditorExtras",c)}else t.writeThis()},n[xo]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;this.preExtrapolation=r.getUint8(i),i+=Nm,this.postExtrapolation=r.getUint8(i),i+=Nm;var a=r.getUint32(i,!0);i+=zm;var s=Array.from({length:a},(function(t,e){return r.getFloat32(i+Im*e,!0)}));i+=Im*a;for(var o=new Array(a),m=0;m<a;++m){var u=wm({});i=Fm(r,u,i),o[m]=u}n.byteLength;var h=t.readProperty("keyframeValueEditorExtras");h&&(h.length,h.forEach((function(t,e){return o[e][wn]=t}))),this._times=s,this._values=o}else t.readThis()},e}(cs));_n.fastDefine("cc.RealCurve",Am,{_times:[],_values:[],preExtrapolation:us.CLAMP,postExtrapolation:us.CLAMP}),function(t){t[t.VALUE=1]="VALUE",t[t.INTERPOLATION_MODE=2]="INTERPOLATION_MODE",t[t.TANGENT_WEIGHT_MODE=4]="TANGENT_WEIGHT_MODE",t[t.LEFT_TANGENT=8]="LEFT_TANGENT",t[t.LEFT_TANGENT_WEIGHT=16]="LEFT_TANGENT_WEIGHT",t[t.RIGHT_TANGENT=32]="RIGHT_TANGENT",t[t.RIGHT_TANGENT_WEIGHT=64]="RIGHT_TANGENT_WEIGHT"}(Em||(Em={}));var Nm=1,zm=4,Im=4,Tm=wm({}),Om=Tm.interpolationMode,Sm=Tm.tangentWeightMode,Pm=Tm.leftTangent,Cm=Tm.leftTangentWeight,Rm=Tm.rightTangent,Um=Tm.rightTangentWeight,Lm=26;function km(t,e,n){var r=0,i=n,a=i;i+=4;var s=e.value,o=e.interpolationMode,m=e.tangentWeightMode,u=e.rightTangent,h=e.rightTangentWeight,c=e.leftTangent,l=e.leftTangentWeight,f=e.easingMethod;return t.setFloat32(i,s,!0),i+=4,o!==Om&&(r|=Em.INTERPOLATION_MODE,t.setUint8(i,o),i+=1),m!==Sm&&(r|=Em.TANGENT_WEIGHT_MODE,t.setUint8(i,m),i+=1),c!==Pm&&(r|=Em.LEFT_TANGENT,t.setFloat32(i,c,!0),i+=4),l!==Cm&&(r|=Em.LEFT_TANGENT_WEIGHT,t.setFloat32(i,l,!0),i+=4),u!==Rm&&(r|=Em.RIGHT_TANGENT,t.setFloat32(i,u,!0),i+=4),h!==Um&&(r|=Em.RIGHT_TANGENT_WEIGHT,t.setFloat32(i,h,!0),i+=4),r|=f<<8,t.setUint32(a,r,!0),i}function Fm(t,e,n){var r=n,i=t.getUint32(r,!0);r+=4,e.value=t.getFloat32(r,!0),r+=4,i&Em.INTERPOLATION_MODE&&(e.interpolationMode=t.getUint8(r),r+=1),i&Em.TANGENT_WEIGHT_MODE&&(e.tangentWeightMode=t.getUint8(r),r+=1),i&Em.LEFT_TANGENT&&(e.leftTangent=t.getFloat32(r,!0),r+=4),i&Em.LEFT_TANGENT_WEIGHT&&(e.leftTangentWeight=t.getFloat32(r,!0),r+=4),i&Em.RIGHT_TANGENT&&(e.rightTangent=t.getFloat32(r,!0),r+=4),i&Em.RIGHT_TANGENT_WEIGHT&&(e.rightTangentWeight=t.getFloat32(r,!0),r+=4);var a=(65280&i)>>8;return e.easingMethod=a,r}function Bm(t,e,n){return e+Sr(t-e,n-e)}function Dm(t,e,n){return e+Pr(t-e,n-e)}function Hm(t,e,n,r,i){return e+(r-e)/(n-t)*(i-t)}function qm(t,e,n,r,i){var a=1-i;return a*a*a*t+3*a*a*i*e+3*a*i*i*n+i*i*i*r}function jm(t,e,n,r,i){var a=1-i;return a*(a*(t+(3*e-t)*i)+3*n*i*i)+r*i*i*i}s.bezier=jm;var Vm,Gm,Wm,Km,Qm,Ym,Xm,Zm,Jm,$m,tu=Math.cos,eu=Math.acos,nu=Math.max,ru=2*Math.PI,iu=Math.sqrt;function au(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function su(t,e){var n=function(t,e){var n,r,i,a,s=e-0,o=e-t[0],m=3*s,u=3*o,h=3*(e-t[2]),c=1/(-s+u-h+(e-1)),l=1/3,f=(m-6*o+h)*c,y=f*l,d=(-m+u)*c,v=(3*d-f*f)*l,p=v*l,g=(2*f*f*f-9*f*d+s*c*27)/27,_=g/2,x=_*_+p*p*p;if(x<0){var b=-v*l,M=iu(b*b*b),w=-g/(2*M),E=eu(w<-1?-1:w>1?1:w),A=2*au(M);return r=A*tu(E*l)-y,i=A*tu((E+ru)*l)-y,a=A*tu((E+2*ru)*l)-y,r>=0&&r<=1?i>=0&&i<=1?a>=0&&a<=1?nu(r,i,a):nu(r,i):a>=0&&a<=1?nu(r,a):r:i>=0&&i<=1?a>=0&&a<=1?nu(i,a):i:a}if(0===x)return i=-(n=_<0?au(-_):-au(_))-y,(r=2*n-y)>=0&&r<=1?i>=0&&i<=1?nu(r,i):r:i;var N=iu(x);return(n=au(-_+N))-au(_+N)-y}(t,e),r=t[1];return((1-n)*(r+(t[3]-r)*n)*3+n*n)*n}s.bezierByTime=su,t("aV",$m),function(t){t[t.SLERP=0]="SLERP",t[t.CONSTANT=1]="CONSTANT"}($m||t("aV",$m={}));var ou,mu=Ms("cc.QuatKeyframeValue")(Vm=Rs((Gm=function(t){var e=void 0===t?{}:t,n=e.value,r=e.interpolationMode,i=e.easingMethod;this.interpolationMode=Wm&&Wm(),this.value=Km&&Km(),this.easingMethod=Qm&&Qm(),this.value=n?$r.clone(n):this.value,this.interpolationMode=null!=r?r:this.interpolationMode,this.easingMethod=null!=i?i:this.easingMethod},Wm=fs(Gm.prototype,"interpolationMode",[Ss],(function(){return $m.SLERP})),Km=fs(Gm.prototype,"value",[Ss],(function(){return $r.clone($r.IDENTITY)})),Qm=fs(Gm.prototype,"easingMethod",[Ss],(function(){return fm.LINEAR})),Vm=Gm))||Vm)||Vm;function uu(t){return new mu(t)}t("aU",Ms("cc.QuatCurve")((Xm=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=Zm&&Zm(),e.postExtrapolation=Jm&&Jm(),e}l(e,t);var n=e.prototype;return n.evaluate=function(t,e){var n;null!==(n=e)&&void 0!==n||(e=new $r);var r=this._times,i=this._values,a=this.postExtrapolation,s=this.preExtrapolation,o=r.length;if(0===o)return e;var m=r[0],u=r[o-1];if(t<m){var h=i[0];switch(s){case us.LOOP:t=m+Sr(t-m,u-m);break;case us.PING_PONG:t=m+Pr(t-m,u-m);break;case us.CLAMP:default:return $r.copy(e,h.value)}}else if(t>u){var c=i[o-1];switch(a){case us.LOOP:t=m+Sr(t-m,u-m);break;case us.PING_PONG:t=m+Pr(t-m,u-m);break;case us.CLAMP:default:return $r.copy(e,c.value)}}var l=os(r,t);if(l>=0)return $r.copy(e,i[l].value);var f=~l,y=f-1,d=r[y],v=i[y],p=r[f],g=i[f],_=(t-d)/(p-d);switch(v.interpolationMode){default:case $m.CONSTANT:return $r.copy(e,v.value);case $m.SLERP:var x=v.easingMethod,b=x===fm.LINEAR?_:Array.isArray(x)?su(x,_):pm(x)(_);return $r.slerp(e,v.value,g.value,b)}},n.addKeyFrame=function(e,n){var r=new mu(n);return t.prototype.addKeyFrame.call(this,e,r)},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return uu(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return uu(t[1])})))}},n[_o]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=!0;r.forEach((function(t,e,n){var r=n[0];i&&t.interpolationMode!==r.interpolationMode&&(i=!1)}));var a=n.length,s=du*(i?1:a),o=r.reduce((function(t,e){var n=e.easingMethod;return t+(Array.isArray(n)?vu+4*gu:vu)}),0),m=0,u=new DataView(new ArrayBuffer(m+=cu+lu+fu*a+4*yu*a+o+s+0)),h=0,c=0;i&&(c|=ou.INTERPOLATION_MODE),u.setUint32(h,c,!0),h+=cu,u.setUint32(h,a,!0),h+=lu,n.forEach((function(t,e){return u.setFloat32(h+fu*e,t,!0)})),h+=fu*a,r.forEach((function(t,e){var n=t.value,r=n.x,i=n.y,a=n.z,s=n.w,o=h+4*yu*e;u.setFloat32(o+0*yu,r,!0),u.setFloat32(o+1*yu,i,!0),u.setFloat32(o+2*yu,a,!0),u.setFloat32(o+3*yu,s,!0)})),h+=4*yu*a,r.forEach((function(t){var e=t.easingMethod;Array.isArray(e)?(u.setUint8(h,pu),++h,u.setFloat32(h+0*gu,e[0],!0),u.setFloat32(h+1*gu,e[1],!0),u.setFloat32(h+2*gu,e[2],!0),u.setFloat32(h+3*gu,e[3],!0),h+=4*gu):(u.setUint8(h,e),++h)}));var l=h;h+=s;var f=l;r.forEach((function(t){var e=t.interpolationMode;u.setUint8(f,e),i||(f+=du)}));var y=new Uint8Array(u.buffer);t.writeProperty("bytes",y)}else t.writeThis()},n[xo]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0,a=r.getUint32(i,!0);i+=cu;var s=a&ou.INTERPOLATION_MODE,o=r.getUint32(i,!0);i+=lu;var m=Array.from({length:o},(function(t,e){return r.getFloat32(i+fu*e,!0)})),u=i+=fu*o;i+=4*yu*o;var h=Array.from({length:o},(function(t,e){var n=u+4*yu*e,a=r.getFloat32(n+0*yu,!0),s=r.getFloat32(n+1*yu,!0),o=r.getFloat32(n+2*yu,!0),m=r.getFloat32(n+3*yu,!0),h=r.getUint8(i);++i;var c=uu({value:{x:a,y:s,z:o,w:m}});return h!==pu?c.easingMethod=h:(c.easingMethod=[r.getFloat32(i+0*gu,!0),r.getFloat32(i+1*gu,!0),r.getFloat32(i+2*gu,!0),r.getFloat32(i+3*gu,!0)],i+=4*gu),c}));if(s){var c=r.getUint8(i);++i;for(var l=0;l<o;++l)h[l].interpolationMode=c}else{for(var f=0;f<o;++f){var y=r.getUint8(i+f);h[f].interpolationMode=y}i+=o}this._times=m,this._values=h}else t.readThis()},e}(cs),Zm=fs(Xm.prototype,"preExtrapolation",[Ss],(function(){return us.CLAMP})),Jm=fs(Xm.prototype,"postExtrapolation",[Ss],(function(){return us.CLAMP})),Ym=Xm))||Ym),function(t){t[t.INTERPOLATION_MODE=1]="INTERPOLATION_MODE"}(ou||(ou={}));var hu,cu=1,lu=4,fu=4,yu=4,du=1,vu=1,pu=255,gu=4,_u=(t("aW",Ms("cc.ObjectCurve")(hu=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.evaluate=function(t){var e=this.searchKeyframe(t);if(e>=0)return this._values[e];var n=_r(~e-1,0,this._values.length-1);return this._values[n]},e}(cs))||hu),Me({Blend:0,Fixed:1})),xu=t("aX",(function(){this.color=Kr.WHITE.clone(),this.time=0}));_n.fastDefine("cc.ColorKey",xu,{color:Kr.WHITE.clone(),time:0}),_n.Attr.setClassAttr(xu,"color","visible",!0),_n.Attr.setClassAttr(xu,"time","visible",!0);var bu=t("aY",(function(){this.alpha=1,this.time=0}));_n.fastDefine("cc.AlphaKey",bu,{alpha:1,time:0}),_n.Attr.setClassAttr(bu,"alpha","visible",!0),_n.Attr.setClassAttr(bu,"time","visible",!0);var Mu=t("aZ",function(){function t(){this.colorKeys=[],this.alphaKeys=[],this.mode=_u.Blend}var e=t.prototype;return e.setKeys=function(t,e){this.colorKeys=t,this.alphaKeys=e},e.sortKeys=function(){this.colorKeys.length>1&&this.colorKeys.sort((function(t,e){return t.time-e.time})),this.alphaKeys.length>1&&this.alphaKeys.sort((function(t,e){return t.time-e.time}))},e.evaluate=function(t){return this.evaluateFast(new Kr,t)},e.evaluateFast=function(t,e){return this.getRGB(t,e),t._set_a_unsafe(this.getAlpha(e)),t},e.randomColor=function(){return this.getRandomColor(new Kr)},e.getRandomColor=function(t){var e=this.colorKeys[Math.trunc(Math.random()*this.colorKeys.length)],n=this.alphaKeys[Math.trunc(Math.random()*this.alphaKeys.length)];return t.set(e.color),t._set_a_unsafe(n.alpha),t},e.getRGB=function(t,e){var n=this.colorKeys,r=n.length;if(r>1){e=Sr(e,1+vr);for(var i=1;i<r;++i){var a=n[i-1].time,s=n[i].time;if(e>=a&&e<s){if(this.mode===_u.Fixed)return Kr.copy(t,n[i].color),t;var o=(e-a)/(s-a);return Kr.lerp(t,n[i-1].color,n[i].color,o),t}}var m=r-1;gr(e,n[m].time,vr)?Kr.copy(t,n[m].color):e<n[0].time?Kr.lerp(t,Kr.BLACK,n[0].color,e/n[0].time):e>n[m].time&&Kr.lerp(t,n[m].color,Kr.BLACK,(e-n[m].time)/(1-n[m].time))}else 1===r?Kr.copy(t,n[0].color):Kr.copy(t,Kr.WHITE);return t},e.getAlpha=function(t){var e=this.alphaKeys,n=e.length;if(n>1){t=Sr(t,1+vr);for(var r=1;r<n;++r){var i=e[r-1].time,a=e[r].time;if(t>=i&&t<a){if(this.mode===_u.Fixed)return e[r].alpha;var s=(t-i)/(a-i);return br(e[r-1].alpha,e[r].alpha,s)}}var o=n-1;return gr(t,e[o].time,vr)?e[o].alpha:t<e[0].time?br(0,e[0].alpha,t/e[0].time):t>e[o].time?br(e[o].alpha,0,(t-e[o].time)/(1-e[o].time)):255}return 1===n?e[0].alpha:255},t}());Mu.Mode=_u,_n.fastDefine("cc.Gradient",Mu,{colorKeys:[],alphaKeys:[],mode:_u.Blend}),_n.Attr.setClassAttr(Mu,"colorKeys","visible",!0),_n.Attr.setClassAttr(Mu,"alphaKeys","visible",!0),_n.Attr.setClassAttr(Mu,"mode","visible",!0);var wu=function(){this.time=0,this.value=0,this.inTangent=0,this.outTangent=0};_n.fastDefine("cc.Keyframe",wu,{time:0,value:0,inTangent:0,outTangent:0});var Eu=function(){function t(){this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}return t.prototype.evaluate=function(t){return Au(t-this.time,this.coefficient)},t}();function Au(t,e){return t*(t*(t*e[0]+e[1])+e[2])+e[3]}var Nu,zu,Iu=t("cK",function(){function t(t){if(void 0===t&&(t=null),this._curve=void 0,this.cachedKey=void 0,t instanceof Am)this._curve=t;else{var e=new Am;this._curve=e,e.preExtrapolation=us.LOOP,e.postExtrapolation=us.CLAMP,t?e.assignSorted(t.map((function(t){return[t.time,{interpolationMode:ms.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]}))):e.assignSorted([[0,{interpolationMode:ms.CUBIC,value:1}],[1,{interpolationMode:ms.CUBIC,value:1}]])}this.cachedKey=new Eu}var e=t.prototype;return e.addKey=function(t){t?this._curve.addKeyFrame(t.time,{interpolationMode:ms.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}):this._curve.clear()},e.evaluate_slow=function(t){return this._curve.evaluate(t)},e.evaluate=function(t){var e=this.cachedKey,n=this._curve,r=n.keyFramesCount-1,i=t,a=t<0?n.preExtrapolation:n.postExtrapolation,s=n.getKeyframeTime(0),o=n.getKeyframeTime(r);switch(a){case us.LOOP:i=Sr(t-s,o-s)+s;break;case us.PING_PONG:i=Pr(t-s,o-s)+s;break;case us.CLAMP:default:i=_r(t,s,o)}if(i>=e.time&&i<e.endTime)return e.evaluate(i);var m=this.findIndex(e,i),u=Math.min(m+1,r);return this.calcOptimizedKey(e,m,u),e.evaluate(i)},e.calcOptimizedKey=function(t,e,n){var r=this._curve.getKeyframeTime(e),i=this._curve.getKeyframeTime(n),a=this._curve.getKeyframeValue(e),s=a.value,o=a.leftTangent,m=this._curve.getKeyframeValue(n),u=m.value,h=m.rightTangent;t.index=e,t.time=r,t.endTime=i;var c=i-r,l=u-s,f=1/(c*c),y=o*c,d=h*c;t.coefficient[0]=(y+d-l-l)*f/c,t.coefficient[1]=(l+l+l-y-y-d)*f,t.coefficient[2]=o,t.coefficient[3]=s},e.findIndex=function(t,e){var n=this._curve,r=n.keyFramesCount,i=t.index;if(-1!==i)if(e>n.getKeyframeTime(i))for(var a=0;a<3;a++){var s=i+a;if(s+1<r&&n.getKeyframeTime(s+1)>e)return s}else for(var o=0;o<3;o++){var m=i-o;if(m>=0&&n.getKeyframeTime(m-1)<=e)return m-1}for(var u,h=0,c=r;c-h>1;)u=Math.floor((h+c)/2),n.getKeyframeTime(u)>=e?c=u:h=u;return h},h(t,[{key:"_internalCurve",get:function(){return this._curve}},{key:"keyFrames",get:function(){return Array.from(this._curve.keyframes()).map((function(t){var e=t[0],n=t[1],r=new wu;return r.time=e,r.value=n.value,r.inTangent=n.leftTangent,r.outTangent=n.rightTangent,r}))},set:function(t){this._curve.assignSorted(t.map((function(t){return[t.time,{interpolationMode:ms.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]})))}},{key:"preWrapMode",get:function(){return Ou(this._curve.preExtrapolation)},set:function(t){this._curve.preExtrapolation=Tu(t)}},{key:"postWrapMode",get:function(){return Ou(this._curve.postExtrapolation)},set:function(t){this._curve.postExtrapolation=Tu(t)}}]),t}());function Tu(t){switch(t){default:case Nu.Default:case Nu.Normal:case Nu.Clamp:return us.CLAMP;case Nu.PingPong:return us.PING_PONG;case Nu.Loop:return us.LOOP}}function Ou(t){switch(t){default:case us.LINEAR:case us.CLAMP:return Nu.Clamp;case us.PING_PONG:return Nu.PingPong;case us.LOOP:return Nu.Loop}}function Su(){var t=new Am;return t.assignSorted([[0,{interpolationMode:ms.CUBIC,value:1}],[1,{interpolationMode:ms.CUBIC,value:1}]]),t}Iu.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],_n.fastDefine("cc.AnimationCurve",Iu,{_curve:null}),t("cz",Nu),function(t){t[t.Default=0]="Default",t[t.Normal=1]="Normal",t[t.Loop=2]="Loop",t[t.ShouldWrap=4]="ShouldWrap",t[t.Clamp=8]="Clamp",t[t.PingPong=22]="PingPong",t[t.Reverse=36]="Reverse"}(Nu||t("cz",Nu={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.BEZIER=1]="BEZIER",t[t.CATMULL_ROM=2]="CATMULL_ROM"}(zu||(zu={}));var Pu,Cu=4294967295,Ru=new qr,Uu=new qr,Lu=new qr,ku=new qr,Fu=function(){function t(t,e){void 0===t&&(t=zu.CATMULL_ROM),void 0===e&&(e=[]),this._type=void 0,this._mode=zu.CATMULL_ROM,this._knots=[],this._type=Ri.SHAPE_SPLINE,this._mode=t;for(var n=0;n<e.length;n++)this._knots[n]=new qr(e[n])}t.create=function(e,n){return void 0===n&&(n=[]),new t(e,n)},t.clone=function(e){return new t(e.mode,e.knots)},t.copy=function(t,e){t._mode=e.mode,t._knots.length=0;for(var n=e.knots,r=n.length,i=0;i<r;i++)t._knots[i]=new qr(n[i]);return t};var e=t.prototype;return e.setModeAndKnots=function(t,e){this._mode=t,this._knots.length=0;for(var n=0;n<e.length;n++)this._knots[n]=new qr(e[n])},e.clearKnots=function(){this._knots.length=0},e.getKnotCount=function(){return this._knots.length},e.addKnot=function(t){this._knots.push(new qr(t))},e.insertKnot=function(t,e){var n=new qr(e);t>=this._knots.length?this._knots.push(n):this._knots.splice(t,0,n)},e.removeKnot=function(t){t>=0&&this._knots.length,this._knots.splice(t,1)},e.setKnot=function(t,e){t>=0&&this._knots.length,this._knots[t].set(e)},e.getKnot=function(t){return t>=0&&this._knots.length,this._knots[t]},e.getPoint=function(e,n){void 0===n&&(n=Cu),e=_r(e,0,1);var r=this.getSegments();if(0===r)return new qr(0,0,0);if(n===Cu){var i=1/r;n=Math.floor(e/i),e=e%i/i}if(n>=r)return new qr(this._knots[this._knots.length-1]);switch(this._mode){case zu.LINEAR:return t.calcLinear(this._knots[n],this._knots[n+1],e);case zu.BEZIER:return t.calcBezier(this._knots[4*n],this._knots[4*n+1],this._knots[4*n+2],this._knots[4*n+3],e);case zu.CATMULL_ROM:var a=n>0?this._knots[n-1]:this._knots[n],s=n+2<this._knots.length?this._knots[n+2]:this._knots[n+1];return t.calcCatmullRom(a,this._knots[n],this._knots[n+1],s,e);default:return new qr(0,0,0)}},e.getPoints=function(t,e){if(void 0===e&&(e=Cu),0===t)return[];if(1===t)return[this.getPoint(0,e)];for(var n=[],r=1/(t-1),i=0;i<t;i++){var a=i*r,s=this.getPoint(a,e);n.push(s)}return n},e.getSegments=function(){var t=this._knots.length;switch(this._mode){case zu.LINEAR:case zu.CATMULL_ROM:return t<2?(D(14300),0):t-1;case zu.BEZIER:return t<4||t%4!=0?(D(14301),0):t/4}},t.calcLinear=function(t,e,n){var r=new qr;return qr.multiplyScalar(Ru,t,1-n),qr.multiplyScalar(Uu,e,n),qr.add(r,Ru,Uu),r},t.calcBezier=function(t,e,n,r,i){var a=new qr,s=1-i;return qr.multiplyScalar(Ru,t,s*s*s),qr.multiplyScalar(Uu,e,3*i*s*s),qr.multiplyScalar(Lu,n,3*i*i*s),qr.multiplyScalar(ku,r,i*i*i),qr.add(Ru,Ru,Uu),qr.add(Lu,Lu,ku),qr.add(a,Ru,Lu),a},t.calcCatmullRom=function(t,e,n,r,i){var a=new qr,s=i*i,o=s*i;return qr.multiplyScalar(Ru,t,-.5*o+s-.5*i),qr.multiplyScalar(Uu,e,1.5*o-2.5*s+1),qr.multiplyScalar(Lu,n,-1.5*o+2*s+.5*i),qr.multiplyScalar(ku,r,.5*o-.5*s),qr.add(Ru,Ru,Uu),qr.add(Lu,Lu,ku),qr.add(a,Ru,Lu),a},h(t,[{key:"type",get:function(){return this._type}},{key:"mode",get:function(){return this._mode}},{key:"knots",get:function(){return this._knots}}]),t}();function Bu(t,e){console.warn(t+" is deprecated, please use "+e+" instead.")}t("cp",Pu),function(t){t[t.ALL=0]="ALL",t[t.CLOSEST=1]="CLOSEST",t[t.ANY=2]="ANY"}(Pu||t("cp",Pu={})),tr(La,"intersect",[{name:"ray_aabb",newName:"rayAABB"},{name:"ray_plane",newName:"rayPlane"},{name:"ray_triangle",newName:"rayTriangle"},{name:"ray_sphere",newName:"raySphere"},{name:"ray_obb",newName:"rayOBB"},{name:"ray_capsule",newName:"rayCapsule"},{name:"ray_subMesh",newName:"raySubMesh"},{name:"ray_mesh",newName:"rayMesh"},{name:"ray_model",newName:"rayModel"},{name:"line_plane",newName:"linePlane"},{name:"line_triangle",newName:"lineTriangle"},{name:"line_aabb",newName:"lineAABB"},{name:"line_obb",newName:"lineOBB"},{name:"line_sphere",newName:"lineSphere"},{name:"aabb_aabb",newName:"aabbWithAABB"},{name:"aabb_obb",newName:"aabbWithOBB"},{name:"aabb_plane",newName:"aabbPlane"},{name:"aabb_frustum",newName:"aabbFrustum"},{name:"aabbFrustum_accurate",newName:"aabbFrustumAccurate"},{name:"obb_point",newName:"obbPoint"},{name:"obb_plane",newName:"obbPlane"},{name:"obb_frustum",newName:"obbFrustum"},{name:"obbFrustum_accurate",newName:"obbFrustumAccurate"},{name:"obb_obb",newName:"obbWithOBB"},{name:"obb_capsule",newName:"obbCapsule"},{name:"sphere_plane",newName:"spherePlane"},{name:"sphere_frustum",newName:"sphereFrustum"},{name:"sphereFrustum_accurate",newName:"sphereFrustumAccurate"},{name:"sphere_sphere",newName:"sphereWithSphere"},{name:"sphere_aabb",newName:"sphereAABB"},{name:"sphere_obb",newName:"sphereOBB"},{name:"sphere_capsule",newName:"sphereCapsule"},{name:"capsule_capsule",newName:"capsuleWithCapsule"}]);var Du=function(t){function e(){var e;return e=t.call(this)||this,Bu("line","Line"),e}return l(e,t),e}(Ui),Hu=function(t){function e(){var e;return e=t.call(this)||this,Bu("plane","Plane"),e}return l(e,t),e}(Ha),qu=function(t){function e(){var e;return e=t.call(this)||this,Bu("ray","Ray"),e}return l(e,t),e}(Li),ju=function(t){function e(){var e;return e=t.call(this)||this,Bu("triangle","Triangle"),e}return l(e,t),e}(qa),Vu=function(t){function e(){var e;return e=t.call(this)||this,Bu("sphere","Sphere"),e}return l(e,t),e}(Ki),Gu=function(t){function e(){var e;return e=t.call(this)||this,Bu("aabb","AABB"),e}return l(e,t),e}(Ya),Wu=function(t){function e(){var e;return e=t.call(this)||this,Bu("obb","OBB"),e}return l(e,t),e}(ss),Ku=function(t){function e(){var e;return e=t.call(this)||this,Bu("capsule","Capsule"),e}return l(e,t),e}(Xa),Qu=function(t){function e(){var e;return e=t.call(this)||this,Bu("frustum","Frustum"),e}return l(e,t),e}(ns),Yu=Object.freeze({__proto__:null,distance:Ci,enums:Ri,intersect:La,Line:Ui,Plane:Ha,Ray:Li,Triangle:qa,Sphere:Ki,AABB:Ya,OBB:ss,Capsule:Xa,Frustum:ns,Keyframe:wu,AnimationCurve:Iu,get WrapModeMask(){return Nu},get SplineMode(){return zu},Spline:Fu,constructLegacyCurveAndConvert:Su,OptimizedKey:Eu,evalOptCurve:Au,get ERaycastMode(){return Pu},line:Du,plane:Hu,ray:qu,triangle:ju,sphere:Vu,aabb:Gu,obb:Wu,capsule:Ku,frustum:Qu});t("j",Yu);var Xu=t("b0",function(){function t(){this._id="",this._priority=0,this._executeInEditMode=!1}t.sortByPriority=function(t,e){return t._priority<e._priority?1:t._priority>e.priority?-1:0};var e=t.prototype;return e.init=function(){},e.update=function(){},e.postUpdate=function(){},e.destroy=function(){},h(t,[{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}}]),t}());Xu.Priority=Me({LOW:0,MEDIUM:100,HIGH:200,SCHEDULER:1<<31>>>0});var Zu=new Ot("Scheduler"),Ju=function(t,e,n,r){this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=t,this.priority=e,this.paused=n,this.markedForDeletion=r};Ju.get=function(t,e,n,r){var i=Ju._listEntries.pop();return i?(i.target=t,i.priority=e,i.paused=n,i.markedForDeletion=r):i=new Ju(t,e,n,r),i},Ju.put=function(t){Ju._listEntries.length<20&&(t.target=null,Ju._listEntries.push(t))},Ju._listEntries=[];var $u=function(t,e,n,r){this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=t,this.entry=e,this.target=n,this.callback=r};$u.get=function(t,e,n,r){var i=$u._hashUpdateEntries.pop();return i?(i.list=t,i.entry=e,i.target=n,i.callback=r):i=new $u(t,e,n,r),i},$u.put=function(t){$u._hashUpdateEntries.length<20&&(t.list=t.entry=t.target=t.callback=null,$u._hashUpdateEntries.push(t))},$u._hashUpdateEntries=[];var th=function(t,e,n,r,i,a){this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=t,this.target=e,this.timerIndex=n,this.currentTimer=r,this.currentTimerSalvaged=i,this.paused=a};th.get=function(t,e,n,r,i,a){var s=th._hashTimerEntries.pop();return s?(s.timers=t,s.target=e,s.timerIndex=n,s.currentTimer=r,s.currentTimerSalvaged=i,s.paused=a):s=new th(t,e,n,r,i,a),s},th.put=function(t){th._hashTimerEntries.length<20&&(t.timers=t.target=t.currentTimer=null,th._hashTimerEntries.push(t))},th._hashTimerEntries=[];var eh=function(){function t(){this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null}var e=t.prototype;return e.initWithCallback=function(t,e,n,r,i,a){return this._lock=!1,this._scheduler=t,this._target=n,this._callback=e,this._elapsed=-1,this._interval=r,this._delay=a,this._useDelay=this._delay>0,this._repeat=i,this._runForever=this._repeat===s.macro.REPEAT_FOREVER,!0},e.getInterval=function(){return this._interval},e.setInterval=function(t){this._interval=t},e.update=function(t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},e.getCallback=function(){return this._callback},e.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},e.cancel=function(){this._scheduler.unschedule(this._callback,this._target)},t}();eh._timers=[],eh.get=function(){return eh._timers.pop()||new eh},eh.put=function(t){eh._timers.length<20&&!t._lock&&(t._scheduler=t._target=t._callback=null,eh._timers.push(t))};var nh=t("aP",function(t){function e(){var e;return(e=t.call(this)||this)._timeScale=void 0,e._updatesNegList=void 0,e._updates0List=void 0,e._updatesPosList=void 0,e._hashForUpdates=void 0,e._hashForTimers=void 0,e._currentTarget=void 0,e._currentTargetSalvaged=void 0,e._updateHashLocked=void 0,e._arrayForTimers=void 0,e._timeScale=1,e._updatesNegList=[],e._updates0List=[],e._updatesPosList=[],e._hashForUpdates=qt(!0),e._hashForTimers=qt(!0),e._currentTarget=null,e._currentTargetSalvaged=!1,e._updateHashLocked=!1,e._arrayForTimers=[],e}l(e,t),e.enableForTarget=function(t){var e=!1;(t.uuid||t.id)&&(e=!0),e||(t.id=Zu.getNewId())};var n=e.prototype;return n.setTimeScale=function(t){this._timeScale=t},n.getTimeScale=function(){return this._timeScale},n.update=function(t){var e,n,r,i,a;for(this._updateHashLocked=!0,1!==this._timeScale&&(t*=this._timeScale),e=0,r=(n=this._updatesNegList).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||i.target.update(t);for(e=0,r=(n=this._updates0List).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||i.target.update(t);for(e=0,r=(n=this._updatesPosList).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||i.target.update(t);var s=this._arrayForTimers;for(e=0;e<s.length;e++){if(a=s[e],this._currentTarget=a,this._currentTargetSalvaged=!1,!a.paused)for(a.timerIndex=0;a.timerIndex<a.timers.length;++a.timerIndex)a.currentTimer=a.timers[a.timerIndex],a.currentTimerSalvaged=!1,a.currentTimer.update(t),a.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--e)}for(e=0,n=this._updatesNegList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updates0List;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updatesPosList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;this._updateHashLocked=!1,this._currentTarget=null},n.schedule=function(t,e,n,r,i,a){if("function"!=typeof t){D(1514);var o=t;t=e,e=o}3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(a=!!r,r=s.macro.REPEAT_FOREVER,i=0),$(e,1502);var m=e.uuid||e.id;if(m){var u,h,c=this._hashForTimers[m];if(c?c.paused!==a&&D(1511):(c=th.get(null,e,0,null,null,a),this._arrayForTimers.push(c),this._hashForTimers[m]=c),null==c.timers)c.timers=[];else for(h=0;h<c.timers.length;++h)if((u=c.timers[h])&&t===u._callback)return F(1507,u.getInterval(),n),void(u._interval=n);(u=eh.get()).initWithCallback(this,t,e,n,r,i),c.timers.push(u),this._currentTarget===c&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}else q(1510)},n.scheduleUpdate=function(t,e,n){var r=t.uuid||t.id;if(r){var i=this._hashForUpdates[r];if(i&&i.entry){if(i.entry.priority===e)return i.entry.markedForDeletion=!1,void(i.entry.paused=n);if(this._updateHashLocked)return F(1506),i.entry.markedForDeletion=!1,void(i.entry.paused=n);this.unscheduleUpdate(t)}var a,s=Ju.get(t,e,n,!1);0===e?(a=this._updates0List,this._appendIn(a,s)):(a=e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(a,s,e)),this._hashForUpdates[r]=$u.get(a,s,t,null)}else q(1510)},n.unschedule=function(t,e){if(e&&t){var n=e.uuid||e.id;if(n){var r=this._hashForTimers[n];if(r)for(var i=r.timers,a=0,s=i.length;a<s;a++){var o=i[a];if(t===o._callback)return o!==r.currentTimer||r.currentTimerSalvaged||(r.currentTimerSalvaged=!0),i.splice(a,1),eh.put(o),r.timerIndex>=a&&r.timerIndex--,void(0===i.length&&(this._currentTarget===r?this._currentTargetSalvaged=!0:this._removeHashElement(r)))}}else q(1510)}},n.unscheduleUpdate=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForUpdates[e];n&&(this._updateHashLocked?n.entry.markedForDeletion=!0:this._removeUpdateFromHash(n.entry))}else q(1510)}},n.unscheduleAllForTarget=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];if(n){var r=n.timers;r.indexOf(n.currentTimer)>-1&&!n.currentTimerSalvaged&&(n.currentTimerSalvaged=!0);for(var i=0,a=r.length;i<a;i++)eh.put(r[i]);r.length=0,this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)}this.unscheduleUpdate(t)}else q(1510)}},n.unscheduleAll=function(){this.unscheduleAllWithMinPriority(Xu.Priority.SCHEDULER)},n.unscheduleAllWithMinPriority=function(t){var e,n,r,i=this._arrayForTimers;for(e=i.length-1;e>=0;e--)n=i[e],this.unscheduleAllForTarget(n.target);var a=0;if(t<0)for(e=0;e<this._updatesNegList.length;)a=this._updatesNegList.length,(r=this._updatesNegList[e])&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesNegList.length&&e++;if(t<=0)for(e=0;e<this._updates0List.length;)a=this._updates0List.length,(r=this._updates0List[e])&&this.unscheduleUpdate(r.target),a===this._updates0List.length&&e++;for(e=0;e<this._updatesPosList.length;)a=this._updatesPosList.length,(r=this._updatesPosList[e])&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesPosList.length&&e++},n.isScheduled=function(t,e){$(t,1508),$(e,1509);var n=e.uuid||e.id;if(!n)return q(1510),!1;var r=this._hashForTimers[n];if(!r)return!1;if(null==r.timers)return!1;for(var i=r.timers,a=0;a<i.length;++a)if(t===i[a]._callback)return!0;return!1},n.pauseAllTargets=function(){return this.pauseAllTargetsWithMinPriority(Xu.Priority.SCHEDULER)},n.pauseAllTargetsWithMinPriority=function(t){var e,n,r,i,a=[],s=this._arrayForTimers;for(n=0,r=s.length;n<r;n++)(e=s[n])&&(e.paused=!0,a.push(e.target));if(t<0)for(n=0;n<this._updatesNegList.length;n++)(i=this._updatesNegList[n])&&i.priority>=t&&(i.paused=!0,a.push(i.target));if(t<=0)for(n=0;n<this._updates0List.length;n++)(i=this._updates0List[n])&&(i.paused=!0,a.push(i.target));for(n=0;n<this._updatesPosList.length;n++)(i=this._updatesPosList[n])&&i.priority>=t&&(i.paused=!0,a.push(i.target));return a},n.resumeTargets=function(t){if(t)for(var e=0;e<t.length;e++)this.resumeTarget(t[e])},n.pauseTarget=function(t){$(t,1503);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!0);var r=this._hashForUpdates[e];r&&(r.entry.paused=!0)}else q(1510)},n.resumeTarget=function(t){$(t,1504);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!1);var r=this._hashForUpdates[e];r&&(r.entry.paused=!1)}else q(1510)},n.isTargetPaused=function(t){$(t,1505);var e=t.uuid||t.id;if(!e)return q(1510),!1;var n=this._hashForTimers[e];if(n)return n.paused;var r=this._hashForUpdates[e];return!!r&&r.entry.paused},n._removeHashElement=function(t){var e=t.target.uuid||t.target.id;delete this._hashForTimers[e];for(var n=this._arrayForTimers,r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice(r,1);break}th.put(t)},n._removeUpdateFromHash=function(t){var e=t.target.uuid||t.target.id,n=this._hashForUpdates[e];if(n){for(var r=n.list,i=n.entry,a=0,s=r.length;a<s;a++)if(r[a]===i){r.splice(a,1);break}delete this._hashForUpdates[e],Ju.put(i),$u.put(n)}},n._priorityIn=function(t,e,n){for(var r=0;r<t.length;r++)if(n<t[r].priority)return void t.splice(r,0,e);t.push(e)},n._appendIn=function(t,e){t.push(e)},e}(Xu));nh.ID="scheduler",s.Scheduler=nh;var rh={};tr(rh,"vmath",[{name:"vec2",newName:"Vec2",target:bi,targetName:"math"},{name:"vec3",newName:"Vec3",target:bi,targetName:"math"},{name:"vec4",newName:"Vec4",target:bi,targetName:"math"},{name:"quat",newName:"Quat",target:bi,targetName:"math"},{name:"mat3",newName:"Mat3",target:bi,targetName:"math"},{name:"mat4",newName:"Mat4",target:bi,targetName:"math"},{name:"color4",newName:"Color",target:bi,targetName:"math"},{name:"rect",newName:"Rect",target:bi,targetName:"math"},{name:"approx",newName:"approx",target:bi,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:bi,targetName:"math"},{name:"equals",newName:"equals",target:bi,targetName:"math"},{name:"clamp",newName:"clamp",target:bi,targetName:"math"},{name:"clamp01",newName:"clamp01",target:bi,targetName:"math"},{name:"lerp",newName:"lerp",target:bi,targetName:"math"},{name:"toRadian",newName:"toRadian",target:bi,targetName:"math"},{name:"toDegree",newName:"toDegree",target:bi,targetName:"math"},{name:"random",newName:"random",target:bi,targetName:"math"},{name:"randomRange",newName:"randomRange",target:bi,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:bi,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:bi,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:bi,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:bi,targetName:"math"},{name:"repeat",newName:"repeat",target:bi,targetName:"math"},{name:"pingPong",newName:"pingPong",target:bi,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:bi,targetName:"math"}]),s.vmath=rh,tr(nh.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:nh,targetName:"Scheduler"}]),tr(nh,"Scheduler",[{name:"PRIORITY_SYSTEM",newName:"System.Priority.SCHEDULER",customGetter:function(){return Xu.Priority.SCHEDULER}}]),er(nh,"Scheduler",[{name:"PRIORITY_NON_SYSTEM",suggest:"Use enum` System.Priority` instead"}]),hr({replaceProperty:{since:"3.6.0",removed:!1},removeProperty:{since:"3.6.0",removed:!1},markAsWarning:{since:"3.6.0",removed:!1},setDefaultLogTimes:{since:"3.6.0",removed:!1}});var ih=new qr;function ah(t,e,n,r){r||(r=new qr),t.convertToUINode(e,n,r);var i=n.position;return r.add(i),r}function sh(t,e,n){return n||(n=new qr),t.worldToScreen(e,n),n.x/=s.view.getScaleX(),n.y/=s.view.getScaleY(),n}var oh=t("ao",{WorldNode3DToLocalNodeUI:ah,WorldNode3DToWorldNodeUI:sh});s.pipelineUtils=oh,tr(s.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.Camera.prototype",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[3]||ih;return r.convertToUINode(e[1],e[2],i),i.add(e[2].position),e[3]||i.clone()}}]),nr(xe,"js",[{name:"js",suggest:"'js.js' is deprecated since v3.7.0, please access 'js' directly instead."}]);var mh=function(t){function e(){var e,n;return(e=t.call(this)||this).isFrameRotated=!1,e.handleResizeEvent=!0,e._cbToUpdateFrameBuffer=void 0,e._resolutionScale=1,e._isProportionalToFrame=!1,null===(n=at.onWindowResize)||void 0===n||n.call(at,(function(){e.emit("window-resize",e.windowSize.width,e.windowSize.height)})),e}l(e,t);var n=e.prototype;return n.init=function(t,e){this._cbToUpdateFrameBuffer=e,this._cbToUpdateFrameBuffer()},n.requestFullScreen=function(){return Promise.reject(new Error("request fullscreen is not supported on this platform."))},n.exitFullScreen=function(){return Promise.reject(new Error("exit fullscreen is not supported on this platform."))},h(e,[{key:"supportFullScreen",get:function(){return!1}},{key:"isFullScreen",get:function(){return!1}},{key:"devicePixelRatio",get:function(){return at.getSystemInfoSync().pixelRatio}},{key:"windowSize",get:function(){var t=at.getSystemInfoSync(),e=this.devicePixelRatio,n=t.windowWidth,r=t.windowHeight;return new di(n*e,r*e)},set:function(){D(1221)}},{key:"resolution",get:function(){var t=this.windowSize,e=this.resolutionScale;return new di(t.width*e,t.height*e)}},{key:"resolutionScale",get:function(){return this._resolutionScale},set:function(t){var e;t!==this._resolutionScale&&(this._resolutionScale=t,null===(e=this._cbToUpdateFrameBuffer)||void 0===e||e.call(this))}},{key:"orientation",get:function(){return at.orientation},set:function(){console.warn("Setting orientation is not supported yet.")}},{key:"safeAreaEdge",get:function(){var t=at.getSafeArea(),e=this.windowSize,n=this.devicePixelRatio,r=t.top*n,i=e.height-t.bottom*n,a=t.left*n,s=e.width-t.right*n;return this.orientation===V.PORTRAIT?r<i?r=i:i=r:a<s?a=s:s=a,{top:r,bottom:i,left:a,right:s}}},{key:"isProportionalToFrame",get:function(){return this._isProportionalToFrame},set:function(){}}]),e}(jn),uh=t("bL",new mh),hh=function(){function t(){}var e=t.prototype;return e.init=function(){var t,e,n=null===(t=Ie.querySettings(ze.Category.SCREEN,"exactFitScreen"))||void 0===t||t,r=null!==(e=Ie.querySettings(ze.Category.SCREEN,"orientation"))&&void 0!==e?e:"auto",i=3===Ie.querySettings(ze.Category.RENDERING,"renderMode");uh.init({exactFitScreen:n,configOrientation:r,isHeadlessMode:i},(function(){var t,e=s.director;null!==(t=e.root)&&void 0!==t&&t.pipeline?e.root.pipeline.shadingScale=uh.resolutionScale:D(1220)}))},e.fullScreen=function(){return uh.isFullScreen},e.requestFullScreen=function(t,e,n){return arguments.length>0&&D(1400,"screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)","screen.requestFullScreen(): Promise"),uh.requestFullScreen().then((function(){null==e||e.call(document)})).catch((function(t){console.error(t),null==n||n.call(document)}))},e.exitFullScreen=function(){return uh.exitFullScreen()},e.autoFullScreen=function(t,e){var n;null===(n=this.requestFullScreen(t,e))||void 0===n||n.catch((function(){}))},e.disableAutoFullScreen=function(){},e.on=function(t,e,n){uh.on(t,e,n)},e.once=function(t,e,n){uh.once(t,e,n)},e.off=function(t,e,n){uh.off(t,e,n)},h(t,[{key:"devicePixelRatio",get:function(){return uh.devicePixelRatio}},{key:"windowSize",get:function(){return uh.windowSize},set:function(t){uh.windowSize=t}},{key:"resolution",get:function(){return uh.resolution}},{key:"supportsFullScreen",get:function(){return uh.supportFullScreen}}]),t}(),ch=t("aL",new hh);s.screen=ch;var lh=t("aM",{Feature:Hn,hasFeature:function(t){return Gn.hasFeature(t)},NetworkType:Fn,Language:kn,OS:Bn,Platform:Dn,BrowserType:Ln,isNative:Gn.isNative,isBrowser:Gn.isBrowser,isMobile:Gn.isMobile,isLittleEndian:Gn.isLittleEndian,platform:Gn.platform,language:Gn.language,languageCode:Gn.nativeLanguage,os:Gn.os,osVersion:Gn.osVersion,osMainVersion:Gn.osMainVersion,browserType:Gn.browserType,browserVersion:Gn.browserVersion,isXR:Gn.isXR,windowPixelResolution:ch.windowSize,capabilities:{canvas:!0,opengl:!0,webp:Gn.hasFeature(Hn.WEBP),imageBitmap:Gn.hasFeature(Hn.IMAGE_BITMAP),touches:Gn.hasFeature(Hn.INPUT_TOUCH),mouse:Gn.hasFeature(Hn.EVENT_MOUSE),keyboard:Gn.hasFeature(Hn.EVENT_KEYBOARD),accelerometer:Gn.hasFeature(Hn.EVENT_ACCELEROMETER)},localStorage:{},getNetworkType:function(){return Gn.networkType},getBatteryLevel:function(){return Gn.getBatteryLevel()},garbageCollect:function(){Gn.triggerGC()},isObjectValid:function(t){return null!=t},__isWebIOS14OrIPadOS14Env:!1,dump:function(){var t="";t+="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="supports webp: "+lh.hasFeature(Hn.WEBP)+"\r\n",t+="supports bitmap: "+lh.hasFeature(Hn.IMAGE_BITMAP)+"\r\n",t+="supports touches: "+lh.hasFeature(Hn.INPUT_TOUCH)+"\r\n",t+="supports mouse: "+lh.hasFeature(Hn.EVENT_MOUSE)+"\r\n",t+="supports keyboard: "+lh.hasFeature(Hn.EVENT_KEYBOARD)+"\r\n",t+="supports accelerometer: "+lh.hasFeature(Hn.EVENT_ACCELEROMETER)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",T(t+="Using "+(s.game.renderType===s.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n")},openURL:function(t){Gn.openURL(t)},init:function(){var t=this;return Promise.resolve().then((function(){return Gn.init()})).then((function(){try{var e=lh.localStorage=window.localStorage;e.setItem("storage",""),e.removeItem("storage"),e=null}catch(e){var n=function(){D(5200)};t.localStorage={getItem:n,setItem:n,clear:n,removeItem:n,key:n,length:0}}var r;t.__isWebIOS14OrIPadOS14Env=(lh.os===Bn.IOS||lh.os===Bn.OSX)&&(null===(r=GameGlobal)||void 0===r?void 0:r.isIOSHighPerformanceMode)&&/(OS 1((4\.[0-9])|(5\.[0-3])))|(Version\/1((4\.[0-9])|(5\.[0-3])))/.test(window.navigator.userAgent)}))},now:function(){return Gn.now()},restartVM:function(){Gn.restartJSVM()},getSafeAreaRect:function(){var t=s.view,e=uh.safeAreaEdge,n=uh.windowSize,r=new li(e.left,e.bottom),i=new li(n.width-e.right,n.height-e.top);t._convertToUISpace(r),t._convertToUISpace(i);var a=r.x,o=r.y,m=i.x-r.x,u=i.y-r.y;return new pi(a,o,m,u)}});s.sys=lh,nr(s,"cc",[{name:"winSize",suggest:"please use view.getVisibleSize() instead."}]),nr(lh,"sys",[{name:"capabilities",suggest:"please use sys.hasFeature() method instead."}]),tr(lh,"sys",["UNKNOWN","ENGLISH","CHINESE","FRENCH","ITALIAN","GERMAN","SPANISH","DUTCH","RUSSIAN","KOREAN","JAPANESE","HUNGARIAN","PORTUGUESE","ARABIC","NORWEGIAN","POLISH","TURKISH","UKRAINIAN","ROMANIAN","BULGARIAN"].map((function(t){return{name:"LANGUAGE_"+t,newName:t,target:lh.Language,targetName:"sys.Language"}}))),tr(lh,"sys",["UNKNOWN","IOS","ANDROID","WINDOWS","LINUX","OSX"].map((function(t){return{name:"OS_"+t,newName:t,target:lh.OS,targetName:"sys.OS"}}))),tr(lh,"sys",["UNKNOWN","WECHAT","ANDROID","IE","EDGE","QQ","MOBILE_QQ","UC","UCBS","BAIDU_APP","BAIDU","MAXTHON","OPERA","OUPENG","MIUI","FIREFOX","SAFARI","CHROME","LIEBAO","QZONE","SOUGOU","HUAWEI"].map((function(t){return{name:"BROWSER_TYPE_"+t,newName:t,target:lh.BrowserType,targetName:"sys.BrowserType"}}))),tr(lh,"sys",[{name:"BROWSER_TYPE_360",newName:"BROWSER_360",target:lh.BrowserType,targetName:"sys.BrowserType"}]),tr(lh,"sys",["UNKNOWN","EDITOR_PAGE","EDITOR_CORE","MOBILE_BROWSER","DESKTOP_BROWSER","WIN32","MACOS","IOS","ANDROID","OHOS","WECHAT_GAME","BAIDU_MINI_GAME","XIAOMI_QUICK_GAME","ALIPAY_MINI_GAME","BYTEDANCE_MINI_GAME","OPPO_MINI_GAME","VIVO_MINI_GAME","HUAWEI_QUICK_GAME","COCOSPLAY","LINKSURE_MINI_GAME","QTT_MINI_GAME"].map((function(t){return{name:t,target:lh.Platform,targetName:"sys.Platform"}}))),tr(lh,"sys",[{name:"IPHONE",newName:"IOS",target:lh.Platform,targetName:"sys.Platform"},{name:"IPAD",newName:"IOS",target:lh.Platform,targetName:"sys.Platform"}]),er(lh,"sys",["LINUX","BLACKBERRY","NACL","EMSCRIPTEN","TIZEN","WINRT","WP8","QQ_PLAY","FB_PLAYABLE_ADS"].map((function(t){return{name:t}}))),tr(lh,"sys",[{name:"windowPixelResolution",target:ch,targetName:"screen",newName:"windowSize"}]),nr(ch,"screen",[{name:"autoFullScreen",suggest:"please use screen.requestFullScreen() instead."},{name:"disableAutoFullScreen"}]);var fh=t("aO",{topLeft:s.v2(0,0),topRight:s.v2(0,0),top:s.v2(0,0),bottomLeft:s.v2(0,0),bottomRight:s.v2(0,0),bottom:s.v2(0,0),center:s.v2(0,0),left:s.v2(0,0),right:s.v2(0,0),width:0,height:0,init:function(t){var e=this.width=t.width,n=this.height=t.height,r=t.x,i=t.y,a=i+n,s=r+e;this.topLeft.x=r,this.topLeft.y=a,this.topRight.x=s,this.topRight.y=a,this.top.x=r+e/2,this.top.y=a,this.bottomLeft.x=r,this.bottomLeft.y=i,this.bottomRight.x=s,this.bottomRight.y=i,this.bottom.x=r+e/2,this.bottom.y=i,this.center.x=r+e/2,this.center.y=i+n/2,this.left.x=r,this.left.y=i+n/2,this.right.x=s,this.right.y=i+n/2}});function yh(){}s.visibleRect=fh,s.easing=ym,yh.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},yh.prototype.targetOff=function(t){this.removeAll(t)},t("b4",Object.freeze({__proto__:null,syncNodeValues:function(t){var e=t._lpos;t.setPositionForJS(e.x,e.y,e.z);var n=t._lscale;t.setScaleForJS(n.x,n.y,n.z);var r=t._lrot;t.setRotationForJS(r.x,r.y,r.z,r.w);var i=t._euler;t.setRotationFromEulerForJS(i.x,i.y,i.z)},updateChildrenForDeserialize:function t(e){if(e){var n=e.children;if(n){var r=n.length;if(r){e._setChildren(n);for(var i=0;i<r;++i)t(n[i])}}}},ExtraEventMethods:yh}));var dh=function(){function t(){this._finalizationRegistry=null,this._gcObjects=new WeakMap}var e=t.prototype;return e.registerGCObject=function(t){return t},e.init=function(){},e.finalizationRegistryCallback=function(t){var e=this._gcObjects.get(t);e&&(this._gcObjects.delete(t),e.destroy()),this._finalizationRegistry.unregister(t)},e.destroy=function(){},t}(),vh=t("bh",new dh);t("bi",function(){function t(){return vh.registerGCObject(this)}return t.prototype.destroy=function(){},t}()),s.math=bi,s.geometry=Yu}}}));
